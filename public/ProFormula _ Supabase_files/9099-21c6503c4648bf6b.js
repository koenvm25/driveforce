"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9099],{38420:function(e,t,n){n.d(t,{Z:function(){return N}});var s=n(88983),r=n(11246),a=n(27378),o=n(22648),l=n.n(o),i=n(58643),c=n(90849),u=n(24246);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){var t=e.type,n=e.time,r=e.setTime,o=e.setStartTime,l=e.setEndTime,c=e.startTime,d=e.endTime,p=e.startDate,x=e.endDate,f=(0,a.useState)(!1),h=f[0],v=f[1];function g(){var e=n;1===e.HH.length&&(e.HH="0"+e.HH),1===e.mm.length&&(e.mm="0"+e.mm),1===e.ss.length&&(e.ss="0"+e.ss),e.HH||(e.HH="00"),e.mm||(e.mm="00"),e.ss||(e.ss="00");var s=!1,a=d,u=!1,f=c;(0,i.Z)(new Date(p),"dd/mm/yyyy")==(0,i.Z)(new Date(x),"dd/mm/yyyy")&&("start"===t&&(e.HH&&Number(e.HH)>Number(d.HH)&&(a.HH=e.HH,s=!0),e.HH&&Number(e.HH)>=Number(d.HH)&&e.mm&&Number(e.mm)>Number(d.mm)&&(a.mm=e.mm,s=!0),e.HH&&Number(e.HH)>=Number(d.HH)&&e.mm&&Number(e.mm)>=Number(d.mm)&&e.ss&&Number(e.ss)>Number(d.ss)&&(a.ss=e.ss,s=!0)),"end"===t&&(e.HH&&Number(e.HH)<Number(c.HH)&&(f.HH=e.HH,u=!0),e.HH&&Number(e.HH)<=Number(c.HH)&&e.mm&&Number(e.mm)<Number(c.mm)&&(f.mm=e.mm,u=!0),e.HH&&Number(e.HH)<=Number(c.HH)&&e.mm&&Number(e.mm)<=Number(c.mm)&&e.ss&&Number(e.ss)<Number(c.ss)&&(f.ss=e.ss,u=!0))),r(m({},e)),s&&l(m({},a)),u&&o(m({},f)),v(!1)}function j(e,t){var s={HH:n.HH,mm:n.mm,ss:n.ss};if(!(e.length>2)){switch(t){case"HH":if(e&&Number(e)>23)return;break;case"mm":case"ss":if(e&&Number(e)>59)return}s[t]=e,r(m({},s))}}var b=function(e){e.target.select(),v(!0)};return(0,a.useEffect)((function(){g()}),[p,x]),(0,u.jsxs)("div",{className:"\n        flex h-7 items-center justify-center\n        gap-0 rounded border border-scale-700 bg-scale-100 text-xs text-scale-1100 dark:bg-scaleA-300\n        ".concat(h&&" border-scale-800 outline outline-2 outline-scale-500","\n    "),children:[(0,u.jsx)("div",{className:"mr-1 text-scale-900",children:(0,u.jsx)(s.joI,{size:14,strokeWidth:1.5})}),(0,u.jsx)("input",{type:"text",onBlur:function(){return g()},onFocus:b,pattern:"[0-23]*",placeholder:"00",onChange:function(e){return j(e.target.value,"HH")},"aria-label":"Hours",className:" ring-none w-4 border-none bg-transparent p-0 text-center text-xs text-scale-1200 outline-none ring-0 focus:ring-0 ",value:n.HH}),(0,u.jsx)("span",{className:"text-scale-900",children:":"}),(0,u.jsx)("input",{type:"text",onBlur:function(){return g()},onFocus:b,pattern:"[0-12]*",placeholder:"00",onChange:function(e){return j(e.target.value,"mm")},"aria-label":"Minutes",className:" ring-none w-4 border-none bg-transparent p-0 text-center text-xs text-scale-1200 outline-none ring-0 focus:ring-0 ",value:n.mm}),(0,u.jsx)("span",{className:"text-scale-900",children:":"}),(0,u.jsx)("input",{type:"text",onBlur:function(){return g()},onFocus:b,pattern:"[0-59]*",placeholder:"00",onChange:function(e){return j(e.target.value,"ss")},"aria-label":"Seconds",className:" ring-none w-4 border-none bg-transparent p-0 text-center text-xs text-scale-1200 outline-none ring-0 focus:ring-0 ",value:n.ss})]})},x=n(27693),f=n.n(x),h=new Date,v=new Date,g={HH:"00",mm:"00",ss:"00"},j={HH:"23",mm:"59",ss:"59"};var b=function(e){var t=e.to,n=e.from,o=e.onChange,c=e.triggerButtonType,d=void 0===c?"default":c,m=e.triggerButtonClassName,x=void 0===m?"":m,b=e.triggerButtonTitle,y=e.renderFooter,N=void 0===y?function(){return null}:y,w=(0,a.useState)(!1),_=w[0],O=w[1],S=(0,a.useState)(null),k=S[0],E=S[1],T=(0,a.useState)(null),P=T[0],C=T[1],R=(0,a.useState)(h),H=R[0],I=R[1],M=(0,a.useState)(v),D=M[0],A=M[1],L=(0,a.useState)(g),q=L[0],Z=L[1],G=(0,a.useState)(j),F=G[0],z=G[1];return(0,a.useEffect)((function(){if(n){if(n!==(null===k||void 0===k?void 0:k.toISOString())){var e=f()(n).toDate();E(e),I(e)}}else E(null);if(t){if(t!==(null===P||void 0===P?void 0:P.toISOString())){var s=f()(t).toDate();C(s),A(s)}}else C(null)}),[t,n]),(0,u.jsx)(s.J2e,{open:_,onOpenChange:function(e){return O(e)},size:"small",align:"center",side:"bottom",header:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"flex items-stretch justify-between py-2",children:[(0,u.jsx)("div",{className:"flex grow flex-col gap-1",children:(0,u.jsx)(p,{type:"start",startTime:q,endTime:F,time:q,setTime:Z,setStartTime:Z,setEndTime:z,startDate:H,endDate:D})}),(0,u.jsx)("div",{className:"\n                      flex \n                      w-12 \n                      items-center \n                      justify-center\n                      text-scale-900\n                    ",children:(0,u.jsx)(s.Ec8,{strokeWidth:1.5,size:14})}),(0,u.jsx)("div",{className:"flex grow flex-col gap-1",children:(0,u.jsx)(p,{type:"end",startTime:q,endTime:F,time:F,setTime:z,setStartTime:Z,setEndTime:z,startDate:H,endDate:D})})]})}),overlay:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"px-3 py-4",children:(0,u.jsx)(l(),{selected:H,onChange:function(e){!function(e){var t=(0,r.Z)(e,2),n=t[0],s=t[1];I(n),A(s)}(e)},dateFormat:"MMMM d, yyyy h:mm aa",startDate:H,endDate:D,selectsRange:!0,inline:!0,dayClassName:function(){return"cursor-pointer"},renderCustomHeader:function(e){var t=e.date,n=e.decreaseMonth,r=e.increaseMonth,a=e.prevMonthButtonDisabled,o=e.nextMonthButtonDisabled;return(0,u.jsx)("div",{className:"flex items-center justify-between px-2 py-2",children:(0,u.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,u.jsx)("button",{onClick:n,disabled:a,type:"button",className:"\n                        ".concat(a&&"cursor-not-allowed opacity-50","\n                        text-scale-1100 hover:text-scale-1200 focus:outline-none\n                    "),children:(0,u.jsx)(s.ed9,{size:16,strokeWidth:2})}),(0,u.jsx)("span",{className:"text-sm text-scale-1100",children:(0,i.Z)(t,"MMMM yyyy")}),(0,u.jsx)("button",{onClick:r,disabled:o,type:"button",className:"\n                        ".concat(o&&"cursor-not-allowed opacity-50","\n                        text-scale-1100 hover:text-scale-1200 focus:outline-none\n                    "),children:(0,u.jsx)(s.VG8,{size:16,strokeWidth:2})})]})})}})}),N({from:(null===H||void 0===H?void 0:H.toISOString())||null,to:(null===D||void 0===D?void 0:D.toISOString())||null}),(0,u.jsx)(s.J2e.Separator,{}),(0,u.jsxs)("div",{className:"flex items-center justify-end gap-2 py-2 px-3 pb-4",children:[(0,u.jsx)(s.zxk,{type:"default",onClick:function(){return O(!1),I(h),A(v),Z(g),z(j),E(null),void C(null)},children:"Clear"}),(0,u.jsx)(s.zxk,{onClick:function(){return function(){O(!1),E(H),C(D);var e={from:f().utc(H).second(q.ss).minute(q.mm).hour(q.HH).toISOString(),to:f().utc(D||H).second(F.ss).minute(F.mm).hour(F.HH).toISOString()};o&&o(e)}()},children:"Apply"})]})]}),children:(0,u.jsx)(s.zxk,{title:b,type:d,as:"span",icon:(0,u.jsx)(s.jt6,{}),className:x,children:k&&P&&k!==P?(0,u.jsxs)(u.Fragment,{children:[(0,i.Z)(new Date(k),"dd MMM")," -"," ",(0,i.Z)(new Date(P),"dd MMM")]}):k||P?(0,i.Z)(new Date(k||P),"dd MMM"):"Custom"})})},y=n(99099),N=function(e){var t=e.to,n=e.from,r=e.onChange,o=e.helpers,l=(0,y.PJ)(o),i=(0,a.useState)(t||n?"":l.text),c=i[0],d=i[1],m=o.find((function(e){return t===e.calcTo()&&n===e.calcFrom()}));return(0,a.useEffect)((function(){m&&c!==m.text?d(m.text):m||!t&&!n||d("")}),[m,t,n]),(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)(s.Ltx,{size:"small",side:"bottom",align:"start",overlay:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(s.Ltx.RadioGroup,{onChange:function(e){var t=o.find((function(t){return t.text===e}));r&&t&&r({to:t.calcTo(),from:t.calcFrom()})},value:(null===m||void 0===m?void 0:m.text)||"",children:o.map((function(e){return(0,u.jsx)(s.Ltx.Radio,{value:e.text,children:e.text},e.text)}))})}),children:(0,u.jsx)(s.zxk,{as:"span",type:c?"secondary":"default",icon:(0,u.jsx)(s.joI,{size:12}),className:"rounded-r-none",children:(null===m||void 0===m?void 0:m.text)||l.text})}),(0,u.jsx)(b,{triggerButtonClassName:"rounded-l-none",triggerButtonType:m?"default":"secondary",triggerButtonTitle:"Custom",onChange:function(e){d(""),r&&r(e)},to:c?void 0:t,from:c?void 0:n,renderFooter:function(e){var t=e.to,n=e.from;if(t&&n&&Math.abs(f()(n).diff(f()(t),"day"))>y.$K)return(0,u.jsx)(s.bZj,{title:"",variant:"warning",className:"mx-3 pl-2 pr-2 pt-1 pb-2",children:"Large ranges may result in memory errors for big projects."})}})]})}},90567:function(e,t,n){var s=n(24246);t.Z=function(e){var t=e.children;return(0,s.jsx)("pre",{className:"text-scale-1200 text-sm break-words py-4 px-3 w-full",children:t})}},76873:function(e,t,n){n.d(t,{n7:function(){return u},$K:function(){return d},xN:function(){return m},Eh:function(){return x},U_:function(){return c},ae:function(){return f},tZ:function(){return h},GT:function(){return v},dl:function(){return g},W:function(){return j},bj:function(){return b},up:function(){return y},PJ:function(){return N},fg:function(){return w}});var s,r=n(90849),a=n(27693),o=n.n(a);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c,u="https://supabase.com/docs/guides/platform/logs#querying-with-the-logs-explorer",d=4,m=[{label:"Recent Errors",mode:"simple",searchString:"[Ee]rror|\\s[45][0-9][0-9]\\s",for:["api"]},{label:"Commits",mode:"simple",searchString:"COMMIT",for:["database"]},{label:"Commits By User",description:"Count of commits made by users on the database",mode:"custom",searchString:"select\n  p.user_name,\n  count(*) as count\nfrom postgres_logs\n  left join unnest(metadata) as m on true\n  left join unnest(m.parsed) as p on true\nwhere\n  regexp_contains(event_message, 'COMMIT')\ngroup by\n  p.user_name\n  ",for:["database"]},{label:"Metadata IP",description:"List all IP addresses that used the Supabase API",mode:"custom",searchString:"select\n  cast(timestamp as datetime) as timestamp,\n  h.x_real_ip\nfrom edge_logs\n  left join unnest(metadata) as m on true\n  left join unnest(m.request) as r on true\n  left join unnest(r.headers) as h on true\nwhere h.x_real_ip is not null\n",for:["api"]},{label:"Requests by Country",description:"List all ISO 3166-1 alpha-2 country codes that used the Supabase API",mode:"custom",searchString:"select\n  cf.country,\n  count(*) as count\nfrom edge_logs\n  left join unnest(metadata) as m on true\n  left join unnest(m.request) as r on true\n  left join unnest(r.cf) as cf on true\ngroup by\n  cf.country\norder by\n  count desc\n",for:["api"]},{label:"Slow Response Time",mode:"custom",description:"List all Supabase API requests that are slow",searchString:"select\n  cast(timestamp as datetime) as timestamp,\n  event_message,\n  r.origin_time\nfrom edge_logs\n  cross join unnest(metadata) as m\n  cross join unnest(m.response) as r\nwhere\n  r.origin_time > 1000\norder by\n  timestamp desc\nlimit 100\n",for:["api"]},{label:"500 Request Codes",description:"List all Supabase API requests that responded witha 5XX status code",mode:"custom",searchString:"select\n  cast(timestamp as datetime) as timestamp,\n  event_message,\n  r.status_code\nfrom edge_logs\n  cross join unnest(metadata) as m\n  cross join unnest(m.response) as r\nwhere\n  r.status_code >= 500\norder by\n  timestamp desc\nlimit 100\n",for:["api"]},{label:"Top Paths",description:"List the most requested Supabase API paths",mode:"custom",searchString:"select\n  r.path as path,\n  r.search as params,\n  count(timestamp) as c\nfrom edge_logs\n  cross join unnest(metadata) as m\n  cross join unnest(m.request) as r\ngroup by\n  path,\n  params\norder by\n  c desc\nlimit 100\n",for:["api"]},{label:"REST Requests",description:"List all PostgREST requests",mode:"custom",searchString:"select\n  cast(timestamp as datetime) as timestamp,\n  event_message\nfrom edge_logs\n  cross join unnest(metadata) as m\n  cross join unnest(m.request) as r\nwhere\n  path like '%rest/v1%'\norder by\n  timestamp desc\nlimit 100\n",for:["api"]},{label:"Errors",description:"List all Postgres error messages with ERROR, FATAL, or PANIC severity",mode:"custom",searchString:"select\n  cast(t.timestamp as datetime) as timestamp,\n  p.error_severity,\n  event_message\nfrom postgres_logs as t\n  cross join unnest(metadata) as m\n  cross join unnest(m.parsed) as p\nwhere\n  p.error_severity in ('ERROR', 'FATAL', 'PANIC')\norder by\n  timestamp desc\nlimit 100\n",for:["database"]},{label:"Error Count by User",description:"Count of errors by users",mode:"custom",searchString:"select\n  count(t.timestamp) as count,\n  p.user_name,\n  p.error_severity\nfrom postgres_logs as t\n  cross join unnest(metadata) as m\n  cross join unnest(m.parsed) as p\nwhere\n  p.error_severity in ('ERROR', 'FATAL', 'PANIC')\ngroup by\n  p.user_name,\n  p.error_severity\norder by\n  count desc\nlimit 100\n",for:["database"]},{label:"Auth Endpoint Events",description:"Endpoint events filtered by path",mode:"custom",searchString:'select\n  t.timestamp,\n  event_message\nfrom auth_logs as t\nwhere\n  regexp_contains(event_message,"level.{3}(info|warning||error|fatal)")\n  -- and regexp_contains(event_message,"path.{3}(/token|/recover|/signup|/otp)")\nlimit 100\n',for:["database"]}],p={search_query:function(e){return"regexp_contains(event_message, '".concat(e,"')")}},x={postgres_logs:i(i({},p),{},{"severity.error":"parsed.error_severity in ('ERROR', 'FATAL', 'PANIC')","severity.noError":"parsed.error_severity not in ('ERROR', 'FATAL', 'PANIC')","severity.log":"parsed.error_severity = 'LOG'"}),edge_logs:i(i({},p),{},{"status_code.error":"response.status_code between 500 and 599","status_code.success":"response.status_code between 200 and 299","status_code.warning":"response.status_code between 400 and 499","product.database":"request.path like '/rest/%' or request.path like '/graphql/%'","product.storage":"request.path like '/storage/%'","product.auth":"request.path like '/auth/%'","product.realtime":"request.path like '/realtime/%'","method.get":"request.method = 'GET'","method.post":"request.method = 'POST'","method.put":"request.method = 'PUT'","method.patch":"request.method = 'PATCH'","method.delete":"request.method = 'DELETE'","method.options":"request.method = 'OPTIONS'"}),function_edge_logs:i(i({},p),{},{"status_code.error":"response.status_code between 500 and 599","status_code.success":"response.status_code between 200 and 299","status_code.warning":"response.status_code between 400 and 499"}),function_logs:i(i({},p),{},{"severity.error":"metadata.level = 'error'","severity.notError":"metadata.level != 'error'","severity.log":"metadata.level = 'log'","severity.info":"metadata.level = 'info'","severity.debug":"metadata.level = 'debug'","severity.warn":"metadata.level = 'warn'"}),auth_logs:i(i({},p),{},{"severity.error":'REGEXP_CONTAINS(event_message, "level.{3}error|level.{3}fatal")',"severity.warning":'REGEXP_CONTAINS(event_message, "level.{3}warning")',"severity.info":'REGEXP_CONTAINS(event_message, "level.{3}info")',"status_code.server_error":'REGEXP_CONTAINS(event_message, "status.{3}5[0-9]{2}")',"status_code.client_error":'REGEXP_CONTAINS(event_message, "status.{3}4[0-9]{2}")',"status_code.redirection":'REGEXP_CONTAINS(event_message, "status.{3}3[0-9]{2}")',"status_code.success":'REGEXP_CONTAINS(event_message, "status.{3}2[0-9]{2}")',"endpoints.admin":'REGEXP_CONTAINS(event_message, "path.{3}/admin")',"endpoints.signup":'REGEXP_CONTAINS(event_message, "path.{3}/signup|path.{3}/invite|path.{3}/verify")',"endpoints.authentication":'REGEXP_CONTAINS(event_message, "path.{3}/token|path.{3}/authorize|path.{3}/callback|path.{3}/otp|path.{3}/magiclink")',"endpoints.recover":'REGEXP_CONTAINS(event_message, "path.{3}/recover")',"endpoints.user":'REGEXP_CONTAINS(event_message, "path.{3}/user")',"endpoints.logout":'REGEXP_CONTAINS(event_message, "path.{3}/logout")'}),realtime_logs:i({},p),storage_logs:i({},p),postgrest_logs:i({},p),pgbouncer_logs:i({},p)};!function(e){e.EDGE="edge_logs",e.POSTGRES="postgres_logs",e.FUNCTIONS="function_logs",e.FN_EDGE="function_edge_logs",e.AUTH="auth_logs",e.REALTIME="realtime_logs",e.STORAGE="storage_logs",e.PGBOUNCER="pgbouncer_logs",e.POSTGREST="postgrest_logs"}(c||(c={}));var f={api:c.EDGE,database:c.POSTGRES,functions:c.FUNCTIONS,fn_edge:c.FN_EDGE,auth:c.AUTH,realtime:c.REALTIME,storage:c.STORAGE,postgrest:c.POSTGREST,pgbouncer:c.PGBOUNCER},h=(s={},(0,r.Z)(s,c.EDGE,"Logs obtained from the network edge, containing all API requests."),(0,r.Z)(s,c.POSTGRES,"Database logs obtained directly from Postgres."),(0,r.Z)(s,c.FUNCTIONS,"Function logs generated from runtime execution."),(0,r.Z)(s,c.FN_EDGE,"Function call logs, containing the request and response."),(0,r.Z)(s,c.AUTH,"Authentication logs from GoTrue"),(0,r.Z)(s,c.REALTIME,"Realtime server for Postgres logical replication broadcasting"),(0,r.Z)(s,c.STORAGE,"Object storage logs"),(0,r.Z)(s,c.PGBOUNCER,"Postgres connection pooler logs"),(0,r.Z)(s,c.POSTGREST,"RESTful API web server logs"),s),v=function(e){for(var t in e){var n=e[t];null!==n&&""!==n&&void 0!==n||delete e[t]}return new URLSearchParams(e).toString()},g={postgres_logs:{severity:{label:"Severity",key:"severity",options:[{key:"error",label:"Error",description:"Show all events with ERROR, PANIC, or FATAL"},{key:"noError",label:"No Error",description:"Show all non-error events"},{key:"log",label:"Log",description:"Show all events that are log severity"}]}},edge_logs:{status_code:{label:"Status",key:"status_code",options:[{key:"error",label:"Error",description:"500 error codes"},{key:"success",label:"Success",description:"200 codes"},{key:"warning",label:"Warning",description:"400 codes"}]},product:{label:"Product",key:"product",options:[{key:"database",label:"Database",description:""},{key:"auth",label:"Auth",description:""},{key:"storage",label:"Storage",description:""},{key:"realtime",label:"Realtime",description:""}]},method:{label:"Method",key:"method",options:[{key:"get",label:"GET",description:""},{key:"options",label:"OPTIONS",description:""},{key:"put",label:"PUT",description:""},{key:"post",label:"POST",description:""},{key:"patch",label:"PATCH",description:""},{key:"delete",label:"DELETE",description:""}]}},function_edge_logs:{status_code:{label:"Status",key:"status_code",options:[{key:"error",label:"Error",description:"500 error codes"},{key:"success",label:"Success",description:"200 codes"},{key:"warning",label:"Warning",description:"400 codes"}]}},function_logs:{severity:{label:"Severity",key:"severity",options:[{key:"error",label:"Error",description:'Show all events that are "error" severity'},{key:"warn",label:"Warning",description:'Show all events that are "warn" severity'},{key:"info",label:"Info",description:'Show all events that are "info" severity'},{key:"debug",label:"Debug",description:'Show all events that are "debug" severity'},{key:"log",label:"Log",description:'Show all events that are "log" severity'}]}},auth_logs:{severity:{label:"Severity",key:"severity",options:[{key:"error",label:"Error",description:"Show all events that have error or fatal severity"},{key:"warning",label:"Warning",description:"Show all events that have warning severity"},{key:"info",label:"Info",description:"Show all events that have error severity"}]},status_code:{label:"Status Code",key:"status_code",options:[{key:"server_error",label:"Server Error",description:"Show all requests with 5XX status code"},{key:"client_error",label:"Client Error",description:"Show all requests with 4XX status code"},{key:"redirection",label:"Redirection",description:"Show all requests that have 3XX status code"},{key:"success",label:"Success",description:"Show all requests that have 2XX status code"}]},endpoints:{label:"Endpoints",key:"endpoints",options:[{key:"admin",label:"Admin",description:"Show all admin requests"},{key:"signup",label:"Sign up",description:"Show all signup and authorization requests"},{key:"recover",label:"Password Recovery",description:"Show all password recovery requests"},{key:"authentication",label:"Authentication",description:"Show all authentication flow requests (login, otp, and Oauth2)"},{key:"user",label:"User",description:"Show all user data requests"},{key:"logout",label:"Logout",description:"Show all logout requests"}]}}},j={log_selection_x_padding:"px-8",space_y:"px-6"},b=[{text:"Last hour",calcFrom:function(){return o()().subtract(1,"hour").startOf("hour").toISOString()},calcTo:function(){return""},default:!0},{text:"Last 3 hours",calcFrom:function(){return o()().subtract(3,"hour").startOf("hour").toISOString()},calcTo:function(){return""}},{text:"Last 24 hours",calcFrom:function(){return o()().subtract(1,"day").startOf("day").toISOString()},calcTo:function(){return""}}],y=[{text:"Last 24 hours",calcFrom:function(){return o()().subtract(1,"day").startOf("day").toISOString()},calcTo:function(){return""},default:!0},{text:"Last 3 days",calcFrom:function(){return o()().subtract(3,"day").startOf("day").toISOString()},calcTo:function(){return""}},{text:"Last 7 days",calcFrom:function(){return o()().subtract(7,"day").startOf("day").toISOString()},calcTo:function(){return""}}],N=function(e){return e.find((function(e){return e.default}))||e[0]},w={FREE:{text:"1 day",value:1,unit:"day",promptUpgrade:!0},PRO:{text:"7 days",value:7,unit:"day",promptUpgrade:!0},PAYG:{text:"90 days",value:90,unit:"day",promptUpgrade:!1},TEAM:{text:"90 days",value:90,unit:"day",promptUpgrade:!1},ENTERPRISE:{text:"90 days",value:90,unit:"day",promptUpgrade:!1}}},20047:function(e,t,n){var s=n(88983),r=n(27378),a=n(24246);t.Z=function(e){var t=e.options,n=e.filters,o=e.onFiltersChange,l=e.buttonClassName,i=(0,r.useState)(!1),c=i[0],u=i[1],d=function(){o({}),u(!1)},m=function(){return u(!c)};return(0,a.jsx)(s.J2e,{className:"flex items-center",open:c,align:"end",size:"medium",onOpenChange:m,overlay:(0,a.jsx)(s.l09,{className:"w-full",initialValues:n,onSubmit:function(e,t){(0,t.setSubmitting)(!0),o(e),u(!1)},children:function(e){var o=e.isSubmitting;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"space-y-4 py-6",children:t.options.map((function(e,o){var l;return(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)(s.XZJ,{value:"true",id:"".concat(t.key,".").concat(e.key),className:"px-3",label:e.label,description:e.description,size:"medium",defaultChecked:null===n||void 0===n||null===(l=n[t.key])||void 0===l?void 0:l[e.key]}),o!==t.options.length-1&&(0,a.jsx)(s.J2e.Separator,{})]},e.key)}))}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 border-t border-scale-400 bg-scale-200 py-2 px-3 dark:border-scale-500 dark:bg-scale-400 ",children:[(0,a.jsx)(s.zxk,{size:"tiny",type:"default",onClick:d,htmlType:"button",children:"Clear"}),(0,a.jsx)(s.zxk,{loading:o,type:"primary",htmlType:"submit",children:"Save"})]})]})}}),portalled:!0,showClose:!0,side:"bottom",children:(0,a.jsx)(s.zxk,{as:"span",type:function(){var e=n[t.key];return!("object"!==typeof e||!Object.values(e).some(Boolean))}()?"secondary":"default",onClick:m,className:l,children:t.label})})}},25001:function(e,t,n){n.d(t,{VK:function(){return c},tS:function(){return u},Yj:function(){return d},VG:function(){return m},XA:function(){return p},TK:function(){return x},io:function(){return f},wv:function(){return h}});var s=n(88983),r=n(27693),a=n.n(r),o=(n(27378),n(99099)),l=n(1825),i=n(24246),c=function(e){var t=e.children;return(0,i.jsx)("div",{className:"flex h-full w-full items-center gap-4",children:t})},u=function(e){var t=e.value;return(0,i.jsx)(d,{label:"Timestamp",value:(0,o.Sj)(t)?(0,o.tI)(t):String(t)})},d=function(e){var t=e.label,n=e.value,s=e.valueRender;return(0,i.jsxs)("div",{className:"grid grid-cols-12 group",children:[(0,i.jsx)("span",{className:"text-scale-900 text-sm col-span-4 whitespace-pre-wrap",children:t}),(0,i.jsx)("span",{className:"text-scale-1200 text-sm col-span-6 whitespace-pre-wrap break-all",children:null!==s&&void 0!==s?s:n}),(0,i.jsx)(l.Z,{bounceIconOnCopy:!0,text:n,className:"group-hover:opacity-100 opacity-0 my-auto transition col-span-2  h-4 w-4 px-0 py-0",type:"text",title:"Copy to clipboard",children:""})]})},m=function(e){var t=e.value,n=e.className;return(0,i.jsx)("span",{className:"font-mono text-xs truncate "+n,children:t})},p=function(e){var t=e.value;if(!t)return(0,i.jsx)("div",{children:(0,i.jsx)("label",{className:"text-xs text-scale-800",children:"No data"})});switch(t.toString().split("")[0]){case"1":case"2":return(0,i.jsx)("div",{className:"flex h-full items-center",children:(0,i.jsx)("div",{className:"relative flex h-6 items-center justify-center rounded border bg-scale-500 px-2 py-1 text-center dark:bg-scale-400 ",children:(0,i.jsx)("label",{className:"block font-mono text-sm text-scale-900",children:t})})});case"5":return(0,i.jsx)("div",{className:"flex h-full items-center",children:(0,i.jsx)("div",{className:"relative flex h-6 items-center justify-center rounded bg-red-400 px-2 py-1 text-center ",children:(0,i.jsx)("label",{className:"block font-mono text-sm text-red-1100",children:t})})});case"4":case"3":return(0,i.jsx)("div",{className:"flex h-full items-center",children:(0,i.jsx)("div",{className:"relative flex h-6 items-center justify-center rounded bg-amber-400 px-2 py-1 text-center ",children:(0,i.jsx)("label",{className:"block font-mono text-sm text-amber-1100 dark:text-amber-900",children:t})})});default:return(0,i.jsx)("div",{className:"flex h-full items-center",children:(0,i.jsx)("div",{className:"relative flex h-6 items-center justify-center rounded bg-scale-300 px-2 py-1 text-center ",children:(0,i.jsx)("label",{className:"block font-mono text-sm text-scale-900",children:t})})})}},x=function(e){var t=e.value,n=e.uppercase,r=void 0===n||n;if(!t)return(0,i.jsx)("div",{children:(0,i.jsx)("label",{className:"text-xs text-scale-800",children:"No data"})});var a=t.toUpperCase(),o=r?a:t,l=function(e){var t=e.className,n=e.children;return(0,i.jsx)("div",{className:"w-24 flex items-center h-full ".concat(t),children:n})};switch(a){case"UNCAUGHTEXCEPTION":case"PANIC":case"FATAL":case"ERROR":return(0,i.jsxs)(l,{className:"gap-1",children:[(0,i.jsx)("div",{className:" p-0.5 rounded !text-red-900",children:(0,i.jsx)(s.Ldj,{size:14,strokeWidth:2})}),(0,i.jsx)("span",{className:"!text-red-900 !block titlecase",children:o})]});case"INFO":case"DEBUG":return(0,i.jsxs)(l,{className:"gap-1",children:[(0,i.jsx)("div",{className:" p-0.5 rounded !text-blue-900",children:(0,i.jsx)(s.Ldj,{size:14,strokeWidth:2})}),(0,i.jsx)("span",{className:"!text-blue-900 !block titlecase",children:o})]});case"LOG":return(0,i.jsxs)(l,{className:"gap-1",children:[(0,i.jsx)("div",{className:" p-0.5 rounded !text-blue-900",children:(0,i.jsx)(s.aUG,{size:14,strokeWidth:2})}),(0,i.jsx)("span",{className:"!text-blue-900 !block titlecase",children:o})]});case"WARNING":return(0,i.jsxs)(l,{className:"gap-1",children:[(0,i.jsx)("div",{className:" p-0.5 rounded !text-amber-900",children:(0,i.jsx)(s.Ldj,{size:14,strokeWidth:2})}),(0,i.jsx)("span",{className:"!text-amber-900 !block titlecase",children:o})]});default:return(0,i.jsx)(l,{children:(0,i.jsx)("div",{className:"relative rounded px-2 py-1 text-center h-6 flex justify-center items-center bg-scale-300",children:(0,i.jsx)("label",{className:"block font-mono text-sm text-scale-900",children:o})})})}},f=function(e){var t=e.value,n=e.className,s=(0,o.Sj)(t)?(0,o.tI)(t):t,r=a()(s).format("DD MMM, HH:mm:ss");return(0,i.jsx)("span",{className:"text-xs ".concat(n),children:r})};function h(e){var t=JSON.stringify(e,null,2);return(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(e){var t="number text-tomato-900";return/^"/.test(e)?t=/:$/.test(e)?"key text-scale-1200":"string text-brand-1100":/true|false/.test(e)?t="boolean text-blue-900":/null/.test(e)&&(t="null text-amber-1100"),'<span class="'+t+'">'+e+"</span>"})).split("\n").map((function(e){return'<span class="line text-xs">'.concat(e,"</span>")})).join("\n")}},99099:function(e,t,n){n.d(t,{up:function(){return s.up},n7:function(){return s.n7},$K:function(){return s.$K},tZ:function(){return s.tZ},ae:function(){return s.ae},_4:function(){return ve},ol:function(){return pe},dL:function(){return R},D8:function(){return O},U_:function(){return s.U_},bj:function(){return s.bj},Eh:function(){return s.Eh},xN:function(){return s.xN},fg:function(){return s.fg},AJ:function(){return g},g8:function(){return v},My:function(){return h},UR:function(){return p},GT:function(){return s.GT},ue:function(){return x},PJ:function(){return s.PJ},Oy:function(){return u},Sj:function(){return c},dP:function(){return f},tI:function(){return i}});var s=n(76873),r=n(11246),a=n(27693),o=n.n(a),l=n(98784),i=function(e){return o().unix(Number(e)/1e3/1e3).toISOString()},c=function(e){var t=16===String(e).length;return!Number.isNaN(Number(e))&&t},u=function(e){return e&&e.timestamp&&e.event_message&&e.id},d=function e(t,n){return Object.keys(t).filter((function(e){return t[e]})).flatMap((function(s){var r=n?"".concat(n,".").concat(s):s;return"object"===typeof t[s]?e(t[s],r):[r]}))},m=function(e,t){var n=Object.keys(t),r=s.Eh[e],a=function(e){var n=r[e],s=(0,l.get)(t,e);return void 0!==s&&"function"===typeof n?n(s):void 0===n?"string"===typeof s?"".concat(e," = '").concat(s,"'"):"".concat(e," = ").concat(s):void 0===s&&"function"===typeof n||n&&!1===s?null:n},o=n.map((function(e){if("object"===typeof t[e]){var n=d(t[e],e).map(a).filter(Boolean);return n.length>0?"(".concat(n.join(" or "),")"):null}var s=a(e);return null===s?null:"(".concat(s,")")})).filter(Boolean).join(" and ");return o?"where "+o:""},p=function(e,t){var n=m(e,t);switch(e){case"edge_logs":return"select id, timestamp, event_message, request.method, request.path, response.status_code\n  from ".concat(e,"\n  cross join unnest(metadata) as m\n  cross join unnest(m.request) as request\n  cross join unnest(m.response) as response\n  ").concat(n,"\n  limit 100\n  ");case"postgres_logs":return"select postgres_logs.timestamp, id, event_message, parsed.error_severity from ".concat(e,"\n  cross join unnest(metadata) as m\n  cross join unnest(m.parsed) as parsed\n  ").concat(n,"\n  limit 100\n  ");case"function_logs":return"select id, ".concat(e,".timestamp, event_message, metadata.event_type, metadata.function_id, metadata.level from ").concat(e,"\n  cross join unnest(metadata) as metadata\n  ").concat(n,"\n  limit 100\n    ");case"function_edge_logs":return"select id, ".concat(e,".timestamp, event_message, response.status_code, request.method, m.function_id, m.execution_time_ms, m.deployment_id, m.version from ").concat(e,"\n  cross join unnest(metadata) as m\n  cross join unnest(m.response) as response\n  cross join unnest(m.request) as request\n  ").concat(n,"\n  limit 100\n  ");default:return"select id, ".concat(e,".timestamp, event_message from ").concat(e,"\n  ").concat(n,"\n  limit 100\n  ")}},x=function(e,t){return"select id, timestamp, event_message, metadata from ".concat(e," where id = '").concat(t,"' limit 1")},f=function(e,t){var n=Math.abs(o()().diff(o()(e),"day"));return n>1&&"FREE"===t||n>7&&"PRO"===t||n>28&&"TEAM"===t||n>90&&"ENTERPRISE"===t},h=function(e,t){var n=m(e,t);return"SELECT count(*) as count FROM ".concat(e," ").concat(n)},v=function(e,t,n){var s=function(e){var t=e.iso_timestamp_end?o()(e.iso_timestamp_end):o()(),n=e.iso_timestamp_start?o()(e.iso_timestamp_start):o()(),s="minute",r=360,a=t.diff(n,"minute"),l=t.diff(n,"hour");return a>720?(s="hour",r=120):l>72&&(s="day",r=7),[n.add(-r,s),s]}(t),a=(0,r.Z)(s,2),l=a[0],i=a[1],c=m(e,n);return"\nSELECT\n  timestamp_trunc(t.timestamp, ".concat(i,") as timestamp,\n  count(t.timestamp) as count\nFROM\n  ").concat(e," t\n  cross join unnest(t.metadata) as metadata\n  ").concat(c?c+" and t.timestamp > '".concat(l.toISOString(),"'"):"where t.timestamp > '".concat(l.toISOString(),"'"),"\nGROUP BY\ntimestamp\nORDER BY\n  timestamp ASC\n  ")},g=function(e,t){var n=(0,r.Z)(e,2),s=n[0],a=n[1],l=(0,r.Z)(t,2),i=l[0],c=l[1];if(s&&a&&c&&!i){var u=o()(c).diff(o()(s)),d=o()(s);if(u<=0){var m=Math.abs(o()(a).diff(d,"minute"));d=o()(c).subtract(m,"minute")}return[d.toISOString(),c]}return!c&&i?[i,a]:[i,c]},j=n(27378),b=n(88983),y=n(55671),N=n(86677),w=n(90567),_=n(24246),O=function(e){var t=e.item,n=(0,j.useState)(!1),s=n[0],r=n[1],a=(0,N.useRouter)(),l=a.query.ref;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(y.Z.tr,{className:"expandable-tr",children:[(0,_.jsx)(y.Z.td,{className:"whitespace-nowrap",children:(0,_.jsxs)("div",{className:"flex items-center gap-2",children:[(0,_.jsx)("button",{onClick:function(){return r(!s)},children:(0,_.jsx)("div",{className:"transition "+(s?"rotate-90":"rotate-0"),children:(0,_.jsx)(b.VG8,{strokeWidth:2,size:14})})}),(0,_.jsx)("span",{className:"text-sm text-scale-1200",children:t.name})]})}),(0,_.jsx)(y.Z.td,{className:"",children:(0,_.jsx)("span",{className:"text-scale-1100",children:t.description})}),(0,_.jsx)(y.Z.td,{className:"",children:(0,_.jsx)("span",{className:"text-scale-1100",children:o()(t.inserted_at).format("DD MMM, YYYY HH:mm")})}),(0,_.jsx)(y.Z.td,{className:"",children:(0,_.jsx)("span",{className:"text-scale-1100",children:o()(t.updated_at).format("DD MMM, YYYY HH:mm")})}),(0,_.jsx)(y.Z.td,{className:" text-right",children:(0,_.jsx)(b.zxk,{type:"alternative",iconRight:(0,_.jsx)(b.JFb,{size:10}),onClick:function(){return a.push("/project/".concat(l,"/logs/explorer?q=").concat(encodeURIComponent(t.content.sql)))},children:"Run"})})]},t.id),(0,_.jsx)(y.Z.td,{className:"".concat(s?" h-auto opacity-100":"h-0 opacity-0"," expanded-row-content border-l border-r bg-scale-100 !pt-0 !pb-0 transition-all"),colSpan:5,children:s&&(0,_.jsx)(w.Z,{children:t.content.sql})})]})},S=n(24532),k=n(68043),E=n(38420),T=n(79894),P=n(42791),C=n(51856),R=function(e){var t,n,r=e.templates,a=void 0===r?[]:r,o=e.onSelectTemplate,l=e.hasEditorValue,i=e.onRun,c=e.onClear,u=e.onSave,d=e.onSelectSource,m=e.isLoading,p=e.defaultFrom,x=e.defaultTo,f=e.onDateChange,h=e.warnings,v=(0,P.oR)().ui,g=(0,P.FH)(k.KA.CREATE,"user_content",{resource:{type:"log_sql",owner_id:null===(t=v.profile)||void 0===t?void 0:t.id},subject:{id:null===(n=v.profile)||void 0===n?void 0:n.id}});return(0,_.jsx)("div",{className:" rounded rounded-bl-none rounded-br-none border border-panel-border-light bg-panel-header-light dark:border-panel-border-dark dark:bg-panel-header-dark ",children:(0,_.jsx)("div",{className:"flex w-full items-center justify-between px-5 py-2",children:(0,_.jsxs)("div",{className:"flex w-full flex-row items-center justify-between gap-x-4",children:[(0,_.jsxs)("div",{className:"flex items-center gap-2",children:[(0,_.jsx)(b.Ltx,{side:"bottom",align:"start",overlay:Object.values(s.U_).sort((function(e,t){return e.localeCompare(t)})).map((function(e){return(0,_.jsx)(b.Ltx.Item,{onClick:function(){return d(e)},children:(0,_.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,_.jsx)("span",{className:"font-mono font-bold text-scale-1100",children:e}),(0,_.jsx)("span",{className:"text-scale-1100",children:s.tZ[e]})]})},e)})),children:(0,_.jsx)(b.zxk,{as:"span",type:"default",iconRight:(0,_.jsx)(b.C26,{}),children:"Insert source"})}),(0,_.jsx)(b.Ltx,{side:"bottom",align:"start",overlay:a.sort((function(e,t){return e.label.localeCompare(t.label)})).map((function(e){return(0,_.jsx)(b.Ltx.Item,{onClick:function(){return o(e)},children:(0,_.jsx)("p",{children:e.label})},e.label)})),children:(0,_.jsx)(b.zxk,{as:"span",type:"default",iconRight:(0,_.jsx)(b.C26,{}),children:"Templates"})}),(0,_.jsx)(E.Z,{to:x,from:p,onChange:f,helpers:s.up}),(0,_.jsx)("div",{className:"overflow-hidden",children:(0,_.jsx)("div",{className:" transition-all duration-300 ".concat(h.length>0?"opacity-100":"invisible h-0 w-0 opacity-0"),children:(0,_.jsx)(b.J2e,{portalled:!0,overlay:(0,_.jsx)(b.bZj,{variant:"warning",title:"",children:(0,_.jsx)("div",{className:"flex flex-col gap-3",children:h.map((function(e,t){return(0,_.jsxs)("p",{children:[e.text," ",e.link&&(0,_.jsx)(T.default,{href:e.link,children:e.linkText||"View"})]},t)}))})}),children:(0,_.jsxs)(b.Cts,{color:"yellow",children:[h.length," ",h.length>1?"warnings":"warning"]})})})})]}),(0,_.jsx)("div",{children:(0,_.jsxs)("div",{className:"flex items-center gap-4",children:[(0,_.jsxs)("div",{className:"flex items-center gap-2",children:[(0,_.jsx)("a",{target:"_blank",href:s.n7,children:(0,_.jsx)(b.zxk,{type:"default",icon:(0,_.jsx)(C.Z,{size:12}),children:"Docs"})}),(0,_.jsx)(b.zxk,{type:"default",onClick:c,children:"Clear query"}),u&&(0,_.jsxs)(S.fC,{delayDuration:0,children:[(0,_.jsx)(S.xz,{children:(0,_.jsx)(b.zxk,{type:"default",onClick:function(){return u()},disabled:!g||!l,children:"Save query"})}),!g&&(0,_.jsxs)(S.VY,{side:"bottom",children:[(0,_.jsx)(S.Eh,{className:"radix-tooltip-arrow"}),(0,_.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,_.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to save your query"})})]})]})]}),(0,_.jsx)(b.zxk,{type:l?"primary":"alternative",disabled:!l,onClick:i,iconRight:(0,_.jsx)(b.JFb,{}),loading:m,children:"Run"})]})})]})})})},H=n(90849),I=n(44285),M=n(98637),D=function(){return(0,_.jsx)("div",{className:"h-px w-full bg-panel-border-interior-light dark:bg-panel-border-interior-dark"})},A=n(25001),L=function(e){var t,n,r,a,o,l,i,c,u,d,m,p,x=e.log,f=null===x||void 0===x||null===(t=x.metadata[0])||void 0===t||null===(n=t.request)||void 0===n?void 0:n[0],h=null===x||void 0===x||null===(r=x.metadata[0])||void 0===r||null===(a=r.response)||void 0===a?void 0:a[0],v=null===f||void 0===f?void 0:f.method,g=null===h||void 0===h?void 0:h.status_code,j=null===f||void 0===f||null===(o=f.headers)||void 0===o||null===(l=o[0])||void 0===l?void 0:l.cf_connecting_ip,b=null===f||void 0===f||null===(i=f.headers)||void 0===i||null===(c=i[0])||void 0===c?void 0:c.cf_ipcountry,y=null===f||void 0===f||null===(u=f.headers)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.x_client_info,N=null===f||void 0===f||null===(m=f.headers)||void 0===m||null===(p=m[0])||void 0===p?void 0:p.referer;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"".concat(s.W.log_selection_x_padding," space-y-2"),children:[(0,_.jsx)(A.Yj,{label:"Status",value:g,valueRender:(0,_.jsx)(A.XA,{value:g})}),(0,_.jsx)(A.Yj,{label:"Method",value:v}),(0,_.jsx)(A.tS,{value:x.timestamp}),(0,_.jsx)(A.Yj,{label:"IP Address",value:j}),(0,_.jsx)(A.Yj,{label:"Origin Country",value:b}),y&&(0,_.jsx)(A.Yj,{label:"Client",value:y}),N&&(0,_.jsx)(A.Yj,{label:"Referer",value:N})]}),(0,_.jsx)(D,{}),(0,_.jsxs)("div",{className:"".concat(s.W.log_selection_x_padding),children:[(0,_.jsx)("h3",{className:"text-lg text-scale-1200 mb-4",children:"Request Metadata"}),(0,_.jsx)("pre",{className:"text-sm syntax-highlight overflow-x-auto",children:(0,_.jsx)("div",{className:"text-wrap",dangerouslySetInnerHTML:{__html:f?(0,A.wv)(x.metadata[0].request[0]):""}})})]}),(0,_.jsx)(D,{}),(0,_.jsxs)("div",{className:"".concat(s.W.log_selection_x_padding),children:[(0,_.jsx)("h3",{className:"text-lg text-scale-1200 mb-4",children:"Response Metadata"}),(0,_.jsx)("pre",{className:"text-sm syntax-highlight overflow-x-auto",children:(0,_.jsx)("div",{dangerouslySetInnerHTML:{__html:h?(0,A.wv)(x.metadata[0].response[0]):""}})})]})]})},q=function(e){var t,n,r,a,o,l,i,c,u=e.log,d=null===u||void 0===u||null===(t=u.metadata[0])||void 0===t||null===(n=t.parsed[0])||void 0===n?void 0:n.user_name,m=null===u||void 0===u||null===(r=u.metadata[0])||void 0===r||null===(a=r.parsed[0])||void 0===a?void 0:a.session_id,p=null===u||void 0===u||null===(o=u.metadata[0])||void 0===o||null===(l=o.parsed[0])||void 0===l?void 0:l.hint,x=null===u||void 0===u||null===(i=u.metadata[0])||void 0===i||null===(c=i.parsed[0])||void 0===c?void 0:c.error_severity;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:s.W.log_selection_x_padding,children:[(0,_.jsx)("span",{className:"col-span-4 text-sm text-scale-900",children:"Event message"}),(0,_.jsx)("div",{className:"text-wrap mt-2 overflow-x-auto whitespace-pre-wrap font-mono  text-xs text-scale-1200",children:u.event_message})]}),(0,_.jsx)(D,{}),(0,_.jsxs)("div",{className:"".concat(s.W.log_selection_x_padding," space-y-2"),children:[(0,_.jsx)(A.Yj,{label:"Severity",value:x,valueRender:(0,_.jsx)(A.TK,{value:x})}),(0,_.jsx)(A.tS,{value:u.timestamp}),(0,_.jsx)(A.Yj,{label:"Postgres Username",value:d}),(0,_.jsx)(A.Yj,{label:"Session ID",value:m})]}),p&&(0,_.jsx)("div",{className:"mt-4 ".concat(s.W.log_selection_x_padding),children:(0,_.jsx)(b.bZj,{variant:"warning",withIcon:!0,title:p})}),(0,_.jsx)(D,{}),(0,_.jsxs)("div",{className:s.W.log_selection_x_padding,children:[(0,_.jsx)("h3",{className:"mb-4 text-lg text-scale-1200",children:"Metadata"}),(0,_.jsx)("pre",{className:"syntax-highlight overflow-x-auto text-sm",children:(0,_.jsx)("div",{className:"text-wrap",dangerouslySetInnerHTML:{__html:u.metadata?(0,A.wv)(u.metadata[0]):""}})})]})]})};function Z(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=(0,r.Z)(e,1)[0];return!["host","url"].includes(t)})).map((function(e){var t=(0,r.Z)(e,2),n=t[0],s=t[1];return"headers"===n?[n,s.map((function(e){return Object.fromEntries(Object.entries(e).filter((function(e){return!(0,r.Z)(e,1)[0].startsWith("_")})))}))]:[n,s]})))}var G=function(e){var t,n,r,a=e.log,o=null===(t=a.metadata)||void 0===t?void 0:t[0],l=null===o||void 0===o||null===(n=o.request)||void 0===n?void 0:n[0],i=null===o||void 0===o||null===(r=o.response)||void 0===r?void 0:r[0],c=null===l||void 0===l?void 0:l.method,u=null===i||void 0===i?void 0:i.status_code,d=new URL(null===l||void 0===l?void 0:l.url),m=o.execution_time_ms,p=o.deployment_id;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"".concat(s.W.log_selection_x_padding," space-y-2"),children:[(0,_.jsx)(A.Yj,{label:"Status",value:u,valueRender:(0,_.jsx)(A.XA,{value:u})}),(0,_.jsx)(A.Yj,{label:"Method",value:c}),(0,_.jsx)(A.tS,{value:a.timestamp}),(0,_.jsx)(A.Yj,{label:"Execution Time",value:"".concat(m,"ms")}),(0,_.jsx)(A.Yj,{label:"Deployment ID",value:p}),(0,_.jsx)(A.Yj,{label:"Log ID",value:a.id}),(0,_.jsx)(A.Yj,{label:"Request Path",value:d.pathname+d.search})]}),(0,_.jsxs)("div",{className:"".concat(s.W.log_selection_x_padding),children:[(0,_.jsx)("h3",{className:"text-lg text-scale-1200 mb-4",children:"Request body"}),(0,_.jsx)("pre",{className:"text-sm syntax-highlight overflow-x-auto",children:(0,_.jsx)("div",{className:"text-wrap",dangerouslySetInnerHTML:{__html:l?(0,A.wv)(Z(l)):""}})})]}),(0,_.jsxs)("div",{className:"".concat(s.W.log_selection_x_padding),children:[(0,_.jsxs)("h3",{className:"text-lg text-scale-1200 mb-4",children:["Response",c?" ".concat(c):null," body"]}),(0,_.jsx)("pre",{className:"text-sm syntax-highlight overflow-x-auto",children:(0,_.jsx)("div",{dangerouslySetInnerHTML:{__html:i?(0,A.wv)(Z(i)):""}})})]})]})},F=function(e){var t=e.log,n=t.metadata[0];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"".concat(s.W.log_selection_x_padding),children:[(0,_.jsx)("span",{className:"text-scale-900 text-sm col-span-4",children:"Event message"}),(0,_.jsx)("div",{className:"text-xs text-wrap font-mono text-scale-1200 mt-2 whitespace-pre-wrap overflow-x-auto",children:t.event_message})]}),(0,_.jsx)("div",{className:"h-px w-full bg-panel-border-interior-light dark:bg-panel-border-interior-dark"}),(0,_.jsxs)("div",{className:"".concat(s.W.log_selection_x_padding," space-y-2"),children:[(0,_.jsx)(A.Yj,{label:"Severity",value:n.level,valueRender:(0,_.jsx)(A.TK,{value:n.level})}),(0,_.jsx)(A.Yj,{label:"Deployment version",value:n.version}),(0,_.jsx)(A.tS,{value:t.timestamp}),(0,_.jsx)(A.Yj,{label:"Execution ID",value:n.execution_id}),(0,_.jsx)(A.Yj,{label:"Deployment ID",value:n.deployment_id})]}),(0,_.jsxs)("div",{className:"".concat(s.W.log_selection_x_padding),children:[(0,_.jsx)("h3",{className:"text-lg text-scale-1200 mb-4",children:"Metadata"}),(0,_.jsx)("pre",{className:"text-sm syntax-highlight overflow-x-auto",children:(0,_.jsx)("div",{className:"text-wrap",dangerouslySetInnerHTML:{__html:n?(0,A.wv)(n):""}})})]})]})},z=function(e){var t=e.log,n=function(e){var t=e.label,n=e.value,s=e.code;return(0,_.jsxs)("div",{className:"grid grid-cols-12",children:[(0,_.jsx)("span",{className:"text-scale-900 text-sm col-span-4",children:t}),(0,_.jsx)("span",{className:"text-scale-1200 text-sm col-span-8 overflow-x-auto ".concat(s&&"text-xs font-mono"),children:(0,_.jsx)("pre",{dangerouslySetInnerHTML:{__html:(0,A.wv)(n)}})})]})};return(0,_.jsx)("div",{className:"overflow-hidden overflow-x-auto space-y-6",children:Object.entries(t).map((function(e,t){var a=(0,r.Z)(e,2),o=a[0],l=a[1];return(0,_.jsx)("div",{className:"".concat(s.W.log_selection_x_padding),children:l&&"object"===typeof l?(0,_.jsx)(n,{label:o,value:l}):(0,_.jsx)(A.Yj,{label:o,value:null===l?"NULL ":String(l)})},"".concat(o,"-").concat(t))}))})},U=function(e){var t=e.log;return(0,_.jsxs)("div",{className:"".concat(s.W.log_selection_x_padding," space-y-6"),children:[(0,_.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,_.jsx)("h3",{className:"text-scale-900 text-sm",children:"Event Message"}),(0,_.jsx)("div",{className:"text-xs text-wrap font-mono text-scale-1200 whitespace-pre-wrap overflow-x-auto",children:t.event_message})]}),(0,_.jsx)(A.tS,{value:t.timestamp}),(0,_.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,_.jsx)("h3",{className:"text-scale-900 text-sm",children:"Metadata"}),(0,_.jsx)("pre",{className:" className={`text-scale-1200 text-sm col-span-8 overflow-x-auto text-xs font-mono`}",dangerouslySetInnerHTML:{__html:(0,A.wv)(t.metadata)}})]})]})},W=n(20796),Y=n(14919),X=n(36492);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,H.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=function(e,t,n,r){var a=t?s.ae[t]:void 0,o=r&&a?x(a,r):"",l=J(J({},n),{},{project:e,sql:o}),i="".concat(W.T5,"/projects/").concat(e,"/analytics/endpoints/logs.all?").concat((0,s.GT)(l)),c=Boolean(r&&a),u=(0,X.a)(["projects",e,"log",r],(function(e){var t=e.signal;return(0,Y.U2)(i,{signal:t})}),{enabled:c,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1}),d=u.data,m=u.error,p=u.isLoading,f=u.isRefetching,h=u.refetch,v=m?m.message:null;return[{logData:null!==d&&void 0!==d&&d.result?d.result[0]:void 0,isLoading:c&&p||f,error:v},{refresh:function(){return h()}}]},K=n(62771),Q=n(1825),$=n(98574),ee=function(e){var t=e.log,n=(0,$.dW)(t.event_message.trim());return(0,_.jsxs)("div",{className:"".concat(s.W.log_selection_x_padding," space-y-6"),children:[(0,_.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,_.jsx)("h3",{className:"text-scale-900 text-sm",children:"Event Message"}),(0,_.jsx)("div",{className:"text-xs text-wrap font-mono text-scale-1200 whitespace-pre-wrap overflow-x-auto",children:(null===n||void 0===n?void 0:n.msg)||t.event_message})]}),(0,_.jsx)(A.tS,{value:t.timestamp}),(null===n||void 0===n?void 0:n.status)&&(0,_.jsx)(A.Yj,{label:"Status",value:String(n.status),valueRender:(0,_.jsx)(A.XA,{value:n.status})}),(null===n||void 0===n?void 0:n.level)&&(0,_.jsx)(A.Yj,{label:"Severity",value:n.level,valueRender:(0,_.jsx)(A.TK,{value:n.level})}),(null===n||void 0===n?void 0:n.path)&&(0,_.jsx)(A.Yj,{label:"Request Path",value:n.path}),(null===n||void 0===n?void 0:n.error)&&(0,_.jsx)(A.Yj,{label:"Error Message",value:n.error}),(0,_.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,_.jsx)("h3",{className:"text-scale-900 text-sm",children:"Metadata"}),(0,_.jsx)("pre",{className:" className={`text-scale-1200 text-sm col-span-8 overflow-x-auto text-xs font-mono`}",dangerouslySetInnerHTML:{__html:(0,A.wv)(n||t.metadata)}})]})]})},te=function(e){var t=e.projectRef,n=e.log,s=e.onClose,a=e.queryType,o=e.params,l=V(t,a,void 0===o?{}:o,null===n||void 0===n?void 0:n.id),d=(0,r.Z)(l,1)[0],m=d.logData,p=d.isLoading,x=function(){switch(a){case"api":return m?(0,_.jsx)(L,{log:m}):null;case"database":return m?(0,_.jsx)(q,{log:m}):null;case"fn_edge":return m?(0,_.jsx)(G,{log:m}):null;case"functions":return m?(0,_.jsx)(F,{log:m}):null;case"auth":return m?(0,_.jsx)(ee,{log:m}):null;default:return a&&m&&u(m)?(0,_.jsx)(U,{log:m}):a&&!m?null:n?(0,_.jsx)(z,{log:n}):null}};return(0,_.jsxs)("div",{className:["relative flex h-full flex-grow flex-col border border-l","border-panel-border-light dark:border-panel-border-dark","overflow-y-scroll bg-gray-200"].join(" "),children:[(0,_.jsx)("div",{className:"absolute flex\n          h-full w-full flex-col items-center justify-center gap-2 overflow-y-scroll bg-scale-200 text-center opacity-0 transition-all "+(n?"z-0 opacity-0":"z-10 opacity-100"),children:(0,_.jsxs)("div",{className:"flex\n          w-full\n          max-w-sm\n          scale-95\n          flex-col\n          items-center\n          justify-center\n          gap-6\n          text-center\n          opacity-0\n          transition-all delay-300 duration-500 "+(n||p?"mt-0 scale-95 opacity-0":"mt-8 scale-100 opacity-100"),children:[(0,_.jsxs)("div",{className:"relative flex h-4 w-32 items-center rounded border border-scale-600 px-2 dark:border-scale-400",children:[(0,_.jsx)("div",{className:"h-0.5 w-2/3 rounded-full bg-scale-600 dark:bg-scale-500"}),(0,_.jsx)("div",{className:"absolute right-1 -bottom-4",children:(0,_.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1",children:(0,_.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})})})]}),(0,_.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,_.jsx)("h3",{className:"text-sm text-scale-1200",children:"Select an Event"}),(0,_.jsx)("p",{className:"text-xs text-scale-900",children:"Select an Event to view the code snippet (pretty view) or complete JSON payload (raw view)."})]})]})}),(0,_.jsxs)("div",{className:"relative h-px flex-grow bg-scale-300",children:[(0,_.jsxs)("div",{className:"pt-4 px-4 flex flex-col gap-4",children:[(0,_.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,_.jsx)("div",{className:"transition ".concat(p?"opacity-0":"opacity-100"),children:(0,_.jsx)(Q.Z,{text:m?a?"Log ID\n".concat(m.id,"\n\nLog Timestamp (UTC)\n").concat(c(m.timestamp)?i(m.timestamp):m.timestamp,"\n\nLog Event Message\n").concat(m.event_message,"\n\nLog Metadata\n").concat(JSON.stringify(m.metadata,null,2),"\n"):JSON.stringify(m,null,2):"",type:"default",title:"Copy log to clipboard"})}),(0,_.jsx)(b.zxk,{type:"text",className:"cursor-pointer transition hover:text-scale-1200 h-8 w-8 px-0 py-0 flex items-center justify-center",onClick:s,children:(0,_.jsx)(b.kLi,{size:14,strokeWidth:2,className:"text-scale-900"})})]}),(0,_.jsx)("div",{className:"h-px w-full bg-scale-600 rounded "})]}),p&&(0,_.jsx)(K.Z,{}),(0,_.jsx)("div",{className:"flex flex-col space-y-6 bg-scale-300 py-4",children:!p&&(0,_.jsx)(x,{})})]})]})},ne=n(6687),se=[{formatter:function(e){return(0,_.jsxs)(A.VK,{children:[(0,_.jsx)(A.io,{value:e.row.timestamp}),(0,_.jsx)(A.XA,{row:e,value:e.row.status_code}),(0,_.jsx)(A.VG,{className:"w-20",value:e.row.method}),(0,_.jsx)(A.VG,{className:"w-full",value:e.row.path})]})}}],re=[{formatter:function(e){return(0,_.jsxs)(A.VK,{children:[(0,_.jsx)(A.io,{value:e.row.timestamp}),(0,_.jsx)(A.TK,{value:e.row.error_severity}),(0,_.jsx)(A.VG,{className:"w-full",value:e.row.event_message})]})}}],ae=[{formatter:function(e){return(0,_.jsxs)(A.VK,{children:[(0,_.jsx)(A.io,{value:e.row.timestamp}),(0,_.jsx)(A.VG,{className:"w-full",value:e.row.event_message})]})}}],oe=function(e){var t=e.error,n=e.isCustomQuery;return(0,_.jsxs)("div",{className:"flex flex-col gap-2 text-scale-1100",children:[(0,_.jsxs)("div",{className:"flex flex-col gap-1 text-sm",children:[(0,_.jsx)("p",{children:"This query requires too much memory to be executed."}),(0,_.jsx)("p",{children:n?"Avoid selecting entire objects and instead select specific keys using dot notation.":"Avoid querying across a large datetime range."}),!n&&(0,_.jsx)("p",{children:"Please contact support if this error persists."})]}),(0,_.jsx)(b.UQy,{className:"text-sm",justified:!1,openBehaviour:"multiple",type:"default",chevronAlign:"left",size:"small",iconPosition:"left",children:(0,_.jsx)(b.UQy.Item,{id:"1",header:"Full error message",children:(0,_.jsx)(b.IIB.TextArea,{size:"tiny",value:JSON.stringify(t,null,2),borderless:!0,className:"mt-4 w-full font-mono",copy:!0,rows:5})})})]})},le=function(e){var t=e.error;return(0,_.jsx)(b.IIB.TextArea,{size:"tiny",value:"string"===typeof t?t:JSON.stringify(t,null,2),borderless:!0,className:"mt-4 w-full font-mono",copy:!0,rows:7})},ie=[{formatter:function(e){return(0,_.jsxs)(A.VK,{children:[(0,_.jsx)(A.io,{value:e.row.timestamp}),"uncaughtException"===e.row.event_type?(0,_.jsx)(A.TK,{value:e.row.event_type,uppercase:!1}):(0,_.jsx)(A.TK,{value:e.row.level}),(0,_.jsx)(A.VG,{className:"w-full",value:e.row.event_message})]})}}],ce=[{formatter:function(e){return(0,_.jsxs)(A.VK,{children:[(0,_.jsx)(A.io,{value:e.row.timestamp}),(0,_.jsx)(A.XA,{row:e,value:e.row.status_code}),(0,_.jsx)(A.VG,{value:e.row.method}),(0,_.jsx)(A.VG,{value:e.row.id})]})}}],ue=[{formatter:function(e){var t=(0,$.dW)(e.row.event_message.trim());return(0,_.jsxs)(A.VK,{children:[(0,_.jsx)(A.io,{value:e.row.timestamp}),(null===t||void 0===t?void 0:t.level)&&(0,_.jsx)(A.TK,{value:null===t||void 0===t?void 0:t.level}),(0,_.jsx)(A.VG,{className:"w-full",value:"".concat(null!==t&&void 0!==t&&t.path?(null===t||void 0===t?void 0:t.path)+" | ":"").concat((null===t||void 0===t?void 0:t.msg.trim())||e.row.event_message)})]})}}];function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){(0,H.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=function(e){var t,n=e.data,s=void 0===n?[]:n,r=e.queryType,a=e.onHistogramToggle,o=e.isHistogramShowing,l=e.isLoading,i=(e.showDownload,e.error),c=e.projectRef,d=e.params,m=(0,j.useState)(null),p=m[0],x=m[1],f=null===s||void 0===s?void 0:s[0],h=Object.keys(s[0]||{}),v=h.includes("id"),g=h.includes("timestamp"),y=h.map((function(e,t){var n;return n=function(t){var n,s=null===(n=t.row)||void 0===n?void 0:n[e];return s&&"object"===typeof s?"[Object]":null===s?"NULL":String(s)},{key:"logs-column-".concat(t),name:e,resizable:!0,formatter:n,header:e,minWidth:128}}));if(r)switch(r){case"api":t=se;break;case"database":t=re;break;case"fn_edge":t=ce;break;case"functions":t=ie;break;case"auth":t=ue;break;default:t=f&&u(f)?ae:y}else t=y;var N=JSON.stringify(s),w=(0,j.useMemo)((function(){var e=(0,I.Z)(new Set(s));if(!v)return[e,{}];var t=e.reduce((function(e,t){return e[t.id]=t,e}),{});return[e,t]}),[N]),O=w[0],S=w[1];if((0,j.useEffect)((function(){v&&null!==s&&p&&!(p.id in S)&&x(null)}),[N]),!s)return null;var k=r?"calc(100vh - 42px - 3rem)":"calc(100vh - 42px - 10rem)",E=(0,j.useMemo)((function(){return v&&g?Object.values(S).sort((function(e,t){return t.timestamp-e.timestamp})):O}),[N]),T=function(){return(0,_.jsxs)("div",{className:"flex w-full items-center justify-between rounded-tl rounded-tr border-t border-l border-r bg-scale-100 px-5 py-2 dark:bg-scale-300",children:[(0,_.jsx)("div",{className:"flex items-center gap-2",children:s&&s.length?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("span",{className:"text-sm text-scale-1200",children:"Query results"}),(0,_.jsx)("span",{className:"text-sm text-scale-1100",children:s&&s.length})]}):(0,_.jsx)("span",{className:"text-xs text-scale-1200",children:"Results will be shown below"})}),(0,_.jsxs)("div",{className:"flex items-center gap-2",children:[a&&(0,_.jsx)(b.zxk,{type:"default",icon:o?(0,_.jsx)(b.tCy,{}):(0,_.jsx)(b.Jib,{}),onClick:a,children:"Histogram"}),(0,_.jsx)(ne.Z,{data:s,children:"Download"})]})]})};return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("section",{className:"flex w-full flex-col "+(r?"":"shadow-lg"),style:{maxHeight:k},children:[!r&&(0,_.jsx)(T,{}),(0,_.jsxs)("div",{className:"flex h-full flex-row ".concat(r?"":"border-l border-r"),children:[(0,_.jsx)(M.ZP,{style:{height:"100%"},className:"\n            flex-1 flex-grow\n            ".concat(r?" data-grid--simple-logs":"data-grid--logs-explorer","\n          "),rowHeight:40,headerRowHeight:r?0:28,onSelectedCellChange:function(e){e.idx;var t=e.rowIdx;v&&x(s[t])},noRowsFallback:l?null:(0,_.jsxs)("div",{className:"mx-auto flex h-full w-full items-center justify-center space-y-12 py-4 transition-all delay-200 duration-500",children:[!i&&(0,_.jsxs)("div",{className:"mt-16 flex scale-100 flex-col items-center justify-center gap-6 text-center opacity-100",children:[(0,_.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,_.jsx)("div",{className:"relative flex h-4 w-32 items-center rounded border border-dashed border-scale-600 px-2 dark:border-scale-900"}),(0,_.jsx)("div",{className:"relative flex h-4 w-32 items-center rounded border border-dashed border-scale-600 px-2 dark:border-scale-900",children:(0,_.jsx)("div",{className:"absolute right-1 -bottom-4 text-scale-1100",children:(0,_.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,_.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]}),(0,_.jsxs)("div",{className:"flex flex-col gap-1 px-5",children:[(0,_.jsx)("h3",{className:"text-lg text-scale-1200",children:"No results"}),(0,_.jsx)("p",{className:"text-sm text-scale-900",children:"Try another search, or adjusting the filters"})]})]}),i&&function(){var e;if(!i)return null;var t={isCustomQuery:!r,error:i},n=le;return"object"===typeof i&&null!==(e=i.error)&&void 0!==e&&e.errors.find((function(e){return"resourcesExceeded"===e.reason}))&&(n=oe),(0,_.jsx)("div",{className:"flex w-1/2 justify-center px-5",children:(0,_.jsx)(b.bZj,{variant:"danger",title:"Sorry! An error occurred when fetching data.",withIcon:!0,children:(0,_.jsx)(n,me({},t))})})}()]}),columns:t,rowClass:function(e){return e.id===(null===p||void 0===p?void 0:p.id)?"!bg-scale-400 rdg-row--focused":"cursor-pointer"},rows:E,rowKeyGetter:function(e){return v?e.id:Object.keys(e)[0]},onRowClick:function(e){return x(e)}}),E.length>0?(0,_.jsx)("div",{className:r||p?"flex w-1/2 flex-col":"hidden w-0",children:(0,_.jsx)(te,{projectRef:c,onClose:function(){return x(null)},log:p,queryType:r,params:d})}):null]})]})})},xe=n(55621);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){(0,H.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve=function(e){var t=e.data,n=e.onBarClick;if(!t)return null;var s=(0,j.useMemo)((function(){return t.map((function(e){var t=c(e.timestamp)?i(e.timestamp):o()(e.timestamp).toISOString();return he(he({},e),{},{timestamp:t,period_start:t})}))}),[JSON.stringify(t)]);return(0,_.jsx)(xe.v,{minimalHeader:!0,chartSize:"tiny",data:s,attribute:"count",label:"Logs / Time",onBarClick:function(e){var t,s;if(e&&null!==e&&void 0!==e&&null!==(t=e.activePayload)&&void 0!==t&&null!==(s=t[0])&&void 0!==s&&s.payload){var r=e.activePayload[0].payload.timestamp,a=c(r)?i(r):r;n(a)}},customDateFormat:"MMM D, HH:mm:s",noDataMessage:""})};n(20047)},55671:function(e,t,n){var s=n(90849),r=n(90089),a=(n(27378),n(24246)),o=["children","colSpan","className","style"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){var t=e.body,n=e.head,s=e.className,r=e.containerClassName,o=e.borderless,l=e.headTrClasses,i=e.bodyClassName,c=e.style,u=["table-container"];r&&u.push(r),o&&u.push("table-container--borderless");var d=["table"];return s&&d.push(s),(0,a.jsx)("div",{className:u.join(" "),children:(0,a.jsxs)("table",{className:d.join(" "),style:c,children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{className:l,children:n})}),(0,a.jsx)("tbody",{className:i,children:t})]})})}c.th=function(e){var t=e.children,n=e.className,s=e.style,r=["p-3 px-4 text-left"];return n&&r.push(n),(0,a.jsx)("th",{className:r.join(" "),style:s,children:t})},c.td=function(e){var t=e.children,n=e.colSpan,s=e.className,l=e.style,c=(0,r.Z)(e,o);return(0,a.jsx)("td",i(i({className:s,colSpan:n,style:l},c),{},{children:t}))},c.tr=function(e){var t=e.children,n=e.className,s=e.onClick,r=e.style,o=e.hoverable,l=[n];return(s||o)&&l.push("tr--link"),(0,a.jsx)("tr",{className:l.join(" "),onClick:s,style:r,children:t})},t.Z=c},6687:function(e,t,n){var s=n(88983),r=n(27378),a=n(15724),o=n(24246);t.Z=function(e){var t=e.onClick,n=e.buttonType,l=void 0===n?"default":n,i=e.icon,c=e.children,u=e.disabled,d=e.data,m=e.title,p=(0,r.useRef)(null),x=(0,r.useMemo)((function(){var e=null===d||void 0===d?void 0:d[0];if(e&&d){var t=Object.keys(e);return d.map((function(e){return t.reduce((function(t,n){return"object"===typeof e[n]?t[n]=JSON.stringify(e[n]):t[n]=String(e[n]),t}),{})}))}}),[JSON.stringify(d)]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.CSVLink,{ref:p,className:"hidden",data:x||[],filename:"supabase_logs.csv",title:m}),(0,o.jsx)(s.zxk,{type:l,icon:i||(0,o.jsx)(s.Yyj,{}),disabled:u,onClick:function(e){t&&t(e),function(){var e;null===(e=p.current)||void 0===e||e.link.click()}()},children:c})]})}},1825:function(e,t,n){var s=n(90849),r=n(90089),a=n(88983),o=n(98574),l=n(27378),i=n(24246),c=["text","children","onClick","bounceIconOnCopy"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.text,n=e.children,s=e.onClick,u=e.bounceIconOnCopy,m=(0,r.Z)(e,c),p=(0,l.useState)(!1),x=p[0],f=p[1];return(0,l.useEffect)((function(){if(x){var e=setTimeout((function(){return f(!1)}),2e3);return function(){return clearTimeout(e)}}}),[x]),(0,i.jsx)(a.zxk,d(d({onClick:function(e){f(!0),(0,o.vQ)(t),null===s||void 0===s||s(e)},icon:(0,i.jsx)(a.Rx8,{size:"tiny",className:[x&&u?"animate-bounce":"","transition"].join(" ")})},m),{},{children:null!==n&&void 0!==n?n:x?"Copied":"Copy"}))}}}]);
//# sourceMappingURL=9099-21c6503c4648bf6b.js.map