"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6778],{28221:function(e,t,i){i.d(t,{Z:function(){return n}});var n=new RegExp("(".concat(/^((ftp|http|https):\/\/)?(www.)?(?!.*(ftp|http|https|www.))[a-zA-Z0-9_*-]+(\.[a-zA-Z0-9_*-]+)+((\/)[\w#]+)*(\/\w+\?[a-zA-Z0-9_]+=\w+(&[a-zA-Z0-9_]+=\w+)*)+(?:\.[a-z]+)*(?::\d+)?(?![^<]*(?:<\/\w+>|\/?>))(.*)?\/?(.)*?$/gm.source,")|(").concat(/^(?:^|\s)((https?:\/\/)?(?:localhost|[\w-]+(?:\.[\w-]+)+)(:\d+)?(\/\S*)?)/i.source,")|(").concat(/^[a-z0-9]+([.][a-z0-9]+)*:\/(\/[-a-z0-9._~!$&'()*+,;=:@%]+)+(?:\.[a-z]+)*(?::\d+)?(?![^<]*(?:<\/\w+>|\/?>))(.*)?\/?(.)*?$/i.source,")|(").concat(/chrome-extension:\/\/([a-zA-Z]*)/gm.source,")"),"i")},83015:function(e,t,i){i.d(t,{dU:function(){return j},Lh:function(){return C},uW:function(){return U},m9:function(){return F},Q:function(){return le}});var n=i(44285),r=i(25229),s=i(42791),o=i(14633),a=i(28221),l="http://json-schema.org/draft-07/schema#",c=[{$schema:l,type:"object",title:"Email",properties:{EXTERNAL_EMAIL_ENABLED:{title:"Enable Email provider",description:"This will enable Email based signup and login for your application",type:"boolean"},MAILER_AUTOCONFIRM:{title:"Confirm email",description:"Users will need to confirm their email address before signing in for the first time.",type:"boolean"},MAILER_SECURE_EMAIL_CHANGE_ENABLED:{title:"Secure email change",description:"Users will be required to confirm any email change on both the old email address and new email address.\n      If disabled, only the new email is required to confirm.",type:"boolean"},MAILER_OTP_EXP:{title:"Mailer OTP Expiration",type:"number",description:"Duration before an email otp / link expires.",units:"seconds"},PASSWORD_MIN_LENGTH:{title:"Min password length",description:"Users will not be able to use a password shorter than this.",type:"number"}},validationSchema:(0,o.object)().shape({PASSWORD_MIN_LENGTH:(0,o.number)().required("A password is required.").min(6,"Password length must be at least 6 characters long"),MAILER_OTP_EXP:(0,o.number)().min(0,"Must be more than 0").max(86400,"Must be no more than 86400").required("This is required")}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},{$schema:l,type:"object",title:"Phone",properties:{EXTERNAL_PHONE_ENABLED:{title:"Enable Phone provider",description:"This will enable phone based login for your application",type:"boolean"},SMS_PROVIDER:{type:"select",title:"SMS provider",description:"External provider that will handle sending SMS messages",enum:[{label:"Twilio",value:"twilio",icon:"twilio-icon.svg"},{label:"Messagebird",value:"messagebird",icon:"messagebird-icon.svg"},{label:"Textlocal",value:"textlocal",icon:"textlocal-icon.png"},{label:"Vonage",value:"vonage",icon:"vonage-icon.svg"}]},RATE_LIMIT_SMS_SENT:{type:"number",title:"Rate limit for sending SMS messages",description:"How many SMS messages can be sent per hour"},SMS_TWILIO_ACCOUNT_SID:{type:"string",title:"Twilio Account Sid",show:{key:"SMS_PROVIDER",matches:"twilio"}},SMS_TWILIO_AUTH_TOKEN:{type:"string",title:"Twilio Auth Token",isSecret:!0,show:{key:"SMS_PROVIDER",matches:"twilio"}},SMS_TWILIO_MESSAGE_SERVICE_SID:{type:"string",title:"Twilio Message Service Sid",show:{key:"SMS_PROVIDER",matches:"twilio"}},SMS_MESSAGEBIRD_ACCESS_KEY:{type:"string",title:"Messagebird Access Key",show:{key:"SMS_PROVIDER",matches:"messagebird"}},SMS_MESSAGEBIRD_ORIGINATOR:{type:"string",title:"Messagebird Originator",show:{key:"SMS_PROVIDER",matches:"messagebird"}},SMS_TEXTLOCAL_API_KEY:{type:"string",title:"Textlocal API Key",show:{key:"SMS_PROVIDER",matches:"textlocal"}},SMS_TEXTLOCAL_SENDER:{type:"string",title:"Textlocal Sender",show:{key:"SMS_PROVIDER",matches:"textlocal"}},SMS_VONAGE_API_KEY:{type:"string",title:"Vonage API Key",show:{key:"SMS_PROVIDER",matches:"vonage"}},SMS_VONAGE_API_SECRET:{type:"string",title:"Vonage API Secret",show:{key:"SMS_PROVIDER",matches:"vonage"}},SMS_VONAGE_FROM:{type:"string",title:"Vonage From",show:{key:"SMS_PROVIDER",matches:"vonage"}},SMS_AUTOCONFIRM:{title:"Enable phone confirmations",type:"boolean",description:"Users will need to confirm their phone number before signing in."},SMS_OTP_EXP:{title:"SMS OTP Expiry",type:"number",description:"Duration before an SMS OTP expires",units:"seconds"},SMS_OTP_LENGTH:{title:"SMS OTP Length",type:"number",description:"Number of digits in OTP",units:"digits"},SMS_TEMPLATE:{title:"SMS Message",type:"string",description:"To format the OPT code use `{{ .Code }}`"}},validationSchema:(0,o.object)().shape({EXTERNAL_PHONE_ENABLED:(0,o.boolean)().required(),SMS_PROVIDER:(0,o.string)().required(),SMS_TWILIO_ACCOUNT_SID:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"twilio"===t},then:function(e){return e.required("Twilio Account SID is required")},otherwise:function(e){return e}}),SMS_TWILIO_AUTH_TOKEN:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"twilio"===t},then:function(e){return e.required("Twilio Auth Token is required")},otherwise:function(e){return e}}),SMS_TWILIO_MESSAGE_SERVICE_SID:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"twilio"===t},then:function(e){return e.required("Twilio Message Service SID is required")},otherwise:function(e){return e}}),SMS_MESSAGEBIRD_ACCESS_KEY:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"messagebird"===t},then:function(e){return e.required("Messagebird Access Key is required")},otherwise:function(e){return e}}),SMS_MESSAGEBIRD_ORIGINATOR:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"messagebird"===t},then:function(e){return e.required("Messagebird Originator is required")},otherwise:function(e){return e}}),SMS_TEXTLOCAL_API_KEY:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"textlocal"===t},then:function(e){return e.required("Textlocal API Key is required")},otherwise:function(e){return e}}),SMS_TEXTLOCAL_SENDER:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"textlocal"===t},then:function(e){return e.required("Textlocal Sender is required")},otherwise:function(e){return e}}),SMS_VONAGE_API_KEY:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"vonage"===t},then:function(e){return e.required("Vonage API is required")},otherwise:function(e){return e}}),SMS_VONAGE_API_SECRET:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"vonage"===t},then:function(e){return e.required("Vonage API Secret is required")},otherwise:function(e){return e}}),SMS_VONAGE_FROM:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"vonage"===t},then:function(e){return e.required("Vonage From is required")},otherwise:function(e){return e}}),SMS_OTP_EXP:(0,o.number)().min(0,"Must be more than 0").required("This is required"),SMS_OTP_LENGTH:(0,o.number)().min(6,"Must be 6 or more in length").required("This is required"),SMS_TEMPLATE:(0,o.string)().required("SMS template is required.")}),misc:{iconKey:"phone-icon4",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},{$schema:l,type:"object",title:"Apple",properties:{EXTERNAL_APPLE_ENABLED:{title:"Enable Apple provider",description:"This will enable Apple login for your application",type:"boolean"},EXTERNAL_APPLE_CLIENT_ID:{title:"Services ID",description:"\nClient identifier when authenticating or validating users.\n[learn more](https://developer.apple.com/documentation/sign_in_with_apple/configuring_your_environment_for_sign_in_with_apple)",type:"string"},EXTERNAL_APPLE_SECRET:{title:"Secret key",description:"\nThe secret key is a JWT token that must be generated.\n[Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#generate-a-client_secret)",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_APPLE_ENABLED:(0,o.boolean)().required(),EXTERNAL_APPLE_CLIENT_ID:(0,o.string)().when("EXTERNAL_APPLE_ENABLED",{is:!0,then:function(e){return e.required("Services ID is required")},otherwise:function(e){return e}}),EXTERNAL_APPLE_SECRET:(0,o.string)().when("EXTERNAL_APPLE_ENABLED",{is:!0,then:function(e){return e.required("Secret key is required")},otherwise:function(e){return e}})}),misc:{iconKey:"apple-icon",requiresRedirect:!0,helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)",alert:{title:"Apple secrets will self expire every 6 months",description:"You will need to regenerate before the 6 months elapses otherwise your users using Apple Login will no longer be able to log back in."}}},{$schema:l,type:"object",title:"Azure",properties:{EXTERNAL_AZURE_ENABLED:{title:"Azure enabled",type:"boolean"},EXTERNAL_AZURE_CLIENT_ID:{title:"Application (client) ID",type:"string"},EXTERNAL_AZURE_SECRET:{title:"Secret Value",description:"Enter the data from Value, not the Secret ID. [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-azure#obtain-a-secret-id)",type:"string",isSecret:!0},EXTERNAL_AZURE_URL:{title:"Azure Tenant URL",descriptionOptional:"Optional",type:"string"}},validationSchema:(0,o.object)().shape({EXTERNAL_AZURE_ENABLED:(0,o.boolean)().required(),EXTERNAL_AZURE_CLIENT_ID:(0,o.string)().when("EXTERNAL_AZURE_ENABLED",{is:!0,then:function(e){return e.required("Application (client) ID is required")},otherwise:function(e){return e}}),EXTERNAL_AZURE_SECRET:(0,o.string)().when("EXTERNAL_AZURE_ENABLED",{is:!0,then:function(e){return e.required("Secret ID is required")},otherwise:function(e){return e}}),EXTERNAL_AZURE_URL:(0,o.string)().matches(a.Z,"Must be a valid URL").optional()}),misc:{iconKey:"microsoft-icon",requiresRedirect:!0}},{$schema:l,type:"object",title:"Bitbucket",properties:{EXTERNAL_BITBUCKET_ENABLED:{title:"Bitbucket enabled",type:"boolean"},EXTERNAL_BITBUCKET_CLIENT_ID:{title:"Key",type:"string"},EXTERNAL_BITBUCKET_SECRET:{title:"Secret",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_BITBUCKET_ENABLED:(0,o.boolean)().required(),EXTERNAL_BITBUCKET_CLIENT_ID:(0,o.string)().when("EXTERNAL_BITBUCKET_ENABLED",{is:!0,then:function(e){return e.required("Key is required")},otherwise:function(e){return e}}),EXTERNAL_BITBUCKET_SECRET:(0,o.string)().when("EXTERNAL_BITBUCKET_ENABLED",{is:!0,then:function(e){return e.required("Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"bitbucket-icon",requiresRedirect:!0}},{$schema:l,type:"object",title:"Discord",properties:{EXTERNAL_DISCORD_ENABLED:{title:"Discord enabled",type:"boolean"},EXTERNAL_DISCORD_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_DISCORD_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_DISCORD_ENABLED:(0,o.boolean)().required(),EXTERNAL_DISCORD_CLIENT_ID:(0,o.string)().when("EXTERNAL_DISCORD_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_DISCORD_SECRET:(0,o.string)().when("EXTERNAL_DISCORD_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"discord-icon",requiresRedirect:!0}},{$schema:l,type:"object",title:"Facebook",properties:{EXTERNAL_FACEBOOK_ENABLED:{title:"Facebook enabled",type:"boolean"},EXTERNAL_FACEBOOK_CLIENT_ID:{title:"Facebook client ID",type:"string"},EXTERNAL_FACEBOOK_SECRET:{title:"Facebook secret",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_FACEBOOK_ENABLED:(0,o.boolean)().required(),EXTERNAL_FACEBOOK_CLIENT_ID:(0,o.string)().when("EXTERNAL_FACEBOOK_ENABLED",{is:!0,then:function(e){return e.required('"Facebook client ID" is required')},otherwise:function(e){return e}}),EXTERNAL_FACEBOOK_SECRET:(0,o.string)().when("EXTERNAL_FACEBOOK_ENABLED",{is:!0,then:function(e){return e.required('"Facebook secret" is required')},otherwise:function(e){return e}})}),misc:{iconKey:"facebook-icon",requiresRedirect:!0}},{$schema:l,type:"object",title:"GitHub",properties:{EXTERNAL_GITHUB_ENABLED:{title:"GitHub enabled",type:"boolean"},EXTERNAL_GITHUB_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_GITHUB_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_GITHUB_ENABLED:(0,o.boolean)().required(),EXTERNAL_GITHUB_CLIENT_ID:(0,o.string)().when("EXTERNAL_GITHUB_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_GITHUB_SECRET:(0,o.string)().when("EXTERNAL_GITHUB_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"github-icon",requiresRedirect:!0}},{$schema:l,type:"object",title:"GitLab",properties:{EXTERNAL_GITLAB_ENABLED:{title:"GitLab enabled",type:"boolean"},EXTERNAL_GITLAB_CLIENT_ID:{title:"Application ID",type:"string"},EXTERNAL_GITLAB_SECRET:{title:"Secret",type:"string",isSecret:!0},EXTERNAL_GITLAB_URL:{title:"Self Hosted GitLab URL",descriptionOptional:"Optional",type:"string"}},validationSchema:(0,o.object)().shape({EXTERNAL_GITLAB_ENABLED:(0,o.boolean)().required(),EXTERNAL_GITLAB_CLIENT_ID:(0,o.string)().when("EXTERNAL_GITLAB_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_GITLAB_SECRET:(0,o.string)().when("EXTERNAL_GITLAB_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}}),EXTERNAL_GITLAB_URL:(0,o.string)().matches(a.Z,"Must be a valid URL").optional()}),misc:{iconKey:"gitlab-icon",requiresRedirect:!0}},{$schema:l,type:"object",title:"Google",properties:{EXTERNAL_GOOGLE_ENABLED:{title:"Google enabled",type:"boolean"},EXTERNAL_GOOGLE_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_GOOGLE_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_GOOGLE_ENABLED:(0,o.boolean)().required(),EXTERNAL_GOOGLE_CLIENT_ID:(0,o.string)().when("EXTERNAL_GOOGLE_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_GOOGLE_SECRET:(0,o.string)().when("EXTERNAL_GOOGLE_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"google-icon",requiresRedirect:!0}},{$schema:l,type:"object",title:"KeyCloak",properties:{EXTERNAL_KEYCLOAK_ENABLED:{title:"Keycloak enabled",type:"boolean"},EXTERNAL_KEYCLOAK_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_KEYCLOAK_SECRET:{title:"Secret",type:"string",isSecret:!0},EXTERNAL_KEYCLOAK_URL:{title:"Realm URL",description:"",type:"string"}},validationSchema:(0,o.object)().shape({EXTERNAL_KEYCLOAK_ENABLED:(0,o.boolean)().required(),EXTERNAL_KEYCLOAK_CLIENT_ID:(0,o.string)().when("EXTERNAL_KEYCLOAK_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_KEYCLOAK_SECRET:(0,o.string)().when("EXTERNAL_KEYCLOAK_ENABLED",{is:!0,then:function(e){return e.required("Client secret is required")},otherwise:function(e){return e}}),EXTERNAL_KEYCLOAK_URL:(0,o.string)().when("EXTERNAL_KEYCLOAK_ENABLED",{is:!0,then:function(e){return e.matches(a.Z,"Must be a valid URL").required("Realm URL is required")},otherwise:function(e){return e.matches(a.Z,"Must be a valid URL")}})}),misc:{iconKey:"keycloak-icon",requiresRedirect:!0}},{$schema:l,type:"object",title:"LinkedIn",properties:{EXTERNAL_LINKEDIN_ENABLED:{title:"Linkedin enabled",type:"boolean"},EXTERNAL_LINKEDIN_CLIENT_ID:{title:"API Key",type:"string"},EXTERNAL_LINKEDIN_SECRET:{title:"API Secret Key",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_LINKEDIN_ENABLED:(0,o.boolean)().required(),EXTERNAL_LINKEDIN_CLIENT_ID:(0,o.string)().when("EXTERNAL_LINKEDIN_ENABLED",{is:!0,then:function(e){return e.required("API Key is required")},otherwise:function(e){return e}}),EXTERNAL_LINKEDIN_SECRET:(0,o.string)().when("EXTERNAL_LINKEDIN_ENABLED",{is:!0,then:function(e){return e.required("API Secret Key is required")},otherwise:function(e){return e}})}),misc:{iconKey:"linkedin-icon",requiresRedirect:!0}},{$schema:l,type:"object",title:"Notion",properties:{EXTERNAL_NOTION_ENABLED:{title:"Notion enabled",type:"boolean"},EXTERNAL_NOTION_CLIENT_ID:{title:"OAuth client ID",type:"string"},EXTERNAL_NOTION_SECRET:{title:"OAuth client secret",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_NOTION_ENABLED:(0,o.boolean)().required(),EXTERNAL_NOTION_CLIENT_ID:(0,o.string)().when("EXTERNAL_NOTION_ENABLED",{is:!0,then:function(e){return e.required("OAuth client ID is required")},otherwise:function(e){return e}}),EXTERNAL_NOTION_SECRET:(0,o.string)().when("EXTERNAL_NOTION_ENABLED",{is:!0,then:function(e){return e.required("OAuth client secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"notion-icon",requiresRedirect:!0}},{$schema:l,type:"object",title:"Twitch",properties:{EXTERNAL_TWITCH_ENABLED:{title:"Twitch enabled",type:"boolean"},EXTERNAL_TWITCH_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_TWITCH_SECRET:{title:"Client secret",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_TWITCH_ENABLED:(0,o.boolean)().required(),EXTERNAL_TWITCH_CLIENT_ID:(0,o.string)().when("EXTERNAL_TWITCH_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_TWITCH_SECRET:(0,o.string)().when("EXTERNAL_TWITCH_ENABLED",{is:!0,then:function(e){return e.required("Client secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"twitch-icon",requiresRedirect:!0}},{$schema:l,type:"object",title:"Twitter",properties:{EXTERNAL_TWITTER_ENABLED:{title:"Twitter enabled",type:"boolean"},EXTERNAL_TWITTER_CLIENT_ID:{title:"API Key",type:"string"},EXTERNAL_TWITTER_SECRET:{title:"API Secret Key",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_TWITTER_ENABLED:(0,o.boolean)().required(),EXTERNAL_TWITTER_CLIENT_ID:(0,o.string)().when("EXTERNAL_TWITTER_ENABLED",{is:!0,then:function(e){return e.required("API Key is required")},otherwise:function(e){return e}}),EXTERNAL_TWITTER_SECRET:(0,o.string)().when("EXTERNAL_TWITTER_ENABLED",{is:!0,then:function(e){return e.required("API Secret Key is required")},otherwise:function(e){return e}})}),misc:{iconKey:"twitter-icon",requiresRedirect:!0}},{$schema:l,type:"object",title:"Slack",properties:{EXTERNAL_SLACK_ENABLED:{title:"Slack enabled",type:"boolean"},EXTERNAL_SLACK_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_SLACK_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_SLACK_ENABLED:(0,o.boolean)().required(),EXTERNAL_SLACK_CLIENT_ID:(0,o.string)().when("EXTERNAL_SLACK_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_SLACK_SECRET:(0,o.string)().when("EXTERNAL_SLACK_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"slack-icon",requiresRedirect:!0}},{$schema:l,type:"object",title:"Spotify",properties:{EXTERNAL_SPOTIFY_ENABLED:{title:"Spotify enabled",type:"boolean"},EXTERNAL_SPOTIFY_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_SPOTIFY_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_SPOTIFY_ENABLED:(0,o.boolean)().required(),EXTERNAL_SPOTIFY_CLIENT_ID:(0,o.string)().when("EXTERNAL_SPOTIFY_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_SPOTIFY_SECRET:(0,o.string)().when("EXTERNAL_SPOTIFY_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"spotify-icon",requiresRedirect:!0}},{$schema:l,type:"object",title:"WorkOS",properties:{EXTERNAL_WORKOS_ENABLED:{title:"WorkOS enabled",type:"boolean"},EXTERNAL_WORKOS_URL:{title:"WorkOS URL",type:"string"},EXTERNAL_WORKOS_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_WORKOS_SECRET:{title:"Secret Key",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_WORKOS_ENABLED:(0,o.boolean)().required(),EXTERNAL_WORKOS_URL:(0,o.string)().matches(a.Z,"Must be a valid URL").when("EXTERNAL_WORKOS_ENABLED",{is:!0,then:function(e){return e.required("WorkOS URL is required")},otherwise:function(e){return e}}),EXTERNAL_WORKOS_CLIENT_ID:(0,o.string)().when("EXTERNAL_WORKOS_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_WORKOS_SECRET:(0,o.string)().when("EXTERNAL_WORKOS_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"workos-icon",requiresRedirect:!0}},{$schema:l,type:"object",title:"Zoom",properties:{EXTERNAL_ZOOM_ENABLED:{title:"Zoom enabled",type:"boolean"},EXTERNAL_ZOOM_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_ZOOM_SECRET:{title:"Client secret",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_ZOOM_ENABLED:(0,o.boolean)().required(),EXTERNAL_ZOOM_CLIENT_ID:(0,o.string)().when("EXTERNAL_ZOOM_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_ZOOM_SECRET:(0,o.string)().when("EXTERNAL_ZOOM_ENABLED",{is:!0,then:function(e){return e.required("Client secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"zoom-icon",requiresRedirect:!0}}],u="http://json-schema.org/draft-07/schema#",d=[{$schema:u,id:"CONFIRMATION",type:"object",title:"Confirm signup",properties:{MAILER_SUBJECTS_CONFIRMATION:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_CONFIRMATION_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL to confirm the message\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n"}},validationSchema:(0,o.object)().shape({MAILER_SUBJECTS_CONFIRMATION:(0,o.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},{$schema:u,id:"INVITE",type:"object",title:"Invite user",properties:{MAILER_SUBJECTS_INVITE:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_INVITE_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL to confirm the message\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n"}},validationSchema:(0,o.object)().shape({MAILER_SUBJECTS_INVITE:(0,o.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},{$schema:u,id:"MAGIC_LINK",type:"object",title:"Magic Link",properties:{MAILER_SUBJECTS_MAGIC_LINK:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_MAGIC_LINK_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL to confirm the message\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n"}},validationSchema:(0,o.object)().shape({MAILER_SUBJECTS_MAGIC_LINK:(0,o.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},{$schema:u,id:"EMAIL_CHANGE",type:"object",title:"Change Email Address",properties:{MAILER_SUBJECTS_EMAIL_CHANGE:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_EMAIL_CHANGE_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL to confirm the email change\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n"}},validationSchema:(0,o.object)().shape({MAILER_SUBJECTS_EMAIL_CHANGE:(0,o.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},{$schema:u,id:"RECOVERY",type:"object",title:"Reset Password",properties:{MAILER_SUBJECTS_RECOVERY:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_RECOVERY_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL to confirm the password reset\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n"}},validationSchema:(0,o.object)().shape({MAILER_SUBJECTS_RECOVERY:(0,o.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}}],E=i(33003),h=i(17871),p=i(90849),m=i(55732),_=i(34707),f=i.n(_),T=i(27378),N=i(87190),g=i(24532),S=i(68043),b=i(88983),A=["bg-scale-100 dark:bg-scale-300 ","hover:bg-scale-200 dark:hover:bg-scale-500","data-open:bg-scale-200 dark:data-open:bg-scale-500 ","border-scale-300 ","dark:border-scale-500 hover:border-scale-500 ","dark:hover:border-scale-700 data-open:border-scale-700","data-open:pb-px col-span-12 mx-auto","-space-y-px overflow-hidden","border shadow","transition","first:rounded-tl","first:rounded-tr","last:rounded-bl","last:rounded-br","hover:z-50"],R=i(24246),L=function(e){var t=e.name,i=e.properties,n=e.formValues,r=e.disabled,s=void 0!==r&&r;if(i.show&&n[i.show.key]!==i.show.matches)return(0,R.jsx)(R.Fragment,{});var o=(0,T.useState)(!!i.isSecret),a=o[0],l=o[1];switch(i.type){case"string":return(0,R.jsx)(b.IIB,{size:"small",layout:"vertical",id:t,name:t,disabled:s,type:a?"password":"text",label:i.title,labelOptional:i.descriptionOptional?(0,R.jsx)(N.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.descriptionOptional}):null,descriptionText:i.description?(0,R.jsx)(N.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.description}):null,actions:i.isSecret?(0,R.jsx)(b.zxk,{icon:a?(0,R.jsx)(b.tCy,{}):(0,R.jsx)(b.Jib,{}),type:"default",onClick:function(){return l(!a)}}):(0,R.jsx)("span",{className:"mr-3 text-scale-900",children:i.units?(0,R.jsx)(N.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.units}):null})});case"number":return(0,R.jsx)(b.RnZ,{size:"small",layout:"vertical",id:t,name:t,disabled:s,label:i.title,labelOptional:i.descriptionOptional?(0,R.jsx)(N.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.descriptionOptional}):null,descriptionText:i.description?(0,R.jsx)(N.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.description}):null,actions:(0,R.jsx)("span",{className:"mr-3 text-scale-900",children:i.units?(0,R.jsx)(N.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.units}):null})});case"boolean":return(0,R.jsx)(b.ZDl,{size:"small",id:t,name:t,disabled:s,label:i.title,descriptionText:i.description});case"select":return(0,R.jsx)(b.RiT,{size:"small",name:t,disabled:s,label:i.title,descriptionText:i.description,defaultValue:i.enum[0],children:i.enum.map((function(e){return(0,R.jsx)(b.RiT.Option,{id:e.value,label:e.label,value:e.value,addOnBefore:function(){return(0,R.jsx)("img",{className:"h-6 w-6",src:"/img/icons/".concat(e.icon)})},children:e.label},e.value)}))})}return(0,R.jsx)(R.Fragment,{})};function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function y(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,p.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var v=function(e){var t,i=e.provider,n=(0,T.useState)(!1),r=n[0],o=n[1],a=(0,s.oR)(),l=a.authConfig,c=a.ui,u=["MAILER_AUTOCONFIRM","SMS_AUTOCONFIRM"],d=(0,s.FH)(S.KA.UPDATE,"custom_config_gotrue"),E=l.config["EXTERNAL_".concat(null===i||void 0===i||null===(t=i.title)||void 0===t?void 0:t.toUpperCase(),"_ENABLED")],h=function(){var e={};return Object.keys(i.properties).forEach((function(t){var i,n=u.includes(t);e[t]=n?!l.config[t]:null!==(i=l.config[t])&&void 0!==i?i:""})),e}(),p=function(){var e=(0,m.Z)(f().mark((function e(t,i){var n,r,s,a,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.setSubmitting,r=i.resetForm,s=y({},t),Object.keys(t).map((function(e){u.includes(e)&&(s[e]=!t[e])})),e.next=5,l.update(s);case 5:a=e.sent,(d=a.error)?c.setNotification({error:d,category:"error",message:"Failed to update settings:  ".concat(null===d||void 0===d?void 0:d.message)}):(r({values:y({},t),initialValues:y({},t)}),o(!1),c.setNotification({category:"success",message:"Successfully updated settings"})),n(!1);case 9:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}();return(0,R.jsxs)(b.zF9,{open:r,onOpenChange:o,className:A.join(" "),children:[(0,R.jsx)(b.zF9.Trigger,{asChild:!0,children:(0,R.jsxs)("button",{type:"button",className:"group flex w-full items-center justify-between rounded py-3 px-6 text-scale-1200",children:[(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[(0,R.jsx)(b.y_Q,{className:"text-scale-800 transition data-open-parent:rotate-0 data-closed-parent:rotate-180",strokeWidth:2,width:14}),(0,R.jsx)("img",{src:"/img/icons/".concat(i.misc.iconKey,".svg"),width:18,alt:"".concat(i.title," auth icon")}),(0,R.jsx)("span",{className:"text-sm",children:i.title})]}),(0,R.jsx)("div",{className:"flex items-center gap-3",children:E?(0,R.jsxs)("div",{className:"flex items-center gap-1 rounded-full border border-brand-700 bg-brand-200 py-1 px-1 text-xs text-brand-900",children:[(0,R.jsx)("span",{className:"rounded-full bg-brand-900 p-0.5 text-xs text-brand-200",children:(0,R.jsx)(b.NOm,{strokeWidth:2,size:12})}),(0,R.jsx)("span",{className:"px-1",children:"Enabled"})]}):(0,R.jsx)("div",{className:"rounded-md border border-scale-500 bg-scale-100 py-1 px-3 text-xs text-scale-900 dark:border-scale-700 dark:bg-scale-300",children:"Disabled"})})]})}),(0,R.jsx)(b.l09,{name:"provider-".concat(i.title,"-form"),initialValues:h,validationSchema:i.validationSchema,onSubmit:p,children:function(e){var t,n=e.isSubmitting,r=e.handleReset,s=e.initialValues,a=e.values,l=JSON.stringify(s)===JSON.stringify(a);return(0,R.jsx)(b.zF9.Content,{children:(0,R.jsx)("div",{className:" group border-t border-scale-500 bg-scale-100 py-6 px-6 text-scale-1200 dark:bg-scale-300 ",children:(0,R.jsxs)("div",{className:"mx-auto my-6 max-w-lg space-y-6",children:[Object.keys(i.properties).map((function(e){return(0,R.jsx)(L,{name:e,properties:i.properties[e],formValues:a,disabled:!d},e)})),(null===i||void 0===i||null===(t=i.misc)||void 0===t?void 0:t.alert)&&(0,R.jsx)(b.bZj,{title:i.misc.alert.title,variant:"warning",withIcon:!0,children:(0,R.jsx)(N.D,{children:i.misc.alert.description})}),i.misc.requiresRedirect&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(N.D,{className:"text-xs text-scale-900",children:i.misc.helper}),(0,R.jsx)(b.IIB,{copy:!0,readOnly:!0,disabled:!0,label:"Redirect URL",value:"https://".concat(c.selectedProjectRef,".supabase.co/auth/v1/callback")})]}),(0,R.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,R.jsx)(b.zxk,{type:"default",htmlType:"reset",onClick:function(){r(),o(!1)},disabled:n,children:"Cancel"}),(0,R.jsxs)(g.fC,{delayDuration:0,children:[(0,R.jsx)(g.xz,{type:"button",children:(0,R.jsx)(b.zxk,{htmlType:"submit",loading:n,disabled:!d||l,children:"Save"})}),!d&&(0,R.jsxs)(g.VY,{side:"bottom",children:[(0,R.jsx)(g.Eh,{className:"radix-tooltip-arrow"}),(0,R.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,R.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to update provider settings"})})]})]})]})]})})})}})]})},j=(0,r.Pi)((function(){var e=(0,s.oR)().authConfig,t=c;return(0,R.jsxs)("div",{children:[(0,R.jsx)(E.ph,{title:"Auth Providers",description:"Authenticate your users through a suite of providers and login methods"}),(0,R.jsx)("div",{className:"-space-y-px",children:e.isLoaded?t.map((function(e){return(0,R.jsx)(v,{provider:e},"provider_".concat(e.title))})):t.map((function(e){return(0,R.jsx)("div",{className:[].concat((0,n.Z)(A),["px-6 py-3"]).join(" "),children:(0,R.jsx)(h.p,{})},"provider_".concat(e.title))}))})]})}));function I(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function O(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?I(Object(i),!0).forEach((function(t){(0,p.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):I(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var w=(0,r.Pi)((function(){var e=(0,s.oR)(),t=e.authConfig,i=e.ui,n=t.isLoaded,r="auth-config-general-form",a=(0,T.useState)(!0),l=a[0],c=a[1],u=(0,s.FH)(S.KA.UPDATE,"custom_config_gotrue"),d={DISABLE_SIGNUP:!t.config.DISABLE_SIGNUP,SITE_URL:t.config.SITE_URL,JWT_EXP:t.config.JWT_EXP,REFRESH_TOKEN_ROTATION_ENABLED:t.config.REFRESH_TOKEN_ROTATION_ENABLED||!1,SECURITY_REFRESH_TOKEN_REUSE_INTERVAL:t.config.SECURITY_REFRESH_TOKEN_REUSE_INTERVAL,SECURITY_CAPTCHA_ENABLED:t.config.SECURITY_CAPTCHA_ENABLED||!1,SECURITY_CAPTCHA_SECRET:t.config.SECURITY_CAPTCHA_SECRET||"",MAX_ENROLLED_FACTORS:t.config.MAX_ENROLLED_FACTORS},h=(0,o.object)({DISABLE_SIGNUP:(0,o.boolean)().required(),SITE_URL:(0,o.string)().required("Must have a Site URL"),JWT_EXP:(0,o.number)().max(604800,"Must be less than 604800").required("Must have a JWT expiry value"),REFRESH_TOKEN_ROTATION_ENABLED:(0,o.boolean)().required(),SECURITY_REFRESH_TOKEN_REUSE_INTERVAL:(0,o.number)().min(0,"Must be a value more than 0").required("Must have a Reuse Interval value"),SECURITY_CAPTCHA_ENABLED:(0,o.boolean)().required(),SECURITY_CAPTCHA_SECRET:(0,o.string)().when("SECURITY_CAPTCHA_ENABLED",{is:!0,then:(0,o.string)().required("Must have a hCaptcha secret")}),MAX_ENROLLED_FACTORS:(0,o.number)().min(0,"Must be be a value more than 0").max(30,"Must be a value less than 30")}),p=function(){var e=(0,m.Z)(f().mark((function e(n,r){var s,o,a,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.setSubmitting,o=r.resetForm,(a=O({},n)).DISABLE_SIGNUP=!n.DISABLE_SIGNUP,a.SECURITY_CAPTCHA_PROVIDER="hcaptcha",s(!0),e.next=7,t.update(a);case 7:l=e.sent,l.error?i.setNotification({category:"error",message:"Failed to update settings"}):(i.setNotification({category:"success",message:"Successfully updated settings"}),o({values:n,initialValues:n})),s(!1);case 11:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}();return(0,R.jsx)(b.l09,{id:r,initialValues:d,onSubmit:p,validationSchema:h,children:function(e){var i=e.isSubmitting,s=e.handleReset,o=e.resetForm,a=e.values,h=e.initialValues,p=JSON.stringify(a)!==JSON.stringify(h);return(0,T.useEffect)((function(){o({values:d,initialValues:d})}),[t.isLoaded]),(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(E.ph,{title:"Auth settings",description:"Configure authentication sessions for your users"}),(0,R.jsxs)(E.by,{disabled:!0,footer:(0,R.jsx)("div",{className:"flex py-4 px-8",children:(0,R.jsx)(E.iN,{form:r,isSubmitting:i,hasChanges:p,handleReset:s,disabled:!u,helper:u?void 0:"You need additional permissions to update authentication settings"})}),children:[(0,R.jsx)(E.hj,{header:(0,R.jsx)(E.S0,{children:"User Signups"}),children:(0,R.jsx)(E.B4,{loading:!n,children:(0,R.jsx)(b.ZDl,{id:"DISABLE_SIGNUP",size:"small",label:"Allow new users to sign up",layout:"flex",descriptionText:"If this is disabled, new users will not be able to sign up to your application.",disabled:!u})})}),(0,R.jsx)("div",{className:"border-t border-scale-400"}),(0,R.jsx)(E.hj,{header:(0,R.jsx)(E.S0,{children:"User Sessions"}),children:(0,R.jsx)(E.B4,{loading:!n,children:(0,R.jsx)(b.RnZ,{id:"JWT_EXP",size:"small",label:"JWT expiry limit",descriptionText:"How long tokens are valid for. Defaults to 3600 (1 hour), maximum 604,800 seconds (one week).",actions:(0,R.jsx)("span",{className:"mr-3 text-scale-900",children:"seconds"}),disabled:!u})})}),(0,R.jsx)(E.hj,{header:(0,R.jsx)(E.S0,{children:"Security and Protection"}),children:(0,R.jsxs)(E.B4,{loading:!n,children:[(0,R.jsx)(b.ZDl,{id:"SECURITY_CAPTCHA_ENABLED",size:"small",label:"Enable hCaptcha protection",layout:"flex",descriptionText:"Protect authentication endpoints from abuse.",disabled:!u}),a.SECURITY_CAPTCHA_ENABLED&&(0,R.jsx)(b.IIB,{id:"SECURITY_CAPTCHA_SECRET",type:l?"password":"text",size:"small",label:"hCaptcha secret",disabled:!u,actions:(0,R.jsx)(b.zxk,{icon:l?(0,R.jsx)(b.tCy,{}):(0,R.jsx)(b.Jib,{}),type:"default",onClick:function(){return c(!l)}})}),(0,R.jsx)(b.ZDl,{id:"REFRESH_TOKEN_ROTATION_ENABLED",size:"small",label:"Enable automatic reuse detection",layout:"flex",descriptionText:"Prevent replay attacks from compromised refresh tokens.",disabled:!u}),a.REFRESH_TOKEN_ROTATION_ENABLED&&(0,R.jsx)(b.RnZ,{id:"SECURITY_REFRESH_TOKEN_REUSE_INTERVAL",size:"small",min:0,label:"Reuse interval",descriptionText:"Time interval where the same refresh token can be used to request for an access token.",actions:(0,R.jsx)("span",{className:"mr-3 text-scale-900",children:"seconds"}),disabled:!u})]})}),(0,R.jsx)(E.hj,{header:(0,R.jsx)(E.S0,{children:"Multi Factor Authentication (MFA)"}),children:(0,R.jsx)(E.B4,{loading:!n,children:(0,R.jsx)(b.RnZ,{id:"MAX_ENROLLED_FACTORS",size:"small",label:"Maximum number of enrolled factors",disabled:!u})})})]})]})}})})),C=w,D=i(69060),P=i(33114);function M(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function B(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?M(Object(i),!0).forEach((function(t){(0,p.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):M(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var X=(0,r.Pi)((function(e){var t=e.template,i=(0,s.oR)(),n=i.ui,r=i.authConfig,o=(0,T.useState)(""),a=o[0],l=o[1],c=r.isLoaded,u=t.id,d=t.properties,h="auth-config-email-templates-".concat(u),p={},_=(0,s.FH)(S.KA.UPDATE,"custom_config_gotrue");(0,T.useEffect)((function(){c&&Object.keys(d).forEach((function(e){var t;p[e]=null!==(t=r.config[e])&&void 0!==t?t:""}))}),[c]);var g="MAILER_TEMPLATES_".concat(u,"_CONTENT"),A=d[g],L=function(){var e=(0,m.Z)(f().mark((function e(t,i){var s,o,c,u,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=i.setSubmitting,o=i.resetForm,delete(c=B({},t))[g],A&&(c[g]=a),s(!0),e.next=7,r.update(c);case 7:u=e.sent,u.error?n.setNotification({category:"error",message:"Failed to update settings"}):(n.setNotification({category:"success",message:"Successfully updated settings"}),o({values:t,initialValues:t}),l(null===r||void 0===r||null===(d=r.config)||void 0===d?void 0:d[g])),s(!1);case 11:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}();return(0,R.jsx)(b.l09,{id:h,className:"!border-t-0",initialValues:p,onSubmit:L,children:function(e){var t,i=e.isSubmitting,n=e.resetForm,s=e.values,o=e.initialValues;(0,T.useEffect)((function(){var e;n({values:p,initialValues:p}),l(null===r||void 0===r||null===(e=r.config)||void 0===e?void 0:e[g])}),[r.isLoaded]);var u=null===r||void 0===r||null===(t=r.config)||void 0===t?void 0:t[g],m=JSON.stringify(s)!==JSON.stringify(o)||u!==a;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(E.hj,{className:"!border-t-0 pb-8 pt-4",children:(0,R.jsx)(E.B4,{loading:!c,children:Object.keys(d).map((function(e){var t=d[e];if("string"===t.type)return(0,R.jsxs)("div",{className:"space-y-3",children:[(0,R.jsx)("label",{className:"col-span-12 text-sm text-scale-1200 lg:col-span-5",children:t.title}),(0,R.jsx)(b.IIB,{size:"small",layout:"vertical",id:e,name:e,descriptionText:t.description?(0,R.jsx)(N.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:t.description}):null,labelOptional:t.descriptionOptional?(0,R.jsx)(N.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:t.descriptionOptional}):null,disabled:!_},e)]})}))})}),(0,R.jsx)(E.hj,{className:"!mt-0 grid-cols-12 !border-t-0 !pt-0",children:(0,R.jsxs)(E.B4,{fullWidth:!0,loading:!c,children:[A&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("div",{className:"space-y-3",children:[(0,R.jsx)(E.S0,{children:(0,R.jsx)("span",{children:A.title})}),(0,R.jsx)(P.Z,{defaultVisibility:!0,title:"Message variables",hideCollapse:!1,description:A.description&&(0,R.jsx)(N.D,{children:A.description})})]}),(0,R.jsx)("div",{className:"relative h-96",children:(0,R.jsx)(D.ZP,{id:"code-id",loading:!c,language:"html",isReadOnly:!_,className:"!mb-0 h-96 overflow-hidden rounded border",onInputChange:function(e){return l(null!==e&&void 0!==e?e:"")},options:{wordWrap:"off",contextmenu:!1},value:a})})]}),(0,R.jsx)("div",{className:"col-span-12 flex w-full",children:(0,R.jsx)(E.iN,{handleReset:function(){var e;n({values:r.config,initialValues:r.config}),l(null===r||void 0===r||null===(e=r.config)||void 0===e?void 0:e[g])},form:h,isSubmitting:i,hasChanges:m,disabled:!_,helper:_?void 0:"You need additional permissions to update authentication settings"})})]})})]})}})})),U=(0,r.Pi)((function(){return(0,R.jsxs)("div",{children:[(0,R.jsxs)("div",{className:"flex justify-between items-center",children:[(0,R.jsx)(E.ph,{title:"Email Templates",description:"Customize the emails that will be sent out to your users."}),(0,R.jsx)("div",{className:"mb-6",children:(0,R.jsx)(b.zxk,{type:"default",icon:(0,R.jsx)(b.TqL,{size:14,strokeWidth:1.5}),children:(0,R.jsx)("a",{target:"_blank",href:"https://supabase.com/docs/guides/auth/auth-email-templates",children:"Documentation"})})})]}),(0,R.jsx)(E.by,{children:(0,R.jsx)(b.mQc,{scrollable:!0,size:"small",type:"underlined",listClassNames:"px-8 pt-4",defaultActiveId:d[0].title.trim().replace(/\s+/g,"-"),children:d.map((function(e){var t=e.title.trim().replace(/\s+/g,"-");return(0,R.jsx)(b.mQc.Panel,{id:t,label:e.title,children:(0,R.jsx)(X,{template:e},e.title)},t)}))})})]})})),k={SMTP_ADMIN_EMAIL:null,SMTP_SENDER_NAME:null,SMTP_USER:null,SMTP_HOST:null,SMTP_PASS:null,SMTP_PORT:null,SMTP_MAX_FREQUENCY:60},q=function(e){var t;return!!(null!==e&&void 0!==e&&e.SMTP_ADMIN_EMAIL&&null!==e&&void 0!==e&&e.SMTP_SENDER_NAME&&null!==e&&void 0!==e&&e.SMTP_USER&&null!==e&&void 0!==e&&e.SMTP_HOST&&null!==e&&void 0!==e&&e.SMTP_PASS&&null!==e&&void 0!==e&&e.SMTP_PORT&&(null!==(t=null===e||void 0===e?void 0:e.SMTP_MAX_FREQUENCY)&&void 0!==t?t:0)>0)},K=function(e){var t,i,n,r,s,o,a,l;return{ENABLE_SMTP:q(e),SMTP_ADMIN_EMAIL:null!==(t=null===e||void 0===e?void 0:e.SMTP_ADMIN_EMAIL)&&void 0!==t?t:"",SMTP_SENDER_NAME:null!==(i=null===e||void 0===e?void 0:e.SMTP_SENDER_NAME)&&void 0!==i?i:"",SMTP_USER:null!==(n=null===e||void 0===e?void 0:e.SMTP_USER)&&void 0!==n?n:"",SMTP_HOST:null!==(r=null===e||void 0===e?void 0:e.SMTP_HOST)&&void 0!==r?r:"",SMTP_PASS:null!==(s=null===e||void 0===e?void 0:e.SMTP_PASS)&&void 0!==s?s:"",SMTP_PORT:null!==(o=null===e||void 0===e?void 0:e.SMTP_PORT)&&void 0!==o?o:465,SMTP_MAX_FREQUENCY:null!==(a=null===e||void 0===e?void 0:e.SMTP_MAX_FREQUENCY)&&void 0!==a?a:60,RATE_LIMIT_EMAIL_SENT:null!==(l=null===e||void 0===e?void 0:e.RATE_LIMIT_EMAIL_SENT)&&void 0!==l?l:30}},F=(0,r.Pi)((function(){var e=(0,s.oR)(),t=e.authConfig,i=e.ui,n=t.config,r=t.isLoaded,l=(0,T.useState)(!1),c=l[0],u=l[1],d=(0,T.useState)(!0),h=d[0],p=d[1],_="auth-config-smtp-form",N=K(t.config),g=(0,s.FH)(S.KA.UPDATE,"custom_config_gotrue");(0,T.useEffect)((function(){r&&q(n)&&u(!0)}),[r]);var A=(0,o.object)({SMTP_ADMIN_EMAIL:(0,o.string)().when([],{is:function(){return c},then:function(e){return e.email("Must be a valid email").required("Sender email is required")},otherwise:function(e){return e}}),SMTP_SENDER_NAME:(0,o.string)().when([],{is:function(){return c},then:function(e){return e.required("Sender name is required")},otherwise:function(e){return e}}),SMTP_HOST:(0,o.string)().when([],{is:function(){return c},then:function(e){return e.matches(a.Z,"Must be a valid URL or IP address").required("Host URL is required.")},otherwise:function(e){return e}}),SMTP_PORT:(0,o.number)().when([],{is:function(){return c},then:function(e){return e.required("Port number is required.").min(1,"Must be a valid port number more than 0").max(65535,"Must be a valid port number no more than 65535")},otherwise:function(e){return e}}),SMTP_MAX_FREQUENCY:(0,o.number)().when([],{is:function(){return c},then:function(e){return e.required("Rate limit is required.").min(1,"Must be more than 0").max(32767,"Must not be more than 32,767 an hour")},otherwise:function(e){return e}}),SMTP_USER:(0,o.string)().when([],{is:function(){return c},then:function(e){return e.required("SMTP Username is required")},otherwise:function(e){return e}}),SMTP_PASS:(0,o.string)().when([],{is:function(){return c},then:function(e){return e.required("SMTP password is required")},otherwise:function(e){return e}})}),L=function(){var e=(0,m.Z)(f().mark((function e(n,r){var s,o,a,l,u,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.setSubmitting,o=r.resetForm,delete(a=c?n:k).ENABLE_SMTP,a.SMTP_PORT=a.SMTP_PORT?a.SMTP_PORT.toString():a.SMTP_PORT,s(!0),e.next=7,t.update(a);case 7:l=e.sent,(u=l.error)?i.setNotification({category:"error",message:"Failed to update settings",error:u}):(p(!0),d=K(a),o({values:d,initialValues:d}),i.setNotification({category:"success",message:"Successfully updated settings"})),s(!1);case 11:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}();return(0,R.jsx)(b.l09,{id:_,initialValues:N,onSubmit:L,validationSchema:A,children:function(e){var t=e.isSubmitting,i=e.resetForm,s=e.values,o=q(s),a=JSON.stringify(s)!==JSON.stringify(N);(0,T.useEffect)((function(){if(r){var e=K(n);i({values:e,initialValues:e})}}),[r]);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(E.ph,{title:"SMTP Settings",description:"You can use your own SMTP server instead of the built-in email service."}),(0,R.jsxs)(E.by,{footer:(0,R.jsx)("div",{className:"flex py-4 px-8",children:(0,R.jsx)(E.iN,{form:_,isSubmitting:t,hasChanges:a,handleReset:function(){u(q(N)),i({values:N})},disabled:!g,helper:g?void 0:"You need additional permissions to update authentication settings"})}),children:[(0,R.jsx)(E.hj,{children:(0,R.jsx)(E.B4,{loading:!r,children:(0,R.jsx)(b.ZDl,{name:"ENABLE_SMTP",size:"small",label:"Enable Custom SMTP",layout:"flex",checked:c,disabled:!g,onChange:function(e){return u(e)},descriptionText:"Emails will be sent using your custom SMTP provider"})})}),c&&!o&&(0,R.jsx)("div",{className:"mx-8 mb-8 -mt-4",children:(0,R.jsx)(b.bZj,{withIcon:!0,variant:"warning",title:"All fields below must be filled",children:"The following fields must be filled before custom SMTP can be properly enabled"})}),(0,R.jsx)(E.hj,{visible:c,header:(0,R.jsx)(E.S0,{children:"Sender details"}),disabled:!c,children:(0,R.jsxs)(E.B4,{loading:!r,children:[(0,R.jsx)(b.IIB,{name:"SMTP_ADMIN_EMAIL",id:"SMTP_ADMIN_EMAIL",label:"Sender email",descriptionText:"This is the email address the emails are sent from",placeholder:"noreply@yourdomain.com",disabled:!g}),(0,R.jsx)(b.IIB,{name:"SMTP_SENDER_NAME",id:"SMTP_SENDER_NAME",label:"Sender name",descriptionText:"Name displayed in the recipient's inbox",placeholder:"The name shown on the email",disabled:!g})]})}),(0,R.jsx)(E.hj,{visible:c,disabled:!c,header:(0,R.jsxs)(E.S0,{children:[(0,R.jsx)("span",{children:"SMTP Provider Settings"}),(0,R.jsx)("p",{className:"my-4 text-scale-900",children:"Your SMTP Credentials will always be encrypted in our database."})]}),children:(0,R.jsxs)(E.B4,{loading:!r,children:[(0,R.jsx)(b.IIB,{name:"SMTP_HOST",placeholder:"your.smtp.host.com",id:"SMTP_HOST",label:"Host",descriptionText:"Hostname or IP address of your SMTP server.",disabled:!g}),(0,R.jsx)(b.RnZ,{name:"SMTP_PORT",id:"SMTP_PORT",placeholder:"587",label:"Port number",descriptionText:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("span",{className:"block",children:["Port used by your SMTP server. Common ports include 25, 465, and 587."," "]}),(0,R.jsx)("span",{className:"mt-2 block",children:"Avoid using port 25 as modern SMTP email clients shouldn't use this port, it is traditionally blocked by residential ISPs and Cloud Hosting Providers, to curb the amount of spam."})]}),disabled:!g}),(0,R.jsx)(b.RnZ,{id:"SMTP_MAX_FREQUENCY",name:"SMTP_MAX_FREQUENCY",label:"Minimum interval between emails being sent",descriptionText:"How long between each email can a new email be sent via your SMTP server.",actions:(0,R.jsx)("span",{className:"mr-3 text-scale-900",children:"seconds"}),disabled:!g}),(0,R.jsx)(b.RnZ,{name:"RATE_LIMIT_EMAIL_SENT",id:"RATE_LIMIT_EMAIL_SENT",min:0,label:"Rate limit for sending emails",descriptionText:"How many emails can be sent per hour.",actions:(0,R.jsx)("span",{className:"mr-3 text-scale-900",children:"emails per hour"}),disabled:!g}),(0,R.jsx)(b.IIB,{name:"SMTP_USER",id:"SMTP_USER",label:"Username",placeholder:"SMTP Username",disabled:!g}),(0,R.jsx)(b.IIB,{name:"SMTP_PASS",id:"SMTP_PASS",type:h?"password":"text",label:"Password",placeholder:"SMTP Password",actions:(0,R.jsx)(b.zxk,{icon:h?(0,R.jsx)(b.tCy,{}):(0,R.jsx)(b.Jib,{}),type:"default",onClick:function(){return p(!h)}}),disabled:!g})]})})]})]})}})})),H=i(20279),Z=i.n(H),V=i(20796),Y=i(29914),z=i(79305),G=i(55671),W=i(20951),$=i(98574),J=i(14919),Q=i(44266),ee=(0,r.Pi)((function(e){var t=e.user,i=e.canRemoveUser,n=e.canRemoveMFAFactors,r=(0,T.useContext)(Y.PageContext),o=(0,s.oR)().ui,a=(0,T.useState)(!1),l=a[0],c=a[1];function u(){return(u=(0,m.Z)(f().mark((function e(){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),e.next=4,(0,J.v_)("".concat(V.T5,"/auth/").concat(r.projectRef,"/recover"),t);case 4:(i=e.sent).error?o.setNotification({category:"error",message:"Failed to send password recovery: ".concat(i.error.message)}):o.setNotification({category:"success",message:"Sent password recovery to ".concat(t.email)}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o.setNotification({category:"error",message:"Send password recovery failed: ".concat(null===e.t0||void 0===e.t0?void 0:e.t0.message)});case 11:return e.prev=11,c(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))).apply(this,arguments)}function d(){return(d=(0,m.Z)(f().mark((function e(){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),e.next=4,(0,J.v_)("".concat(V.T5,"/auth/").concat(r.projectRef,"/magiclink"),t);case 4:(i=e.sent).error?o.setNotification({category:"error",message:"Failed to send magic link: ".concat(i.error.message)}):o.setNotification({category:"success",message:"Sent magic link to ".concat(t.email)}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o.setNotification({category:"error",message:"Failed to send magic link: ".concat(null===e.t0||void 0===e.t0?void 0:e.t0.message)});case 11:return e.prev=11,c(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))).apply(this,arguments)}function E(){return(E=(0,m.Z)(f().mark((function e(){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),e.next=4,(0,J.v_)("".concat(V.T5,"/auth/").concat(r.projectRef,"/otp"),t);case 4:(i=e.sent).error?o.setNotification({category:"error",message:"Failed to OTP: ".concat(i.error.message)}):o.setNotification({category:"success",message:"Sent OTP to ".concat(t.phone)}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o.setNotification({category:"error",message:"Failed to send OTP: ".concat(null===e.t0||void 0===e.t0?void 0:e.t0.message)});case 11:return e.prev=11,c(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))).apply(this,arguments)}function h(){return h=(0,m.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,$.Vs)(200);case 2:(0,Q._)({title:"Confirm to delete",message:"This is permanent! Are you sure you want to delete user ".concat(t.email," ?"),onAsyncConfirm:function(){var e=(0,m.Z)(f().mark((function e(){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,(0,J.$v)("".concat(V.T5,"/auth/").concat(r.projectRef,"/users"),t);case 3:(i=e.sent).error?o.setNotification({category:"error",message:"Failed to delete user: ".concat(i.error.message)}):(o.setNotification({category:"success",message:"Successfully deleted ".concat(t.email)}),r.users=r.users.filter((function(e){return e.id!=t.id})),r.totalUsers-=1),c(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 3:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function p(){return p=(0,m.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,$.Vs)(200);case 2:(0,Q._)({title:"Confirm to delete",message:"This is permanent! Are you sure you want to delete the user's MFA factors?",onAsyncConfirm:function(){var e=(0,m.Z)(f().mark((function e(){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,(0,J.$v)("".concat(V.T5,"/auth/").concat(r.projectRef,"/users/").concat(t.id,"/factors"));case 3:(i=e.sent).error?o.setNotification({category:"error",message:"Failed to delete factors: ".concat(i.error.message)}):o.setNotification({category:"success",message:"Successfully deleted the user's factors"}),c(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 3:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}return(0,R.jsx)(b.Ltx,{size:"medium",overlay:(0,R.jsxs)(R.Fragment,{children:[null!==t.email?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(b.Ltx.Item,{onClick:function(){return u.apply(this,arguments)},icon:(0,R.jsx)(b.haR,{size:"tiny"}),children:"Send password recovery"}),(0,R.jsx)(b.Ltx.Item,{onClick:function(){return d.apply(this,arguments)},icon:(0,R.jsx)(b.haR,{size:"tiny"}),children:"Send magic link"})]}):null,null!==t.phone?(0,R.jsx)(b.Ltx.Item,{onClick:function(){return E.apply(this,arguments)},icon:(0,R.jsx)(b.haR,{size:"tiny"}),children:"Send OTP"}):null,(0,R.jsx)(b.Ltx.Separator,{}),(0,R.jsxs)(g.fC,{delayDuration:0,children:[(0,R.jsx)(g.xz,{className:"w-full",children:(0,R.jsx)(b.Ltx.Item,{onClick:function(){return p.apply(this,arguments)},icon:(0,R.jsx)(b.RLk,{size:"tiny"}),disabled:!n,children:"Remove MFA factors"})}),!n&&(0,R.jsxs)(g.VY,{side:"bottom",children:[(0,R.jsx)(g.Eh,{className:"radix-tooltip-arrow"}),(0,R.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,R.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to remove a user's authentication factors."})})]})]}),(0,R.jsxs)(g.fC,{delayDuration:0,children:[(0,R.jsx)(g.xz,{className:"w-full",children:(0,R.jsx)(b.Ltx.Item,{onClick:function(){return h.apply(this,arguments)},icon:(0,R.jsx)(b.IT9,{size:"tiny"}),disabled:!i,children:"Delete user"})}),!i&&(0,R.jsxs)(g.VY,{side:"bottom",children:[(0,R.jsx)(g.Eh,{className:"radix-tooltip-arrow"}),(0,R.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,R.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to delete users"})})]})]})]}),children:(0,R.jsx)(b.zxk,{as:"span",type:"text",icon:(0,R.jsx)(b.q3n,{}),loading:l,className:"hover:border-gray-500"})})})),te=i(27693),ie=i.n(te),ne=function(e){return e?ie()(e,"YYYY-MM-DD HH:mm:ss.SSSZZ"):void 0},re=(0,r.Pi)((function(e){var t,i,n=e.user,r=e.canRemoveUser,s=e.canRemoveMFAFactors,o=n.email_confirmed_at||n.phone_confirmed_at,a=ne(n.created_at),l=ne(n.last_sign_in_at);return(0,R.jsxs)(G.Z.tr,{className:"relative",children:[(0,R.jsx)(G.Z.td,{className:"whitespace-nowrap",children:(0,R.jsx)("div",{className:"flex items-center gap-2",children:(0,R.jsx)("span",{className:"text-sm text-scale-1200",children:n.email?n.email:"-"})})}),(0,R.jsx)(G.Z.td,{className:"whitespace-nowrap",children:(0,R.jsx)("span",{className:"text-scale-1200",children:n.phone?n.phone:"-"})}),(0,R.jsx)(G.Z.td,{className:"table-cell",children:(0,R.jsx)("span",{className:"capitalize text-scale-1200",children:(null===n||void 0===n||null===(t=n.raw_app_meta_data)||void 0===t?void 0:t.provider)||(null===n||void 0===n||null===(i=n.app_metadata)||void 0===i?void 0:i.provider)})}),(0,R.jsx)(G.Z.td,{className:"table-cell",children:(0,R.jsx)("span",{className:"text-scale-1200",children:null===a||void 0===a?void 0:a.format("DD MMM, YYYY HH:mm")})}),(0,R.jsx)(G.Z.td,{className:"table-cell",children:o?n.last_sign_in_at?null===l||void 0===l?void 0:l.format("DD MMM, YYYY HH:mm"):"Never":(0,R.jsx)(b.Cts,{color:"yellow",children:"Waiting for verification.."})}),(0,R.jsx)(G.Z.td,{className:"table-cell",children:(0,R.jsxs)("div",{className:"flex max-w-[72px] items-baseline",children:[(0,R.jsx)(W.Z,{metastring:"",className:"font-xs bash",children:n.id}),(0,R.jsx)("div",{children:"..."})]})}),(0,R.jsx)(G.Z.td,{className:"text-right",children:(0,R.jsx)(ee,{user:n,canRemoveUser:r,canRemoveMFAFactors:s})})]},n.id)})),se=(0,r.Pi)((function(){var e=(0,T.useContext)(Y.PageContext);return(0,R.jsxs)("nav",{className:"flex items-center justify-between overflow-hidden","aria-label":"Pagination",children:[(0,R.jsx)("div",{className:"hidden sm:block",children:(0,R.jsxs)("p",{className:"text-xs text-scale-900",children:["Showing",(0,R.jsx)("span",{className:"px-1 font-medium text-scale-1100",children:e.fromRow}),"to",(0,R.jsx)("span",{className:"px-1 font-medium text-scale-1100",children:e.toRow}),"of",(0,R.jsx)("span",{className:"px-1 font-medium text-scale-1100",children:e.totalUsers}),"results"]})}),(0,R.jsxs)("div",{className:"flex flex-1 justify-between sm:justify-end",children:[e.hasPrevious&&(0,R.jsx)(b.zxk,{type:"secondary",disabled:!e.hasPrevious,onClick:function(){e.fetchData(e.page-1)},children:"Previous"}),e.hasNext&&(0,R.jsx)(b.zxk,{type:"secondary",disabled:!e.hasNext,className:"ml-3",onClick:function(){e.fetchData(e.page+1)},children:"Next"})]})]})})),oe=(0,r.Pi)((function(e){(0,z.Z)(e);var t=(0,T.useContext)(Y.PageContext),i=(0,s.FH)(S.KA.TENANT_SQL_DELETE,"auth.users"),n=(0,s.FH)(S.KA.TENANT_SQL_DELETE,"auth.mfa_factors");return(0,R.jsx)(b.gbz,{active:t.usersLoading,children:(0,R.jsx)(G.Z,{head:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(G.Z.th,{children:"Email"}),(0,R.jsx)(G.Z.th,{children:"Phone"}),(0,R.jsx)(G.Z.th,{className:"table-cell",children:"Provider"}),(0,R.jsx)(G.Z.th,{className:"table-cell",children:"Created"}),(0,R.jsx)(G.Z.th,{className:"table-cell",children:"Last Sign In"}),(0,R.jsx)(G.Z.th,{className:"table-cell",children:"User UID"}),(0,R.jsx)(G.Z.th,{})]}),body:(0,R.jsxs)(R.Fragment,{children:[!t.usersLoading&&0==t.users.length&&(0,R.jsx)(G.Z.tr,{children:(0,R.jsx)(G.Z.td,{colSpan:7,className:"h-14 whitespace-nowrap border-t p-4 text-sm leading-5 text-gray-300",children:(0,R.jsxs)("div",{className:"flex items-center space-x-3 opacity-75",children:[(0,R.jsx)(b.Ldj,{size:16,strokeWidth:2}),(0,R.jsx)("p",{className:"text-scale-1000",children:t.filterKeywords?'No users matched the search query "'.concat(t.filterKeywords,'"'):"No users in your project yet"})]})})}),t.users.length>0&&t.users.map((function(e){return(0,R.jsx)(re,{user:e,canRemoveUser:i,canRemoveMFAFactors:n},e.id)})),(0,R.jsx)(G.Z.tr,{children:(0,R.jsx)(G.Z.td,{colSpan:7,children:(0,R.jsx)(se,{})})})]})})})})),ae=(0,r.Pi)((function(){var e=(0,s.oR)().ui,t=(0,T.useContext)(Y.PageContext),i=(0,T.useState)(!1),n=i[0],r=i[1],o=function(){return r(!n)},a=(0,s.FH)(S.KA.AUTH_EXECUTE,"invite_user"),l=function(){var i=(0,m.Z)(f().mark((function i(n,s){var o,a;return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return(o=s.setSubmitting)(!0),i.next=4,(0,J.v_)("".concat(V.T5,"/auth/").concat(t.projectRef,"/invite"),{email:n.email});case 4:(a=i.sent).error?e.setNotification({category:"error",message:"Failed to invite user: ".concat(a.error.message)}):(t.fetchData(1),e.setNotification({category:"success",message:"Sent invite email to ".concat(n.email)}),r(!1)),o(!1);case 7:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}();return(0,R.jsxs)("div",{children:[(0,R.jsxs)(g.fC,{delayDuration:0,children:[(0,R.jsx)(g.xz,{children:(0,R.jsx)(b.zxk,{as:"span",onClick:o,icon:(0,R.jsx)(b.SC9,{}),disabled:!a,children:"Invite"})}),!a&&(0,R.jsxs)(g.VY,{side:"bottom",children:[(0,R.jsx)(g.Eh,{className:"radix-tooltip-arrow"}),(0,R.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,R.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to invite users"})})]})]}),(0,R.jsx)(b.u_l,{closable:!0,hideFooter:!0,size:"small",visible:n,header:"Invite a new user",onCancel:o,children:(0,R.jsx)(b.l09,{validateOnBlur:!0,initialValues:{email:""},validate:function(e){var t={};return 0===e.email.length?t.email="Please enter a valid email":/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e.email)||(t.email="".concat(e.email," is an invalid email")),t},onSubmit:l,children:function(e){var t=e.isSubmitting;return(0,R.jsxs)("div",{className:"space-y-6 py-4",children:[(0,R.jsx)(b.u_l.Content,{children:(0,R.jsx)(b.IIB,{autoFocus:!0,id:"email",className:"w-full",label:"User email",icon:(0,R.jsx)(b.haR,{}),type:"email",name:"email",placeholder:"User email"})}),(0,R.jsx)(b.u_l.Content,{children:(0,R.jsx)(b.zxk,{block:!0,size:"small",htmlType:"submit",loading:t,disabled:!a||t,children:"Invite user"})})]})}})},"invite-user-modal")]})})),le=(0,r.Pi)((function(){var e,t=(0,T.useContext)(Y.PageContext),i=!V.Qy||Z().gte(Z().coerce(null!==(e=null===t||void 0===t?void 0:t.projectKpsVersion)&&void 0!==e?e:"kps-v2.5.4"),Z().coerce("kps-v2.5.3"));function n(){t.filterKeywords=t.filterInputValue,t.filterVerified=t.filterVerified,t.fetchData(1)}return(0,T.useEffect)((function(){t.fetchData(1)}),[]),(0,R.jsxs)("div",{children:[(0,R.jsxs)("div",{className:"justify-between px-6 pt-6 pb-2 md:flex",children:[(0,R.jsxs)("div",{className:"relative flex space-x-4",children:[(0,R.jsx)(b.IIB,{size:"small",value:t.filterInputValue,onChange:function(e){t.filterInputValue=e.target.value},onKeyDown:function(e){13==e.keyCode&&n()},name:"email",id:"email",placeholder:"Search by email",icon:(0,R.jsx)(b.jVj,{size:"tiny"}),actions:[t.filterInputValue&&(0,R.jsx)(b.zxk,{size:"tiny",type:"text",icon:(0,R.jsx)(b.kLi,{size:"tiny"}),onClick:function(){return t.filterInputValue="",t.filterKeywords="",void t.fetchData(1)}})]}),(0,R.jsxs)(b.RiT,{size:"small",value:t.filterVerified,onChange:function(e){t.filterVerified=e,n()},name:"verified",id:"verified",children:[(0,R.jsx)(b.RiT.Option,{label:"All Users",value:"",children:"All Users"}),(0,R.jsx)(b.RiT.Option,{label:"Verified Users",value:"verified",children:"Verified Users"}),(0,R.jsx)(b.RiT.Option,{label:"Un-Verified Users",value:"unverified",children:"Un-Verified Users"})]})]}),(0,R.jsxs)("div",{className:"mt-4 flex items-center md:mt-0",children:[(0,R.jsx)(b.zxk,{className:"mr-2",size:"tiny",icon:(0,R.jsx)(b.Kdl,{}),type:"default",loading:t.usersLoading,onClick:function(){t.fetchData(1)},children:"Reload"}),i&&(0,R.jsx)(ae,{})]})]}),(0,R.jsx)("section",{className:"users-table-container mt-4 overflow-visible px-6",children:(0,R.jsx)("div",{className:"section-block--body relative overflow-x-auto rounded",children:(0,R.jsx)("div",{className:"inline-block min-w-full align-middle",children:(0,R.jsx)(oe,{})})})})]})}))},20951:function(e,t,i){var n=i(90849),r=i(27378),s=i(55620),o=i(59235),a=i(9228),l=i.n(a),c=i(6324),u=i.n(c),d=i(88983),E=i(98574),h=i(24246);function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var _=/{([\d,-]+)}/,f={defaultLanguage:"js",plugins:["line-numbers","show-language"]};t.Z=function(e){var t=e.children,i=e.className,n=e.metastring,a=(0,r.useState)(!1),c=a[0],p=a[1],T=(0,r.useRef)(null),N=(0,r.useRef)(null),g=[];if(n&&_.test(n)){var S=n.match(_)[1];g=u()(S).filter((function(e){return e>0}))}(0,r.useEffect)((function(){if(c){var e=setTimeout((function(){return p(!1)}),2e3);return function(){return clearTimeout(e)}}}),[c]),(0,r.useEffect)((function(){var e,t;return null!==N&&void 0!==N&&null!==(e=N.current)&&void 0!==e&&e.button&&(t=new(l())(N.current.button,{target:function(){return T.current}})),function(){t&&t.destroy()}}),[N.current,T.current]);var b=i&&i.replace(/language-/,"");!b&&f.defaultLanguage&&(b=f.defaultLanguage);return(0,h.jsx)(s.ZP,m(m({},s.lG),{},{theme:f.theme||o.Z,code:t.trim(),language:b,children:function(e){var i=e.className,n=(e.style,e.tokens),r=e.getLineProps,s=e.getTokenProps;return(0,h.jsxs)("div",{className:"Code codeBlockWrapper group",children:[(0,h.jsx)("pre",{ref:T,className:"codeBlock ".concat(i),children:n.map((function(e,t){var i=r({line:e,key:t});return g.includes(t+1)&&(i.className="".concat(i.className," docusaurus-highlight-code-line")),(0,h.jsx)("div",m(m({},i),{},{children:e.map((function(e,t){return(0,h.jsx)("span",m({},s({token:e,key:t})),t)}))}),t)}))}),(0,h.jsx)("div",{className:"invisible absolute right-0 top-0 opacity-0 transition-opacity group-hover:visible group-hover:opacity-100",children:(0,h.jsx)(d.zxk,{size:"tiny",type:"default",onClick:function(){return e=t,void(0,E.vQ)(e,(function(){return p(!0)}));var e},children:c?"Copied":"Copy"})})]})}}))}},55671:function(e,t,i){var n=i(90849),r=i(90089),s=(i(27378),i(24246)),o=["children","colSpan","className","style"];function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(e){var t=e.body,i=e.head,n=e.className,r=e.containerClassName,o=e.borderless,a=e.headTrClasses,l=e.bodyClassName,c=e.style,u=["table-container"];r&&u.push(r),o&&u.push("table-container--borderless");var d=["table"];return n&&d.push(n),(0,s.jsx)("div",{className:u.join(" "),children:(0,s.jsxs)("table",{className:d.join(" "),style:c,children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{className:a,children:i})}),(0,s.jsx)("tbody",{className:l,children:t})]})})}c.th=function(e){var t=e.children,i=e.className,n=e.style,r=["p-3 px-4 text-left"];return i&&r.push(i),(0,s.jsx)("th",{className:r.join(" "),style:n,children:t})},c.td=function(e){var t=e.children,i=e.colSpan,n=e.className,a=e.style,c=(0,r.Z)(e,o);return(0,s.jsx)("td",l(l({className:n,colSpan:i,style:a},c),{},{children:t}))},c.tr=function(e){var t=e.children,i=e.className,n=e.onClick,r=e.style,o=e.hoverable,a=[i];return(n||o)&&a.push("tr--link"),(0,s.jsx)("tr",{className:a.join(" "),onClick:n,style:r,children:t})},t.Z=c},17871:function(e,t,i){i.d(t,{p:function(){return r}});var n=i(24246),r=function(){return(0,n.jsxs)("div",{className:"flex w-full flex-row items-center justify-between gap-2",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,n.jsx)("div",{className:"shimmering-loader h-6 w-6 rounded-full"}),(0,n.jsx)("div",{className:"shimmering-loader h-2 w-32 rounded"})]}),(0,n.jsx)("div",{className:"shimmering-loader h-6 w-20 rounded"})]})}},29914:function(e,t,i){i.r(t),i.d(t,{PageContext:function(){return g}});var n=i(55732),r=i(90849),s=i(34707),o=i.n(s),a=i(27378),l=i(25229),c=i(86677),u=i(14919),d=i(20796),E=i(42791),h=i(80172),p=i(83015),m=i(68043),_=i(38230),f=i(24246);function T(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function N(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?T(Object(i),!0).forEach((function(t){(0,r.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):T(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var g=(0,a.createContext)(null),S=function(e){var t=e.children,i=(0,l.fv)((function(){return{projectRef:void 0,projectKpsVersion:void 0,filterInputValue:"",filterKeywords:"",filterVerified:void 0,users:[],totalUsers:0,usersLoading:!0,page:1,pageLimit:10,get fetchQuery(){var e={limit:this.pageLimit,offset:(this.page-1)*this.pageLimit,keywords:this.filterKeywords};return this.filterVerified?N(N({},e),{},{verified:this.filterVerified}):e},get fromRow(){var e=this.pageLimit*(this.page-1)+1;return e>this.totalUsers?this.totalUsers:e},get toRow(){var e=this.pageLimit*this.page;return e>this.totalUsers?this.totalUsers:e},get hasPrevious(){return this.page>1},get hasNext(){return this.toRow<this.totalUsers},updateData:function(e){this.usersLoading=!1,this.totalUsers=e.total,this.users=e.users},fetchData:function(e){var t=this;return(0,n.Z)(o().mark((function n(){var r,s,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.usersLoading=!0,t.page=e,r=new URLSearchParams(i.fetchQuery).toString(),s="".concat(d.T5,"/auth/").concat(i.projectRef,"/users?").concat(r),n.next=6,(0,u.U2)(s);case 6:(a=n.sent).error?(t.totalUsers=0,t.users=[],t.usersLoading=!1,console.error("Fetch user failed: ".concat(a.error.message))):(t.totalUsers=a.total,t.users=a.users,t.usersLoading=!1);case 8:case"end":return n.stop()}}),n)})))()}}})),r=(0,c.useRouter)();return i.projectRef=r.query.ref,(0,f.jsx)(g.Provider,{value:i,children:t})},b=function(){var e=(0,E.oR)().ui,t=(0,a.useContext)(g),i=e.selectedProject;return(0,a.useEffect)((function(){t.projectKpsVersion=null===i||void 0===i?void 0:i.kpsVersion}),[i]),(0,E.FH)(m.KA.TENANT_SQL_SELECT,"auth.users")?(0,f.jsx)(p.Q,{}):(0,f.jsx)(_.Z,{isFullPage:!0,resourceText:"access your project's users"})};b.getLayout=function(e){return(0,f.jsx)(h.g1,{title:"Auth",children:(0,f.jsx)(S,{children:e})})},t.default=(0,l.Pi)(b)}}]);
//# sourceMappingURL=6778-226ec18f59bd9ad7.js.map