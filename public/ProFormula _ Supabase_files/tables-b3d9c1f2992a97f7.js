(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7688],{71457:function(e,n,t){"use strict";t.r(n);var r=t(55732),a=t(34707),o=t.n(a),c=t(27378),s=t(25229),i=t(98784),u=t(88983),l=t(42791),d=t(80172),f=t(63840),v=t(56743),b=t(7173),m=t(24246),p=function(){var e,n=(0,l.oR)(),t=n.meta,a=n.ui,s=(0,c.useState)(!1),d=s[0],p=s[1],h=(0,c.useState)("public"),x=h[0],S=h[1],y=(0,c.useState)(),g=y[0],w=y[1],j=(0,c.useState)(),k=j[0],C=j[1],_=(0,c.useState)(),T=_[0],N=_[1],E=(0,c.useState)(),D=E[0],L=E[1],P=(0,c.useState)(),U=P[0],Z=P[1],A=(0,c.useState)(),F=A[0],O=A[1];(0,c.useEffect)((function(){var e;null!==(e=a.selectedProject)&&void 0!==e&&e.ref&&t.types.load()}),[null===(e=a.selectedProject)||void 0===e?void 0:e.ref]);var B=function(){var e=(0,r.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==g){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.tables.loadById(g.id);case 4:n=e.sent,w(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=(0,r.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(0,i.isUndefined)(F)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.tables.del(F.id);case 5:if(!(n=e.sent).error){e.next=10;break}throw n.error;case 10:a.setNotification({category:"success",message:"Successfully removed ".concat(F.name,".")});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),a.setNotification({category:"error",message:"Failed to delete ".concat(null===F||void 0===F?void 0:F.name,": ").concat(e.t0.message)});case 16:return e.prev=16,p(!1),O(void 0),e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[0,13,16,20]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=(0,r.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(0,i.isUndefined)(U)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.columns.del(U.id);case 5:if(!(n=e.sent).error){e.next=10;break}throw n.error;case 10:B(),a.setNotification({category:"success",message:"Successfully removed ".concat(U.name,".")});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),a.setNotification({category:"error",message:"Failed to delete ".concat(null===U||void 0===U?void 0:U.name,": ").concat(e.t0.message)});case 17:return e.prev=17,p(!1),Z(void 0),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[0,14,17,21]])})));return function(){return e.apply(this,arguments)}}();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"p-4",children:(0,i.isUndefined)(g)?(0,m.jsx)(v.bw,{selectedSchema:x,onSelectSchema:S,onAddTable:function(){C("table"),L(void 0)},onEditTable:function(e){C("table"),L(e)},onDeleteTable:function(e){p(!0),O(e)},onOpenTable:w}):(0,m.jsx)(v.TH,{selectedTable:g,onAddColumn:function(){C("column"),N(void 0)},onEditColumn:function(e){C("column"),N(e)},onDeleteColumn:function(e){p(!0),Z(e)},onSelectBack:function(){return w(void 0)}})}),(0,m.jsx)(f.Z,{danger:!0,visible:d&&!(0,i.isUndefined)(F),header:(0,m.jsx)("span",{className:"break-words",children:'Confirm deletion of table "'.concat(null===F||void 0===F?void 0:F.name,'"')}),children:(0,m.jsx)(u.u_l.Content,{children:(0,m.jsx)("p",{className:"py-4 text-sm text-scale-1100",children:"Are you sure you want to delete the selected table? This action cannot be undone."})}),buttonLabel:"Delete",buttonLoadingLabel:"Deleting",onSelectCancel:function(){return p(!1)},onSelectConfirm:X}),(0,m.jsx)(f.Z,{danger:!0,visible:d&&!(0,i.isUndefined)(U),header:'Confirm deletion of column "'.concat(null===U||void 0===U?void 0:U.name,'"'),children:(0,m.jsx)(u.u_l.Content,{children:(0,m.jsx)("p",{className:"py-4 text-sm text-scale-1100",children:"Are you sure you want to delete the selected column? This action cannot be undone."})}),buttonLabel:"Delete",buttonLoadingLabel:"Deleting",onSelectCancel:function(){return p(!1)},onSelectConfirm:H}),(0,m.jsx)(b.l5,{sidePanelKey:k,selectedSchema:x,selectedTable:g,onColumnSaved:B,closePanel:function(){return C(void 0)},selectedColumnToEdit:T,selectedTableToEdit:D})]})};p.getLayout=function(e){return(0,m.jsx)(d._h,{title:"Database",children:e})},n.default=(0,s.Pi)(p)},64912:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/database/tables",function(){return t(71457)}])}},function(e){e.O(0,[8143,5813,9731,2367,7190,675,1607,7571,9526,4804,6743,113,7173,9774,2888,179],(function(){return n=64912,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
//# sourceMappingURL=tables-b3d9c1f2992a97f7.js.map