(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8321],{14353:function(e,t,r){"use strict";r.d(t,{Z:function(){return y}});var n=r(55732),i=r(34707),s=r.n(i),a=r(27378),o=r(88983),c=r(11246),l=r(90849),u=r(81461),d=r(86236),f=r.n(d),p=r(17140),h=r(24246);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var v=function(e){var t=e.schema,r=e.model,n=e.disabled,i=void 0!==n&&n,s=e.children,a=e.formRef,o=e.onSubmit,c=e.onChangeModel,l=void 0===c?function(){}:c,d=new p.j(t,x(t));return(0,h.jsx)(u.Z,{disabled:i,onChangeModel:l,ref:a,schema:d,onSubmit:o,submitField:function(){return(0,h.jsx)(h.Fragment,{})},model:r,children:s})},b=new(f())({strict:!1,allErrors:!0,useDefaults:!0});b=b.addFormat("absolute-url","^(http://|https://)");var x=function(e){var t=b.compile(e);return function(r){var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r);if(Object.entries(n).map((function(t){var r=(0,c.Z)(t,2),i=r[0],s=r[1],a=-1!=e.required.indexOf(i);n[i]="string"===typeof s&&a?j(s):s})),t(n),t.errors&&t.errors.length)return{details:t.errors}}},j=function(e){return""===e.trim()?null:e};function y(e){var t,r=e.schema,i=e.title,c=e.model,l=e.children,u=e.onChangeModel,d=void 0===u?function(e){}:u,f=e.onReset,p=void 0===f?function(){}:f,m=e.onSubmit,b=e.submitLabel,x=void 0===b?"Save":b,j=e.cancelLabel,y=void 0===j?"Cancel":j,g=e.message,O=void 0===g?"":g,w=e.disabled,k=void 0!==w&&w,N=e.disabledMessage,P=void 0===N?"":N,_=(0,a.useState)(!1),S=_[0],C=_[1],Z=(0,a.useState)(!1),E=Z[0],D=Z[1];return(0,h.jsxs)("section",{className:"section-block mb-8",children:[(0,h.jsxs)("div",{className:" flex h-12 items-center overflow-hidden border-b border-panel-border-light bg-panel-header-light px-6 dark:border-panel-border-dark dark:bg-panel-header-dark",children:[(0,h.jsx)("div",{className:"flex-1 text-left",children:(0,h.jsx)("h6",{children:i||""})}),k&&P?(0,h.jsx)("p",{className:"text-sm text-scale-1000",children:P}):(0,h.jsxs)("div",{className:"flex transition duration-150 ".concat(E?"opacity-100":"cursor-default opacity-0"),children:[(0,h.jsx)(o.zxk,{onClick:function(){t.reset(),C(!1),D(!1),p&&p()},type:"default",disabled:!E,children:y||"Cancel"}),(0,h.jsx)(o.zxk,{onClick:function(){t.submit().then((function(){C(!0)})).catch((function(e){console.error("Error on submitting",e)}))},loading:S,disabled:k||!E,type:"primary",className:"ml-2 hover:border-green-500",children:x||"Save"})]}),(0,h.jsx)("span",{className:"text-sm text-scale-900",children:O})]}),(0,h.jsx)("div",{className:"Form section-block--body px-6 py-3",children:(0,h.jsx)(v,{disabled:k,onChangeModel:function(e){D(!0),d&&d(e)},formRef:function(e){return t=e},schema:r,model:c,children:l,onSubmit:function(){var e=(0,n.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t).then((function(){C(!1),D(!1)})).catch((function(){return C(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})}},96338:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var n=r(55732),i=r(34707),s=r.n(i),a=r(25229),o=r(27378),c=r(88983),l=r(80172),u=r(14353),d=r(96423),f=r(90849),p=r(90089),h=r(85945),m=r(48228),v=r(14919),b=r(20796),x=r(43399),j=["onSuccess"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,f.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e){return w.apply(this,arguments)}function w(){return(w=(0,n.Z)(s().mark((function e(t){var r,n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.firstName,n=t.lastName,e.next=3,(0,v.v_)("".concat(b.T5,"/profile/update"),{first_name:r,last_name:n});case 3:if(!(i=e.sent).error){e.next=6;break}throw i.error;case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=r(42791),N=r(13830),P=r(79894),_=r(24246),S=function(){return(0,_.jsx)("div",{className:"my-2",children:(0,_.jsx)(Z,{})})};S.getLayout=function(e){return(0,_.jsx)(l.p0,{title:"Supabase",breadcrumbs:[{key:"supabase-settings",label:"Preferences"}],children:e})};var C=S,Z=(0,a.Pi)((function(){var e,t,r=(0,k.oR)().ui,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=(0,p.Z)(e,j),i=(0,h.NL)();return(0,m.D)((function(e){return O(e)}),g({onSuccess:function(e,r,a){return(0,n.Z)(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.invalidateQueries(x.c.profile());case 2:return n.next=4,null===t||void 0===t?void 0:t(e,r,a);case 4:case"end":return n.stop()}}),n)})))()}},r))}(),a=i.mutate,c=r.profile,l=function(){var e=(0,n.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a({firstName:t.first_name,lastName:t.last_name}),r.setNotification({category:"success",message:"Successfully saved profile"})}catch(n){r.setNotification({error:n,category:"error",message:"Couldn't update profile. Please try again later."})}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=(0,o.useState)(null),f=d[0],v=d[1];return(0,o.useEffect)((function(){var e=!1;return(0,n.Z)(s().mark((function t(){var r,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.I8.getSession();case 2:r=t.sent,(n=r.data.session)&&!e&&v(n);case 5:case"end":return t.stop()}}),t)})))(),function(){e=!0}}),[]),(0,_.jsxs)("article",{className:"max-w-4xl p-4",children:[(0,_.jsx)("section",{children:(0,_.jsx)(E,{session:f})}),(0,_.jsx)("section",{children:(0,_.jsx)(u.Z,{title:"Profile",schema:{type:"object",required:[],properties:{first_name:{type:"string"},last_name:{type:"string"}}},model:{first_name:null!==(e=null===c||void 0===c?void 0:c.first_name)&&void 0!==e?e:"",last_name:null!==(t=null===c||void 0===c?void 0:c.last_name)&&void 0!==t?t:""},onSubmit:l})}),(0,_.jsx)("section",{children:(0,_.jsx)(D,{})})]})})),E=(0,a.Pi)((function(e){var t,r,n,i,s=e.session,a=(0,k.oR)().ui;return(0,_.jsx)(d.Z,{title:(0,_.jsx)("h5",{className:"mb-0",children:"Account Information"},"panel-title"),children:(0,_.jsx)(d.Z.Content,{children:(0,_.jsxs)("div",{className:"space-y-2",children:[(0,_.jsx)(c.IIB,{readOnly:!0,disabled:!0,label:"Username",layout:"horizontal",value:null!==(t=null===(r=a.profile)||void 0===r?void 0:r.username)&&void 0!==t?t:""}),(0,_.jsx)(c.IIB,{readOnly:!0,disabled:!0,label:"Email",layout:"horizontal",value:null!==(n=null===(i=a.profile)||void 0===i?void 0:i.primary_email)&&void 0!==n?n:""}),"email"===(null===s||void 0===s?void 0:s.user.app_metadata.provider)&&(0,_.jsxs)("div",{className:"text-sm grid gap-2 md:grid md:grid-cols-12 md:gap-x-4",children:[(0,_.jsx)("div",{className:"flex flex-col space-y-2 col-span-4 ",children:(0,_.jsx)("p",{className:"text-scale-1100 break-all",children:"Password"})}),(0,_.jsx)("div",{className:"col-span-8",children:(0,_.jsx)(P.default,{href:"/reset-password",children:(0,_.jsx)("a",{children:(0,_.jsx)(c.zxk,{type:"default",size:"medium",children:"Reset password"})})})})]})]})})})})),D=(0,a.Pi)((function(){var e=(0,k.oR)().ui;return(0,_.jsx)(d.Z,{title:(0,_.jsx)("h5",{children:"Theme"},"panel-title"),children:(0,_.jsx)(d.Z.Content,{children:(0,_.jsxs)(c.RiT,{value:e.themeOption,label:"Interface theme",descriptionText:"Choose a theme preference",layout:"horizontal",style:{width:"50%"},icon:"light"===e.themeOption?(0,_.jsx)(c.O31,{}):"dark"===e.themeOption?(0,_.jsx)(c.C9B,{}):void 0,onChange:function(t){return e.onThemeOptionChange(t)},children:[(0,_.jsx)(c.RiT.Option,{label:"System default",value:"system",children:"System default"}),(0,_.jsx)(c.RiT.Option,{label:"Dark",value:"dark",children:"Dark"}),(0,_.jsx)(c.RiT.Option,{label:"Light",value:"light",children:"Light"})]})})})}))},54828:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/me",function(){return r(96338)}])}},function(e){e.O(0,[5813,9731,2367,675,7571,9774,2888,179],(function(){return t=54828,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=me-0ca0130a8cb1b69c.js.map