"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7571],{34465:function(e,t,r){var n=r(88983),s=r(24246);t.Z=function(e){var t=e.language,r=e.releaseState,a=e.officialSupport,i=e.docsUrl,o=e.gitUrl;return(0,s.jsxs)("div",{className:"flex items-start space-x-6",children:[(0,s.jsx)("img",{src:"/img/libraries/".concat(t.toLowerCase(),"-icon.svg"),alt:"".concat(t," logo"),width:"21"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h5",{className:"flex items-center gap-2 text-base text-scale-1200",children:[t," ",r&&(0,s.jsx)(n.Cts,{color:"yellow",children:"Public ".concat(r)})]}),(0,s.jsx)("p",{className:"text-sm text-scale-1000",children:a?"This library is officially supported":"This library is community supported"})]}),(0,s.jsxs)("div",{className:"space-x-1",children:[i&&(0,s.jsx)("a",{href:i,target:"_blank",children:(0,s.jsx)(n.zxk,{icon:(0,s.jsx)(n.sDS,{}),type:"default",children:"Docs"})}),(0,s.jsx)("a",{href:o,target:"_blank",children:(0,s.jsx)(n.zxk,{icon:(0,s.jsx)(n.Mrn,{}),type:"default",children:"See GitHub"})})]})]})]})}},1693:function(e,t,r){var n=r(88983),s=r(42791),a=r(79894),i=r(24246);t.Z=function(e){var t=e.framework,r=e.title,o=e.description,c=e.url,l=(0,s.oR)().ui.isDarkTheme;return(0,i.jsx)(a.default,{href:c,children:(0,i.jsx)("a",{target:"_blank",children:(0,i.jsxs)("div",{className:["group relative","border bg-panel-header-light  hover:bg-panel-border-light dark:bg-panel-header-dark dark:hover:bg-panel-border-dark","border-panel-border-light hover:border-panel-border-hover-light  dark:border-panel-border-dark","flex h-32 flex-row rounded-md p-4 hover:border-gray-300 dark:hover:border-panel-border-hover-dark","transition duration-150 ease-in-out"].join(" "),children:[(0,i.jsx)("div",{className:"mr-4 flex flex-col",children:(0,i.jsx)("img",{className:"transition-all group-hover:scale-110",src:"/img/libraries/".concat(t.toLowerCase()).concat(["expo","nextjs"].includes(t.toLowerCase())&&l?"-dark":"","-icon.svg"),alt:"".concat(t," logo"),width:26,height:26})}),(0,i.jsxs)("div",{className:"w-4/5 space-y-2",children:[(0,i.jsx)("h5",{className:"text-scale-1200",children:r}),(0,i.jsx)("p",{className:"text-sm text-scale-1000",children:o})]}),(0,i.jsx)("div",{className:" absolute right-4 top-3 text-scale-900 transition-all  duration-200  group-hover:right-3 group-hover:text-scale-1200 ",children:(0,i.jsx)(n.VG8,{})})]})})})}},95925:function(e,t,r){r.d(t,{l:function(){return n},B:function(){return s}});var n=[{language:"JavaScript",officialSupport:!0,releaseState:void 0,docsUrl:"https://supabase.com/docs/reference/javascript/installing",gitUrl:"https://github.com/supabase/supabase-js"},{language:"Python",officialSupport:!1,releaseState:"Alpha",docsUrl:"https://supabase.com/docs/reference/python/introduction",gitUrl:"https://github.com/supabase/supabase-py"},{language:"Flutter",officialSupport:!0,releaseState:void 0,docsUrl:"https://supabase.com/docs/reference/dart/installing",gitUrl:"https://github.com/supabase/supabase-flutter"}],s=[{framework:"Svelte",title:"Svelte kanban board",description:"A Trello clone using Supabase as the storage system.",url:"https://github.com/joshnuss/supabase-kanban"},{framework:"NextJS",title:"Next.js Realtime chat app",description:"Next.js Slack clone app using Supabase realtime subscriptions",url:"https://github.com/supabase/supabase/tree/master/examples/slack-clone/nextjs-slack-clone"},{framework:"NextJS",title:"Next.js Subscription and Auth",description:"The all-in-one starter kit for high-performance SaaS applications.",url:"https://github.com/vercel/nextjs-subscription-payments"},{framework:"Expo",title:"Expo Starter",description:"Template bottom tabs with auth flow (Typescript)",url:"https://github.com/codingki/react-native-expo-template/tree/master/template-typescript-bottom-tabs-supabase-auth-flow"},{framework:"NestJS",title:"NestJS example",description:"NestJS example using Supabase Auth",url:"https://github.com/hiro1107/nestjs-supabase-auth"},{framework:"React",title:"React realtime chat app",description:"Example app of real-time chat using supabase realtime api",url:"https://github.com/shwosner/realtime-chat-supabase-react"},{framework:"JavaScript",title:"Vanilla-js Auth app",description:"Example app of real-time chat using supabase realtime api",url:"https://github.com/supabase/examples/tree/main/supabase-js-v1/auth/javascript-auth"},{framework:"React",title:"React Native todo list app",description:"React Native Todo List example with Expo",url:"https://github.com/supabase/examples/tree/main/supabase-js-v1/todo-list/expo-todo-list"},{framework:"NextJS",title:"Next.js todo list app",description:"NextJS todo list example",url:"https://github.com/supabase/examples/tree/main/supabase-js-v1/todo-list/nextjs-todo-list"},{framework:"React",title:"React todo List app",description:"React todo List example",url:"https://github.com/supabase/examples/tree/main/supabase-js-v1/todo-list/react-todo-list"},{framework:"Svelte",title:"Svelte todo list app",description:"Sveltejs todo with TailwindCSS and Snowpack",url:"https://github.com/supabase/supabase/tree/master/examples/todo-list/sveltejs-todo-list"},{framework:"VueJS",title:"Vue.js todo list app",description:"Vue.js todo app using TypeScript",url:"https://github.com/supabase/examples/tree/main/supabase-js-v1/todo-list/vue3-ts-todo-list"}]},31027:function(e,t,r){r.d(t,{Z:function(){return f}});var n=r(25229),s=r(68043),a=r(86677),i=r(42791),o=r(80172),c=r(38230),l=r(44285),u=r(20796),d=function(e){var t,r=null!==(t=null===e||void 0===e?void 0:e.ref)&&void 0!==t?t:"default";return(0,l.Z)(u.Qy?[{title:"Logs Explorer",items:[{key:"explorer",name:"Query",root:!0},{key:"saved",name:"Saved Queries"},{key:"recent",name:"Recent Queries"},{key:"templates",name:"Templates"}].map((function(e){var t=e.key,n=e.name,s=e.root;return{name:n,key:t,url:"/project/".concat(r,"/logs/explorer").concat(s?"":"/"+t),items:[]}}))},{items:[{name:"API Edge Network",key:"edge-logs",url:"/project/".concat(r,"/logs/edge-logs"),items:[]},{name:"Postgres",key:"postgres-logs",url:"/project/".concat(r,"/logs/postgres-logs"),items:[]},{name:"PostgREST",key:"postgrest-logs",url:"/project/".concat(r,"/logs/postgrest-logs"),items:[]},{name:"PgBouncer",key:"pgbouncer-logs",url:"/project/".concat(r,"/logs/pgbouncer-logs"),items:[]},{name:"Auth",key:"auth-logs",url:"/project/".concat(r,"/logs/auth-logs"),items:[]},{name:"Storage",key:"storage-logs",url:"/project/".concat(r,"/logs/storage-logs"),items:[]},{name:"Realtime",key:"realtime-logs",url:"/project/".concat(r,"/logs/realtime-logs"),items:[]}]}]:[])},p=r(24376),m=r(24246),f=(0,i.QO)((0,n.Pi)((function(e){var t=e.title,r=e.children,n=(0,i.oR)().ui,l=(0,a.useRouter)().pathname.split("/"),u=l[l.length-1],f=n.selectedProject;return(0,i.FH)(s.KA.ANALYTICS_READ,"logflare")?(0,m.jsx)(o.ZP,{title:t,product:"Logs",productMenu:(0,m.jsx)(p.Z,{page:u,menu:d(f)}),children:(0,m.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:r})}):(0,m.jsx)(o.ZP,{children:(0,m.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:(0,m.jsx)(c.Z,{isFullPage:!0,resourceText:"access your project's logs explorer"})})})})))},47510:function(e,t,r){r.d(t,{d2:function(){return c},Ml:function(){return l}});var n=r(42791),s=r(25229),a=r(27378),i=r(24246),o=(0,a.createContext)({project:void 0,isLoading:!0}),c=function(){return(0,a.useContext)(o)},l=(0,s.Pi)((function(e){var t,r=e.projectRef,s=e.children,c=(0,n.oR)().ui,l=(0,a.useMemo)((function(){var e;return(null===(e=c.selectedProject)||void 0===e?void 0:e.ref)===r?{project:c.selectedProject,isLoading:!1}:{project:void 0,isLoading:!0}}),[null===(t=c.selectedProject)||void 0===t?void 0:t.ref,r]);return(0,i.jsx)(o.Provider,{value:l,children:s})}))},91700:function(e,t,r){var n=r(88038),s=r(92836),a=r(24246);t.Z=function(e){var t=e.children;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.default,{children:(0,a.jsx)("title",{children:"Supabase + Vercel"})}),(0,a.jsxs)("main",{className:"flex flex-col w-full h-full overflow-y-auto",children:[(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"mx-auto px-4 sm:px-6",children:(0,a.jsx)("div",{className:"max-w-xl flex justify-between items-center mx-auto py-4",children:(0,a.jsx)("div",{className:"flex justify-start lg:w-0 lg:flex-1",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"sr-only",children:"Supabase"}),(0,a.jsx)("img",{className:"h-6 w-auto sm:h-6",src:"/img/supabase-logo.svg",alt:""})]})})})})}),(0,a.jsx)(s.Z,{light:!0}),(0,a.jsx)("div",{className:"flex-grow",children:(0,a.jsx)("div",{className:"max-w-7xl h-full mx-auto px-4 sm:px-6",children:(0,a.jsx)("div",{className:"max-w-xl h-full mx-auto py-10",children:t})})})]})]})}},80172:function(e,t,r){r.d(t,{p0:function(){return ut},g1:function(){return f},Ht:function(){return ht},_h:function(){return Ye},zt:function(){return Ge},gm:function(){return S},Uj:function(){return xt.Z},Ix:function(){return jt},$E:function(){return Ie},li:function(){return gt},Vk:function(){return He},dU:function(){return qe},_J:function(){return N},ro:function(){return st},lz:function(){return Ae},Ru:function(){return pt},pj:function(){return mt},ZP:function(){return bt}});var n=r(27378),s=r(25229),a=r(86677),i=r(42791),o=r(79894),c=r(88983),l=r(24246);function u(e){var t=e.error;return(0,n.useEffect)((function(){console.error("Error",t)}),[]),(0,l.jsxs)("div",{className:"mx-auto flex h-full w-full flex-col items-center justify-center space-y-6",children:[(0,l.jsxs)("div",{className:"flex w-[320px] flex-col items-center justify-center space-y-3",children:[(0,l.jsx)("h4",{className:"text-lg",children:"Something went wrong \ud83e\udd15"}),(0,l.jsx)("p",{className:"text-center text-sm text-scale-1100",children:"Sorry about that, please try again later or feel free to reach out to us if the problem persists."})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)(o.default,{href:"/projects",children:(0,l.jsx)("a",{children:(0,l.jsx)(c.zxk,{children:"Head back"})})}),(0,l.jsx)(o.default,{href:"/support/new",children:(0,l.jsx)("a",{children:(0,l.jsx)(c.zxk,{type:"secondary",children:"Submit a support request"})})})]}),(0,l.jsxs)("p",{className:"text-sm text-scale-1100",children:["Error: [",null===t||void 0===t?void 0:t.code,"] ",null===t||void 0===t?void 0:t.message]})]})}var d=r(24376),p=r(44285),m=r(20796),f=(0,i.QO)((0,s.Pi)((function(e){var t,r,s,o,c=e.title,f=e.children,h=(0,i.oR)(),x=h.ui,v=h.meta,g=v.tables,j=g.isInitialized,b=g.isLoading,y=g.error,w=null!==(t=null===(r=x.selectedProject)||void 0===r?void 0:r.ref)&&void 0!==t?t:"default",k=(0,a.useRouter)().pathname.split("/")[4],N=(0,n.useState)(j),S=N[0],P=N[1];return(0,n.useEffect)((function(){var e;null!==(e=x.selectedProject)&&void 0!==e&&e.ref&&(v.policies.load(),v.tables.load(),v.roles.load(),v.schemas.load())}),[null===(s=x.selectedProject)||void 0===s?void 0:s.ref]),(0,n.useEffect)((function(){b||S||P(!0)}),[b]),y?(0,l.jsx)(bt,{children:(0,l.jsx)(u,{error:y})}):(0,l.jsx)(bt,{isLoading:!S,title:c||"Authentication",product:"Authentication",productMenu:(0,l.jsx)(d.Z,{page:k,menu:(o=w,[{title:"Manage",items:[{name:"Users",key:"users",url:"/project/".concat(o,"/auth/users"),items:[]}]},{title:"Configuration",items:[{name:"Policies",key:"policies",url:"/project/".concat(o,"/auth/policies"),items:[]}].concat((0,p.Z)(m.Qy?[{name:"Providers",key:"providers",url:"/project/".concat(o,"/auth/providers"),items:[]},{name:"Email Templates",key:"templates",url:"/project/".concat(o,"/auth/templates"),items:[]},{name:"URL Configuration",key:"url-configuration",url:"/project/".concat(o,"/auth/url-configuration"),items:[]}]:[]))}])}),children:(0,l.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:f})})}))),h=r(55732),x=r(34707),v=r.n(x),g=r(85945),j=r(37753),b=r(13830),y=r(88038),w=r(38579);var k=[{text:"Working with @supabase has been one of the best dev experiences I've had lately. Incredibly easy to set up, great documentation, and so many fewer hoops to jump through than the competition. I definitely plan to use it on any and all future projects.",url:"https://twitter.com/thatguy_tex/status/1497602628410388480",handle:"thatguy_tex",img_url:"/images/twitter-profiles/09HouOSt_400x400.jpg"},{text:"@supabase is just \ud83e\udd2f Now I see why a lot of people love using it as a backend for their applications. I am really impressed with how easy it is to set up an Auth and then just code it together for the frontend. @IngoKpp now I see your joy with Supabase #coding #fullstackwebdev",url:"https://twitter.com/IxoyeDesign/status/1497473731777728512",handle:"IxoyeDesign",img_url:"/images/twitter-profiles/C8opIL-g_400x400.jpg"},{text:"I've been using @supabase for two personal projects and it has been amazing being able to use the power of Postgres and don't have to worry about the backend",url:"https://twitter.com/varlenneto/status/1496595780475535366",handle:"varlenneto",img_url:"/images/twitter-profiles/wkXN0t_F_400x400.jpg"},{text:"Y'all @supabase + @nextjs is amazing! \ud83d\ude4c Barely an hour into a proof-of-concept and already have most of the functionality in place. \ud83e\udd2f\ud83e\udd2f\ud83e\udd2f",url:"https://twitter.com/justinjunodev/status/1500264302749622273",handle:"justinjunodev",img_url:"/images/twitter-profiles/9k_ZB9OO_400x400.jpg"},{text:"And thanks to @supabase, I was able to go from idea to launched feature in a matter of hours. Absolutely amazing!",url:"https://twitter.com/BraydonCoyer/status/1511071369731137537",handle:"BraydonCoyer",img_url:"/images/twitter-profiles/8YxkpW8f_400x400.jpg"},{text:"Contributing to open-source projects and seeing merged PRs gives enormous happiness! Special thanks to @supabase, for giving this opportunity by staying open-source and being junior-friendly\u270c\ud83c\udffc",url:"https://twitter.com/damlakoksal/status/1511436907984662539",handle:"damlakoksal",img_url:"/images/twitter-profiles/N8EfTFs7_400x400.jpg"},{text:"Holy crap. @supabase is absolutely incredible. Most elegant backend as a service I've ever used. This is a dream.",url:"https://twitter.com/kentherogers/status/1512609587110719488",handle:"KenTheRogers",img_url:"/images/twitter-profiles/9l9Td-Fz_400x400.jpg"},{text:"Over the course of a few weeks, we migrated 125.000 users (email/pw, Gmail, Facebook, Apple logins) from Auth0 to @supabase and have now completed the migration. I'm just glad the migration is done \ud83d\ude05 Went well, besides a few edge cases (duplicate emails/linked accounts)",url:"https://twitter.com/kevcodez/status/1518548401587204096",handle:"kevcodez",img_url:"/images/twitter-profiles/t6lpcRcn_400x400.jpg"},{text:"Using @supabase I'm really pleased on the power of postgres (and sql in general). Despite being a bit dubious about the whole backend as a service thing I have to say I really don't miss anything. The whole experience feel very robust and secure.",url:"https://twitter.com/paoloricciuti/status/1497691838597066752",handle:"PaoloRicciuti",img_url:"/images/twitter-profiles/OCDKFUOp_400x400.jpg"},{text:"@supabase is lit. It took me less than 10 minutes to setup, the DX is just amazing.",url:"https://twitter.com/saxxone/status/1500812171063828486",handle:"saxxone",img_url:"/images/twitter-profiles/BXi6z1M7_400x400.jpg"},{text:"I\u2019m not sure what magic @supabase is using but we\u2019ve migrated @happyteamsdotio database to @supabase from @heroku and it\u2019s much much faster at half the cost.",url:"https://twitter.com/michaelcdever/status/1524753565599690754",handle:"michaelcdever",img_url:"/images/twitter-profiles/rWX8Jzp5_400x400.jpg"},{text:"There are a lot of indie hackers building in public, but it\u2019s rare to see a startup shipping as consistently and transparently as Supabase. Their upcoming March releases look to be \ud83d\udd25 Def worth a follow! also opened my eyes as to how to value add in open source.",url:"https://twitter.com/swyx/status/1366685025047994373",handle:"swyx",img_url:"/images/twitter-profiles/qhvO9V6x_400x400.jpg"},{text:"This weekend I made a personal record \ud83e\udd47 on the less time spent creating an application with social login / permissions, database, cdn, infinite scaling, git push to deploy and for free. Thanks to @supabase and @vercel",url:"https://twitter.com/jperelli/status/1366195769657720834",handle:"jperelli",img_url:"/images/twitter-profiles/_ki30kYo_400x400.jpg"},{text:"Badass! Supabase is amazing. literally saves our small team a whole engineer\u2019s worth of work constantly. The founders and everyone I\u2019ve chatted with at supabase are just awesome people as well :)",url:"https://twitter.com/KennethCassel/status/1524359528619384834",handle:"KennethCassel",img_url:"/images/twitter-profiles/pmQj3TX-_400x400.jpg"},{text:"Working with Supabase is just fun. It makes working with a DB so much easier.",url:"https://twitter.com/the_BrianB/status/1524716498442276864",handle:"the_BrianB",img_url:"/images/twitter-profiles/7NITI8Z3_400x400.jpg"},{text:"This community is STRONG and will continue to be the reason why developers flock to @supabase over an alternative. Keep up the good work! \u26a1\ufe0f",url:"https://twitter.com/_wilhelm__/status/1524074865107488769",handle:"_wilhelm__",img_url:"/images/twitter-profiles/CvqDy6YF_400x400.jpg"},{text:"Working on my next SaaS app and I want this to be my whole job because I'm just straight out vibing putting it together. @supabase and chill, if you will",url:"https://twitter.com/drewclemcr8/status/1523843155484942340",handle:"drewclemcr8",img_url:"/images/twitter-profiles/bJlKtSxz_400x400.jpg"},{text:"@supabase Putting a ton of well-explained example API queries in a self-building documentation is just a classy move all around. I also love having GraphQL-style nested queries with traditional SQL filtering. This is pure DX delight. A+++. #backend",url:"https://twitter.com/CodiferousCoder/status/1522233113207836675",handle:"CodiferousCoder",img_url:"/images/twitter-profiles/t37cVLwy_400x400.jpg"},{text:"Me using @supabase for the first time right now \ud83e\udd2f",url:"https://twitter.com/nasiscoe/status/1365140856035024902",handle:"nasiscoe",img_url:"/images/twitter-profiles/nc2Ms5hH_400x400.jpg"},{text:"I'm trying @supabase, Firebase alternative that uses PostgreSQL (and you can use GraphQL too) in the cloud. It's incredible \ud83d\ude0d",url:"https://twitter.com/JP__Gallegos/status/1365699468109242374",handle:"JP__Gallegos",img_url:"/images/twitter-profiles/1PH2mt6v_400x400.jpg"},{text:"Check out this amazing product @supabase. A must give try #newidea #opportunity",url:"https://twitter.com/digitaldaswani/status/1364447219642814464",handle:"digitaldaswani",img_url:"/images/twitter-profiles/w8HLdlC7_400x400.jpg"},{text:"I gave @supabase a try this weekend and I was able to create a quick dashboard to visualize the data from the PostgreSQL instance. It's super easy to use Supabase's API or the direct DB connection. Check out the tutorial \ud83d\udcd6",url:"https://twitter.com/razvanilin/status/1363770020581412867",handle:"razvanilin",img_url:"/images/twitter-profiles/AiaH9vJ2_400x400.jpg"},{text:"Tried @supabase for the first time yesterday. Amazing tool! I was able to get my Posgres DB up in no time and their documentation on operating on the DB is super easy! \ud83d\udc4f Can't wait for Cloud functions to arrive! It's gonna be a great Firebase alternative!",url:"https://twitter.com/chinchang457/status/1363347740793524227",handle:"chinchang457",img_url:"/images/twitter-profiles/LTw5OCnv_400x400.jpg"},{text:"10/100 All day i was migrating my project from firebase to @supabase Because it is perfect and simple!!! I like design and API for understandable. There are in BETA now. Just try!\ud83e\uddea",url:"https://twitter.com/roomahhka/status/1363155396391763971",handle:"roomahhka",img_url:"/images/twitter-profiles/e_2eQt6C_400x400.jpg"},{text:"I gave @supabase a try today and I was positively impressed! Very quick setup to get a working remote database with API access and documentation generated automatically for you \ud83d\udc4c 10/10 will play more",url:"https://twitter.com/razvanilin/status/1363002398738800640",handle:"razvanilin",img_url:"/images/twitter-profiles/AiaH9vJ2_400x400.jpg"},{text:"Wait. Is it so easy to write queries for @supabase ? It's like simple SQL stuff!",url:"https://twitter.com/T0ny_Boy/status/1362911838908911617",handle:"T0ny_Boy",img_url:"/images/twitter-profiles/UCBhUBZl_400x400.jpg"},{text:"Jeez, and @supabase have native support for magic link login?! I was going to use http://magic.link for this But if I can get my whole DB + auth + magic link support in one... Awesome",url:"https://twitter.com/louisbarclay/status/1362016666868154371",handle:"louisbarclay",img_url:"/images/twitter-profiles/6f1O8ZOW_400x400.jpg"},{text:"@MongoDB or @MySQL?!?! Please, let me introduce you to @supabase and the wonderful world of @PostgreSQL before it's too late!!",url:"https://twitter.com/jim_bisenius/status/1361772978841788416",handle:"jim_bisenius",img_url:"/images/twitter-profiles/rLgwUZSB_400x400.jpg"},{text:"Where has @supabase been all my life? \ud83d\ude0d",url:"https://twitter.com/Elsolo244/status/1360257201911320579",handle:"Elsolo244",img_url:"/images/twitter-profiles/v6citnk33y2wpeyzrq05_400x400.jpeg"},{text:"Honestly Supabase is such a killer Firebase alternative.",url:"https://twitter.com/XPCheese/status/1360229397735895043",handle:"XPCheese",img_url:"/images/twitter-profiles/eYP6YXr7_400x400.jpg"},{text:"I think you'll love @supabase :-) Open-source, PostgreSQL-based & zero magic.",url:"https://twitter.com/zippoxer/status/1360021315852328961",handle:"zippoxer",img_url:"/images/twitter-profiles/6rd3xub9_400x400.png"},{text:"@supabase is the answer to all of firebase\u2019s problems imo",url:"https://twitter.com/jim_bisenius/status/1358590362953142278",handle:"jim_bisenius",img_url:"/images/twitter-profiles/rLgwUZSB_400x400.jpg"},{text:"@supabase is insane.",url:"https://twitter.com/codewithbhargav/status/1357647840911126528",handle:"codewithbhargav",img_url:"/images/twitter-profiles/LQYfHXBp_400x400.jpg"},{text:"It\u2019s fun, feels lightweight, and really quick to spin up user auth and a few tables. Almost too easy! Highly recommend.",url:"https://twitter.com/nerdburn/status/1356857261495214085",handle:"nerdburn",img_url:"/images/twitter-profiles/66VSV9Mm_400x400.png"},{text:"I\u2019m probably the wrong person to ask because I pick tools based on UX. Supabase was immediately approachable: instant setup, fast web app, auth, and easy APIs. Same reason I liked Firebase when I first discovered.",url:"https://twitter.com/jasonbarone/status/1357015483619422210",handle:"jasonbarone",img_url:"/images/twitter-profiles/6zCnwpvi_400x400.jpg"},{text:"Now things are starting to get interesting! Firebase has long been the obvious choice for many #flutter devs for the ease of use. But their databases are NoSQL, which has its downsides... Seems like @supabase is working on something interesting here!",url:"https://twitter.com/RobertBrunhage/status/1356973695865085953",handle:"RobertBrunhage",img_url:"/images/twitter-profiles/5LMWEACf_400x400.jpg"},{text:"Honestly, I really love what @supabase is doing, you don't need to own a complete backend, just write your logic within your app and you'll get a powerful Postgresql at your disposal.",url:"https://twitter.com/NavicsteinR/status/1356927229217959941",handle:"NavicsteinR",img_url:"/images/twitter-profiles/w_zNZAs7_400x400.jpg"},{text:"Next.js, @supabase, @stripe, and @vercel. Supastack\u2122",url:"https://twitter.com/jasonbarone/status/1356765411832922115",handle:"jasonbarone",img_url:"/images/twitter-profiles/6zCnwpvi_400x400.jpg"},{text:"I've really enjoyed the DX! Extremely fun to use, which is odd to say about a database at least for me.",url:"https://twitter.com/Soham_Asmi/status/1373086068132745217",handle:"Soham_Asmi",img_url:"/images/twitter-profiles/Os4nhKIr_400x400.jpg"},{text:"Supabase team is doing some awesome stuff #supabase #facts @supabase",url:"https://twitter.com/_strawbird/status/1372607500499841025",handle:"_strawbird",img_url:"/images/twitter-profiles/iMBvvQdn_400x400.jpg"},{text:"Did a website with @supabase last week with no prior experience with it. Up and running in 20 minutes. It's awesome to use. Thumbs up",url:"https://twitter.com/michael_webdev/status/1352885366928404481?s=20",handle:"michael_webdev",img_url:"/images/twitter-profiles/SvAyLaWV_400x400.jpg"},{text:"Next.js, @supabase, @stripe, and @vercel. Supastack\u2122",url:"https://twitter.com/jasonbarone/status/1356765411832922115?s=20",handle:"jasonbarone",img_url:"/images/twitter-profiles/6zCnwpvi_400x400.jpg"},{text:"I just learned about @supabase and im in love \ud83d\ude0d Supabase is an open source Firebase alternative! EarListen (& react) to database changes \ud83d\udc81 Manage users & permissions \ud83d\udd27 Simple UI for database interaction",url:"https://twitter.com/0xBanana/status/1373677301905362948",handle:"0xBanana",img_url:"/images/twitter-profiles/pgHIGqZ0_400x400.jpg"}],N=(0,s.Pi)((function(e){var t=e.heading,r=e.subheading,s=e.showDisclaimer,a=void 0===s||s,u=e.logoLinkToMarketingSite,d=void 0!==u&&u,p=e.children,f=(0,j.v)(),x=(0,i.oR)().ui,N=(0,g.NL)(),S=x.theme;(0,n.useEffect)((function(){var e=new URLSearchParams(location.search),t=e.has("returnTo"),r=e.has("next");!t&&!r&&(0,h.Z)(v().mark((function e(){var t,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.I8.initialize();case 2:if(t=e.sent,!t.error){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,b.I8.getSession();case 8:if(r=e.sent,!r.data.session){e.next=15;break}return e.next=13,N.resetQueries();case 13:return e.next=15,f();case 15:case"end":return e.stop()}}),e)})))()}),[]);var P=(0,n.useState)(null),C=P[0],I=P[1];return(0,n.useEffect)((function(){var e=k[Math.floor(Math.random()*k.length)];I(e)}),[]),(0,l.jsxs)(l.Fragment,{children:[m.Qy&&(0,l.jsx)(y.default,{children:(0,l.jsx)("script",{dangerouslySetInnerHTML:{__html:"window._getReturnToPath = ".concat(b.nD.toString(),";if (localStorage.getItem('").concat(b.Uf,"') && !(new URLSearchParams(location.search).has('next'))) {location.replace(window._getReturnToPath())}")}})}),(0,l.jsxs)("div",{className:"flex flex-col flex-1 bg-scale-100",children:[(0,l.jsx)("div",{className:"absolute top-0 w-full px-8 pt-6 mx-auto sm:px-6 lg:px-8",children:(0,l.jsxs)("nav",{className:"relative flex items-center justify-between sm:h-10",children:[(0,l.jsx)("div",{className:"flex items-center flex-grow flex-shrink-0 lg:flex-grow-0",children:(0,l.jsx)("div",{className:"flex items-center justify-between w-full md:w-auto",children:(0,l.jsx)(o.default,{href:d?"https://supabase.com":"/projects",children:(0,l.jsx)("a",{children:(0,l.jsx)(w.default,{src:"dark"==S?"/img/supabase-dark.svg":"/img/supabase-light.svg",alt:"Supabase Logo",height:24,width:120})})})})}),(0,l.jsx)("div",{className:"items-center hidden space-x-3 md:ml-10 md:flex md:pr-4",children:(0,l.jsx)(o.default,{href:"https://supabase.com/docs",children:(0,l.jsx)("a",{target:"_blank",children:(0,l.jsx)(c.zxk,{type:"default",icon:(0,l.jsx)(c.k_6,{}),children:"Documentation"})})})})]})}),(0,l.jsxs)("div",{className:"flex flex-1",children:[(0,l.jsxs)("main",{className:"flex flex-col items-center flex-1 flex-shrink-0 px-5 pt-16 pb-8 border-r shadow-lg bg-scale-200 border-scale-500",children:[(0,l.jsxs)("div",{className:"flex-1 flex flex-col justify-center w-[384px]",children:[(0,l.jsxs)("div",{className:"mb-10",children:[(0,l.jsx)("h1",{className:"mt-8 mb-2 text-2xl lg:text-3xl",children:t}),(0,l.jsx)("h2",{className:"text-sm text-scale-1100",children:r})]}),p]}),a&&(0,l.jsx)("div",{className:"sm:text-center",children:(0,l.jsxs)("p",{className:"text-xs text-scale-900 sm:mx-auto sm:max-w-sm",children:["By continuing, you agree to Supabase's"," ",(0,l.jsx)(o.default,{href:"https://supabase.com/terms",children:(0,l.jsx)("a",{className:"underline hover:text-scale-1100",children:"Terms of Service"})})," ","and"," ",(0,l.jsx)(o.default,{href:"https://supabase.com/privacy",children:(0,l.jsx)("a",{className:"underline hover:text-scale-1100",children:"Privacy Policy"})}),", and to receive periodic emails with updates."]})})]}),(0,l.jsx)("aside",{className:"flex-col items-center justify-center flex-1 flex-shrink hidden basis-1/4 xl:flex",children:null!==C&&(0,l.jsxs)("div",{className:"relative flex flex-col gap-6",children:[(0,l.jsx)("div",{className:"absolute select-none -top-12 -left-11",children:(0,l.jsx)("span",{className:"text-[160px] leading-none text-scale-600",children:"\u201c"})}),(0,l.jsx)("blockquote",{className:"z-10 max-w-lg text-3xl",children:C.text}),(0,l.jsxs)("a",{href:C.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4",children:[(0,l.jsx)("img",{src:"https://supabase.com".concat(C.img_url),alt:C.handle,className:"w-12 h-12 rounded-full"}),(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsxs)("cite",{className:"not-italic font-medium text-scale-1100 whitespace-nowrap",children:["@",C.handle]})})]})]})})]})]})]})})),S=(0,s.Pi)((function(e){var t=e.heading,r=e.subheading,n=e.logoLinkToMarketingSite,s=void 0!==n&&n,a=e.showHeadings,c=void 0===a||a,u=e.children,d=(0,i.oR)().ui.theme;return(0,l.jsxs)("div",{className:"flex-1 bg-scale-200 flex flex-col gap-8 lg:gap-16 xl:gap-32",children:[(0,l.jsx)("div",{className:"sticky top-0 mx-auto w-full max-w-7xl px-8 pt-6 sm:px-6 lg:px-8",children:(0,l.jsx)("nav",{className:"relative flex items-center justify-between sm:h-10",children:(0,l.jsx)("div",{className:"flex flex-shrink-0 flex-grow items-center lg:flex-grow-0",children:(0,l.jsx)("div",{className:"flex w-full items-center justify-between md:w-auto",children:(0,l.jsx)(o.default,{href:s?"https://supabase.com":"/projects",children:(0,l.jsx)("a",{children:(0,l.jsx)(w.default,{src:"dark"==d?"/img/supabase-dark.svg":"/img/supabase-light.svg",alt:"",height:24,width:120})})})})})})}),(0,l.jsx)("div",{className:"flex flex-col justify-center items-center",children:(0,l.jsxs)("main",{className:"max-w-[448px] w-full flex flex-col px-5",children:[c&&(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h1",{className:"text-2xl lg:text-3xl mt-8 mb-2",children:t}),(0,l.jsx)("h2",{className:"text-scale-1100 text-sm",children:r})]}),u]})})]})})),P=r(97588),C=r(79305),I=r(98784),O=r(38480),R=r(24532),Z=function(e){var t=e.condition,r=e.children,s=e.wrap;return t?(0,n.cloneElement)(s(r)):r},_=function(e){var t=e.route,r=e.isActive,n=void 0!==r&&r;return(0,l.jsxs)(R.fC,{delayDuration:0,children:[(0,l.jsx)(R.xz,{children:(0,l.jsx)(Z,{condition:void 0!==t.link,wrap:function(e){return(0,l.jsx)(o.default,{href:t.link,children:e})},children:(0,l.jsx)("a",{className:["transition-colors duration-200","flex items-center justify-center h-10 w-10 rounded","bg-scale-200 hover:bg-scale-500","text-scale-900 hover:text-scale-1200 ","".concat(n?"bg-scale-500 shadow-sm text-scale-1200":"")].join(" "),children:t.icon})})}),(0,l.jsxs)(R.VY,{side:"right",children:[(0,l.jsx)(R.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:["bg-scale-100 shadow py-1 px-2 rounded leading-none","border border-scale-200 "].join(" "),children:(0,l.jsx)("span",{className:"text-scale-1200 text-xs",children:t.label})})]})]})},T=r(49886),E=(0,s.Pi)((function(e){(0,C.Z)(e);var t=(0,a.useRouter)(),r=(0,T.U)().ref,n=(0,i.oR)().ui,s=n.selectedProjectBaseInfo,u=(0,i.P5)("ongoingIncident"),d=t.pathname.split("/")[3],f=function(e,t){var r=(null===t||void 0===t?void 0:t.status)===m.S.COMING_UP,n=(null===t||void 0===t?void 0:t.status)===m.S.INACTIVE,s="/project/".concat(e),a="/project/".concat(e,"/building");return[{key:"editor",label:"Table Editor",icon:(0,l.jsx)(O.Z,{src:"/img/table-editor.svg",style:{width:"".concat(18,"px"),height:"".concat(18,"px")},preProcessor:function(e){return e.replace(/svg/,'svg class="m-auto text-color-inherit"')}}),link:e&&(n?s:r?a:"/project/".concat(e,"/editor"))},{key:"sql",label:"SQL Editor",icon:(0,l.jsx)(O.Z,{src:"/img/sql-editor.svg",style:{width:"".concat(18,"px"),height:"".concat(18,"px")},preProcessor:function(e){return e.replace(/svg/,'svg class="m-auto text-color-inherit"')}}),link:e&&(n?s:r?a:"/project/".concat(e,"/sql"))}]}(r,s),h=function(e,t){var r=(null===t||void 0===t?void 0:t.status)!==m.S.ACTIVE_HEALTHY,n=(null===t||void 0===t?void 0:t.status)===m.S.INACTIVE,s="/project/".concat(e),a="/project/".concat(e,"/building");return[{key:"database",label:"Database",icon:(0,l.jsx)(c.OQ8,{size:18,strokeWidth:2}),link:e&&(n?s:r?a:"/project/".concat(e,"/database/tables"))},{key:"auth",label:"Authentication",icon:(0,l.jsx)(c.SrG,{size:18,strokeWidth:2}),link:e&&(n?s:r?a:"/project/".concat(e,"/auth/users"))},{key:"storage",label:"Storage",icon:(0,l.jsx)(c.fO3,{size:18,strokeWidth:2}),link:e&&(n?s:r?a:"/project/".concat(e,"/storage/buckets"))}].concat((0,p.Z)(m.Qy?[{key:"functions",label:"Edge Functions",icon:(0,l.jsx)(c.seM,{size:18,strokeWidth:2}),link:e&&(n?s:r?a:"/project/".concat(e,"/functions"))}]:[]))}(r,s),x=function(e,t){var r=(null===t||void 0===t?void 0:t.status)===m.S.COMING_UP,n=(null===t||void 0===t?void 0:t.status)===m.S.INACTIVE,s="/project/".concat(e),a="/project/".concat(e,"/building");return[].concat((0,p.Z)(m.Qy?[{key:"reports",label:"Reports",icon:(0,l.jsx)(c.NZQ,{size:18,strokeWidth:2}),link:e&&(n?s:r?a:"/project/".concat(e,"/reports"))}]:[]),(0,p.Z)(m.Qy?[{key:"logs",label:"Logs",icon:(0,l.jsx)(c.ZdG,{size:18,strokeWidth:2}),link:e&&(n?s:r?a:"/project/".concat(e,"/logs/explorer"))}]:[]),[{key:"api",label:"API Docs",icon:(0,l.jsx)(c.k_6,{size:18,strokeWidth:2}),link:e&&(n?s:r?a:"/project/".concat(e,"/api"))}],(0,p.Z)(m.Qy?[{key:"settings",label:"Project Settings",icon:(0,l.jsx)(c.iCC,{size:18,strokeWidth:2}),link:e&&"/project/".concat(e,"/settings/general")}]:[]))}(r,s);return(0,l.jsxs)("div",{style:{height:u?"calc(100vh - 44px)":"100vh"},className:["flex w-14 flex-col justify-between overflow-y-hidden p-2","border-r bg-sidebar-light dark:border-dark dark:bg-sidebar-dark"].join(" "),children:[(0,l.jsxs)("ul",{className:"flex flex-col space-y-2",children:[(0,l.jsx)(o.default,{href:"/projects",children:(0,l.jsx)("a",{className:"block",children:(0,l.jsx)("img",{src:"/img/supabase-logo.svg",alt:"Supabase",className:"mx-auto h-[40px] w-6 cursor-pointer rounded"})})}),(0,l.jsx)(_,{isActive:(0,I.isUndefined)(d)&&!(0,I.isUndefined)(t.query.ref),route:{key:"HOME",label:"Home",icon:(0,l.jsx)(c.A2c,{size:18,strokeWidth:2}),link:"/project/".concat(r)}}),(0,l.jsx)("div",{className:"bg-scale-500 h-px w-full"}),f.map((function(e){return(0,l.jsx)(_,{route:e,isActive:d===e.key},e.key)})),(0,l.jsx)("div",{className:"bg-scale-500 h-px w-full"}),h.map((function(e){return(0,l.jsx)(_,{route:e,isActive:d===e.key},e.key)})),(0,l.jsx)("div",{className:"h-px w-full bg-scale-500"}),x.map((function(e){return(0,l.jsx)(_,{route:e,isActive:d===e.key},e.key)}))]}),(0,l.jsx)("ul",{className:"flex flex-col space-y-2",children:(0,l.jsx)(c.Ltx,{side:"right",align:"start",overlay:(0,l.jsxs)(l.Fragment,{children:[m.Qy&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.default,{href:"/account/me",children:(0,l.jsx)(c.Ltx.Item,{icon:(0,l.jsx)(c.iCC,{size:14,strokeWidth:1.5}),children:"Account Preferences"},"header")}),(0,l.jsx)(c.Ltx.Separator,{})]}),(0,l.jsx)(c.Ltx.Label,{children:"Theme"}),(0,l.jsxs)(c.Ltx.RadioGroup,{value:n.themeOption,onChange:function(e){return n.onThemeOptionChange(e)},children:[(0,l.jsx)(c.Ltx.Radio,{value:"system",children:"System default"}),(0,l.jsx)(c.Ltx.Radio,{value:"dark",children:"Dark"}),(0,l.jsx)(c.Ltx.Radio,{value:"light",children:"Light"})]},"theme")]}),children:(0,l.jsx)(c.zxk,{as:"span",type:"text",size:"tiny",children:(0,l.jsx)("div",{className:"py-1",children:(0,l.jsx)(c.f7T,{size:18,strokeWidth:2})})})})})]})})),L=function(e){var t=e.title,r=e.children,n=(0,i.P5)("ongoingIncident")?"calc(100vh - 44px)":"100vh";return(0,l.jsxs)("div",{style:{height:n,maxHeight:n},className:["hide-scrollbar flex w-64 flex-col border-r","bg-sidebar-linkbar-light","dark:bg-sidebar-linkbar-dark dark:border-dark "].join(" "),children:[(0,l.jsx)("div",{className:"dark:border-dark flex max-h-12 items-center border-b px-6",style:{minHeight:"3rem"},children:(0,l.jsx)("h4",{className:"text-lg",children:t})}),(0,l.jsx)("div",{className:"flex-grow overflow-y-auto",children:r})]})},A=(0,s.Pi)((function(e){var t=e.defaultValue;return(0,l.jsx)(l.Fragment,{children:null!==t&&void 0!==t&&t.length?t.map((function(e){return(0,l.jsxs)(n.Fragment,{children:[(0,l.jsx)("span",{className:"text-scale-800 dark:text-scale-700",children:(0,l.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",children:(0,l.jsx)("path",{d:"M16 3.549L7.12 20.600"})})}),(0,l.jsx)("a",{onClick:e.onClick||function(){},className:"text-gray-1100 block px-2 py-1 text-xs leading-5 focus:bg-gray-100 focus:text-gray-900 focus:outline-none ".concat(e.onClick?"cursor-pointer hover:text-white":""),children:e.label})]},e.key)})):null})})),z=r(79588),F=(0,s.Pi)((function(){var e=(0,a.useRouter)(),t=(0,i.oR)(),r=t.app,n=t.ui,s=r.organizations.list(),o=n.selectedOrganization;return m.Qy?(0,l.jsx)(c.Ltx,{side:"bottom",align:"start",overlay:(0,l.jsxs)(l.Fragment,{children:[s.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(t){var r=(0,z.ZN)(t.slug);return(0,l.jsx)(c.Ltx.Item,{onClick:function(){var t;if(!r)return n.setNotification({category:"error",message:"Could not navigate to organization settings, please try again or contact support"});e.push({pathname:"/org/[slug]/general",query:{slug:r},hash:null===(t=e.asPath.split("#")[1])||void 0===t?void 0:t.toLowerCase()})},children:t.name},r)})),(0,l.jsx)(c.Ltx.Separator,{}),(0,l.jsx)(c.Ltx.Item,{icon:(0,l.jsx)(c.SC9,{size:"tiny"}),onClick:function(){return e.push("/new")},children:"New organization"})]}),children:(0,l.jsx)(c.zxk,{as:"span",type:"text",size:"tiny",children:o.name})}):(0,l.jsx)(c.zxk,{as:"span",type:"text",size:"tiny",children:o.name})})),D=(0,s.Pi)((function(){var e,t,r,n=(0,i.oR)(),s=n.app,u=n.ui,d=s.projects.list(),p=null===(e=u.selectedOrganization)||void 0===e?void 0:e.slug,f=u.selectedProject,h=(0,a.useRouter)(),x=(t=h.route,r=h.query,Object.entries(r).length>1?t.split("/").slice(0,4).join("/"):t);return m.Qy?(0,l.jsx)(c.Ltx,{side:"bottom",align:"start",overlay:(0,l.jsxs)(l.Fragment,{children:[d.filter((function(e){return e.status!==m.S.INACTIVE})).sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){var t;return(0,l.jsx)(o.default,{href:null!==(t=null===x||void 0===x?void 0:x.replace("[ref]",e.ref))&&void 0!==t?t:"/project/".concat(e.ref),passHref:!0,children:(0,l.jsx)("a",{className:"block",children:(0,l.jsx)(c.Ltx.Item,{children:e.name})})},e.ref)})),(0,l.jsx)(c.J2e.Separator,{}),(0,l.jsx)(o.default,{href:"/new/".concat(p),children:(0,l.jsx)("a",{className:"block",children:(0,l.jsx)(c.Ltx.Item,{icon:(0,l.jsx)(c.SC9,{size:"tiny"}),children:"New project"})})})]}),children:(0,l.jsx)(c.zxk,{as:"span",type:"text",size:"tiny",className:"my-1",children:f.name})}):(0,l.jsx)(c.zxk,{as:"span",type:"text",size:"tiny",children:f.name})})),B=r(11246),U=r(83763),M=r(14919),W=r(14620),H=r(98574),Q=function(e){for(var t="image/png",r=atob(e.substr("data:".concat(t,";base64,").length)),n=[],s=0;s<r.length;s+=1024){for(var a=r.slice(s,s+1024),i=new Array(a.length),o=0;o<a.length;o++)i[o]=a.charCodeAt(o);var c=new Uint8Array(i);n.push(c)}return new Blob(n,{type:t})},Y=function(){var e=(0,h.Z)(v().mark((function e(t,r){var n,s,a,i,o,c,l,u,d;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,W.eI)("https://mfrkmguhoejspftfvgdz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYyNzg4NjQ0MCwiZXhwIjoxOTQzNDYyNDQwfQ.wRGmWXOORz-cxVBof4WLOSxRog9Tdff1P8gI72U8ta8",{auth:{persistSession:!1,autoRefreshToken:!1,multiTab:!1,detectSessionInUrl:!1,localStorage:{getItem:function(e){},setItem:function(e,t){},removeItem:function(e){}}}}),s=Q(r),a="".concat(t||"no-project","/").concat((0,H.k$)(),".png"),i={cacheControl:"3600"},e.next=6,n.storage.from("feedback-attachments").upload(a,s,i);case 6:if(o=e.sent,c=o.data,!(l=o.error)){e.next=12;break}return console.error("Failed to upload:",l),e.abrupt("return",void 0);case 12:if(!c){e.next=18;break}return e.next=15,n.storage.from("feedback-attachments").createSignedUrls([c.path],31536e4);case 15:return u=e.sent,d=u.data,e.abrupt("return",null===d||void 0===d?void 0:d[0].signedUrl);case 18:return e.abrupt("return",void 0);case 19:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),G=function(e){var t=e.onClose,r=e.feedback,s=e.setFeedback,u=e.screenshot,d=e.setScreenshot,p=(0,a.useRouter)(),f=p.query.ref,x=(0,i.oR)().ui,g=(0,n.useRef)(null),j=(0,n.useRef)(),b=(0,n.useState)(!1),y=b[0],w=b[1],k=(0,n.useState)(!1),N=k[0],S=k[1];(0,n.useEffect)((function(){var e;null===g||void 0===g||null===(e=g.current)||void 0===e||e.focus()}),[g]);var P=function(){var e=(0,h.Z)(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){var t;return!((null!==(t=null===e||void 0===e?void 0:e.children)&&void 0!==t?t:[]).length>0)||"feedback-widget"!==e.children[0].id},S(!0),e.next=4,(0,H.Vs)(100);case 4:(0,U.YM)(document.body,{filter:t}).then((function(e){return d(e)})).catch((function(e){x.setNotification({error:e,category:"error",message:"Failed to capture screenshot",duration:4e3})})).finally((function(){S(!1)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,h.Z)(v().mark((function e(t){var r,n,s,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.persist(),r=t.target.files||t.dataTransfer.items,n=(0,B.Z)(r,1),s=n[0],(a=new FileReader).onload=function(e){var t;d(null===(t=e.target)||void 0===t?void 0:t.result)},a.readAsDataURL(s),t.target.value="";case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=(0,h.Z)(v().mark((function e(){var n,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r.length||void 0===u){e.next=4;break}return e.abrupt("return",x.setNotification({category:"error",message:"Please include a message in your feedback.",duration:4e3}));case 4:if(!(r.length>0)){e.next=20;break}if(w(!0),!u){e.next=12;break}return e.next=9,Y(f,u);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=void 0;case 13:return n=e.t0,a=void 0!==n?"".concat(r,"\n\nAttachments:\n").concat(n):r,e.next=17,(0,M.v_)("".concat(m.T5,"/feedback/send"),{message:a,pathname:p.asPath,category:"Feedback",projectRef:f,tags:["dashboard-feedback"]});case 17:w(!1),s(""),x.setNotification({category:"success",message:"Feedback sent. Thank you!"});case 20:return e.abrupt("return",t());case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.jsxs)("div",{id:"feedback-widget",className:"text-area-text-sm",children:[(0,l.jsx)(c.IIB.TextArea,{className:"w-80 p-3",size:"small",placeholder:"Ideas on how to improve this page.\nUse the Support Form for technical issues.",rows:5,value:r,onChange:function(e){s(e.target.value)}}),(0,l.jsx)(c.J2e.Separator,{}),(0,l.jsxs)("div",{className:"w-80 space-y-3 px-3 py-2 pb-4",children:[(0,l.jsxs)("div",{className:"flex justify-between space-x-2",children:[(0,l.jsx)(c.zxk,{type:"default",onClick:t,className:"hover:border-gray-500",children:"Cancel"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[void 0!==u?(0,l.jsx)("div",{style:{backgroundImage:'url("'.concat(u,'")')},onClick:function(){var e=Q(u),t=URL.createObjectURL(e);window.open(t,"_blank")},className:"cursor-pointer rounded h-[26px] w-[30px] border border-scale-600 relative bg-cover bg-center bg-no-repeat",children:(0,l.jsx)("div",{className:["cursor-pointer rounded-full bg-red-900 h-3 w-3","flex items-center justify-center absolute -top-1 -right-1"].join(" "),onClick:function(e){e.stopPropagation(),d(void 0)},children:(0,l.jsx)(c.kLi,{size:8,strokeWidth:3})})}):(0,l.jsx)(c.Ltx,{className:"feedback-dropdown",size:"small",overlay:[(0,l.jsx)(c.Ltx.Item,{icon:(0,l.jsx)(c.bCE,{size:14}),onClick:function(){j.current&&j.current.click()},children:"Upload screenshot"}),(0,l.jsx)(c.Ltx.Item,{icon:(0,l.jsx)(c.LjT,{size:14}),onClick:function(){return P()},children:"Capture screenshot"})],children:(0,l.jsx)(c.zxk,{as:"span",type:"default",disabled:N,loading:N,className:"px-2 py-1.5",icon:(0,l.jsx)(c.Zay,{size:14})})}),(0,l.jsx)("input",{type:"file",ref:j,className:"hidden",accept:"image/png",onChange:C}),(0,l.jsx)(c.zxk,{disabled:y,loading:y,onClick:I,children:"Send feedback"})]})]}),(0,l.jsxs)("p",{className:"text-xs text-scale-1000",children:["Have a technical issue? Contact"," ",(0,l.jsx)(o.default,{href:"/support/new",children:(0,l.jsx)("a",{children:(0,l.jsx)("span",{className:"cursor-pointer text-brand-900 transition-colors hover:text-brand-1200",children:"Supabase support"})})})," ","or"," ",(0,l.jsx)("a",{href:"https://supabase.com/docs",target:"_blank",children:(0,l.jsx)("span",{className:"cursor-pointer text-brand-900 transition-colors hover:text-brand-1200",children:"browse our docs"})}),"."]})]})]})},q=function(){var e=(0,n.useState)(!1),t=e[0],r=e[1],s=(0,n.useState)(""),a=s[0],i=s[1],o=(0,n.useState)(),u=o[0],d=o[1];return(0,l.jsx)(c.J2e,{open:t,onOpenChange:function(e){r(e),e||d(void 0)},size:"content",side:"bottom",align:"end",overlay:(0,l.jsx)(G,{onClose:function(){i(""),d(void 0),r(!1)},feedback:a,setFeedback:i,screenshot:u,setScreenshot:d}),children:(0,l.jsxs)(c.zxk,{as:"span",onClick:function(){r((function(e){return!e}))},type:"default",icon:(0,l.jsx)(c.HOU,{size:16,strokeWidth:1.5,className:"text-scale-900"}),children:[(0,l.jsx)("span",{className:"block md:hidden",children:"Feedback"}),(0,l.jsx)("span",{className:"hidden md:block",children:"Feedback on this page?"})]})})},V=function(){var e=(0,a.useRouter)().query.ref,t="/support/new".concat(e?"?ref=".concat(e):"");return(0,l.jsx)(c.J2e,{size:"content",align:"end",side:"bottom",sideOffset:8,overlay:(0,l.jsxs)("div",{className:"my-4 w-96 space-y-4",children:[(0,l.jsxs)("div",{className:"my-5 space-y-4 px-5",children:[(0,l.jsx)("h5",{className:"text-scale-1200",children:"Need help with your project?"}),(0,l.jsx)("p",{className:"text-sm text-scale-900",children:"For issues with your project hosted on supabase.com, or other inquiries about our hosted services."}),(0,l.jsxs)("div",{className:"space-x-1",children:[(0,l.jsx)(o.default,{passHref:!0,href:t,children:(0,l.jsx)(c.zxk,{type:"default",icon:(0,l.jsx)(c.haR,{}),as:"a",children:"Contact Support"})}),(0,l.jsx)(o.default,{passHref:!0,href:"https://supabase.com/docs/",children:(0,l.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,l.jsx)(c.zxk,{type:"text",size:"tiny",icon:(0,l.jsx)(c.sDS,{}),children:"Docs"})})}),(0,l.jsx)(o.default,{passHref:!0,href:"https://status.supabase.com/",children:(0,l.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,l.jsx)(c.zxk,{type:"text",size:"tiny",icon:(0,l.jsx)(c.zGS,{}),children:"Supabase Status"})})})]}),(0,l.jsx)("p",{className:"text-sm text-scale-900",children:"Expected response time is based on your billing tier. Pro and Pay as You Go plans are prioritised."})]}),(0,l.jsx)(c.J2e.Separator,{}),(0,l.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,l.jsxs)("div",{className:"mb-4 px-5",children:[(0,l.jsx)("h5",{className:"mb-2",children:"Reach out to the community"}),(0,l.jsx)("p",{className:"text-sm text-scale-900",children:"For other support, including questions on our client libraries, advice, or best practices."})]}),(0,l.jsx)("div",{className:"px-5",children:(0,l.jsx)("div",{className:"relative space-y-2 overflow-hidden rounded px-5 py-4 pb-12 shadow-md",style:{background:"#404EED"},children:(0,l.jsxs)("a",{href:"https://discord.supabase.com",target:"_blank",className:"dark block cursor-pointer",children:[(0,l.jsx)(w.default,{className:"absolute left-0 top-0 opacity-50",src:"/img/support/discord-bg-small.jpg",layout:"fill",objectFit:"cover",alt:"discord illustration header"}),(0,l.jsx)(c.zxk,{type:"secondary",icon:(0,l.jsx)(O.Z,{src:"/img/discord-icon.svg",className:"h-4 w-4"}),children:(0,l.jsx)("span",{style:{color:"#404EED"},children:"Join Discord server"})})]})})}),(0,l.jsx)("div",{className:"px-5",children:(0,l.jsx)("div",{className:"relative space-y-2 overflow-hidden rounded px-5 py-4 pb-12 shadow-md",children:(0,l.jsxs)("a",{href:"https://github.com/supabase/supabase/discussions",target:"_blank",className:"block cursor-pointer",children:[(0,l.jsx)(w.default,{className:"absolute left-0 top-0 opacity-50",src:"/img/support/github-bg.jpg?v-1",layout:"fill",objectFit:"cover",alt:"discord illustration header"}),(0,l.jsx)(c.zxk,{type:"secondary",icon:(0,l.jsx)(c.HOU,{}),children:"GitHub Discussions"})]})})})]})]}),children:(0,l.jsx)(c.zxk,{as:"span",type:"default",icon:(0,l.jsx)(c.Sus,{size:16,strokeWidth:1.5,className:"text-scale-900"}),children:"Help"})})},J=r(90849),K=r(27693),X=r.n(K),$=r(25478),ee=r(36492),te=function(){return["notifications"]},re=function(e,t,r){var n=e.name;if(t.data.name===$.O0.ProjectExceedingTierLimit){var s=t.data.violations.map((function(e){return e.dimension})).reduce((function(e,t){return"".concat(e,", ").concat(t)}));return(0,l.jsxs)("p",{className:"text-sm",children:['Your project "',n,'" has exceeded its limits in the following areas:'," ",s,"."]})}if(t.data.name===$.O0.PostgresqlUpgradeAvailable){var a=t.data,i=a.upgrade_type,u=a.additional;if("postgresql-server"===i){var d=u.version_to;return(0,l.jsxs)("p",{className:"text-sm",children:["New version of Postgres (",d,') is now available for project "',n,'".']})}if("extensions"===i){var p=u,m=p.name,f=p.version_to;return(0,l.jsxs)("p",{className:"text-sm",children:['New version of "',m,'" (',f,') is now available for project "',n,'".']})}if("schema-migration"===i){var h=u,x=h.name,v=h.version_to;return(0,l.jsxs)("div",{className:"text-sm space-y-1",children:[(0,l.jsxs)("p",{children:['A new schema migration is available for your project "',n,'".']}),(0,l.jsx)("ol",{className:"list-disc pl-6",children:(0,l.jsx)("li",{children:(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)("p",{children:x}),(0,l.jsx)(c.Ec8,{size:12,strokeWidth:2}),(0,l.jsx)("p",{children:v})]})})})]})}return""}if(t.data.name!==$.O0.PostgresqlUpgradeCompleted){if(t.data.name===$.O0.ProjectUpdateCompleted){var g=t.data.upgrades;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm",children:['The following services have been successfully updated for project "',n,'":']}),(0,l.jsx)("ol",{className:"list-disc pl-6",children:g.map((function(e){return(0,l.jsx)("li",{children:(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)("p",{className:"text-sm",children:e.name}),(0,l.jsx)(c.Ec8,{size:12,strokeWidth:2}),(0,l.jsx)("p",{className:"text-sm",children:e.version_to}),e.changelog_link&&(0,l.jsx)("div",{className:"!ml-4",children:(0,l.jsx)(o.default,{href:e.changelog_link,children:(0,l.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,l.jsx)(c.TqL,{className:"cursor-pointer text-scale-1000 hover:text-scale-1200 transition",size:12,strokeWidth:2})})})})]})},e.name)}))})]})}return t.data.name===$.O0.ProjectInformational?(0,l.jsx)("p",{className:"text-sm",children:t.data.message}):(0,l.jsxs)("p",{className:"text-sm",children:["Unknown notification type: ",t.notification_name," - Please reach out to support for more information."]})}var j=t.data,b=j.upgrade_type,y=j.additional;if("postgresql-server"===b){var w=y.version_to;return(0,l.jsxs)("p",{className:"text-sm",children:["Postgres (",w,") has been successfully updated to ",w,' for project "',n,'".']})}if("extensions"===b){var k=y,N=k.name,S=k.version_to;return(0,l.jsxs)("p",{className:"text-sm",children:['The extension "',N,'" has been successfully updated to ',S,' for project "',n,'".']})}if("schema-migration"===b){var P=y.version_to;return"unmigrated"===(null===r||void 0===r?void 0:r.desired)?(0,l.jsxs)("p",{className:"text-sm",children:['The schema migration "',P,'" will be applied for project "',n,"\" within a few days. You may opt to apply the changes now, or it'll be done so automatically."]}):"temp_role"===(null===r||void 0===r?void 0:r.desired)?(0,l.jsxs)("p",{className:"text-sm",children:['The schema migration "',P,'" will be finalized for project "',n,"\" within a few days. You may opt to finalize the changes now, or it'll be done so automatically."]}):(0,l.jsxs)("p",{className:"text-sm",children:['The schema migration "',P,'" has been successfully applied for project "',n,'".']})}},ne=function(e,t){var r=(0,B.Z)(e,1)[0];if(!r)return(0,l.jsx)("p",{className:"text-sm"});switch(r.action_type){case $.Us.SchedulePostgresRestart:return(0,l.jsx)("p",{className:"text-sm",children:"Restart your project to get the latest updates."});case $.Us.UpgradeProjectToPro:return(0,l.jsx)("p",{className:"text-sm",children:"Upgrade your project to ensure continued availability."});case $.Us.PgBouncerRestart:return(0,l.jsx)("p",{className:"text-sm",children:"Restart your connection pooler to get the latest updates."});case $.Us.MigratePostgresSchema:var n;return r.deadline?"migrated"===(null===t||void 0===t?void 0:t.desired)?(0,l.jsxs)("p",{className:"text-sm space-x-1",children:["This patch was applied on"," ",X()(new Date(null!==(n=t.migrated_at)&&void 0!==n?n:r.deadline)).format("DD MMM YYYY, HH:mma")]}):"temp_role"===(null===t||void 0===t?void 0:t.desired)?r.reason===$.Fi.Finalize?(0,l.jsxs)("p",{className:"text-sm space-x-1",children:["This patch will be automatically applied after"," ",X()(new Date(r.deadline)).format("DD MMM YYYY, HH:mma")]}):(0,l.jsxs)("p",{className:"text-sm space-x-1",children:["This patch was applied on"," ",X()(new Date(t.modified_at)).format("DD MMM YYYY, HH:mma")]}):(0,l.jsxs)("p",{className:"text-sm space-x-1",children:["This patch will be automatically applied after"," ",X()(new Date(r.deadline)).format("DD MMM YYYY, HH:mma")]}):"";default:return""}},se=function(e){var t=e.project,r=e.changelogLink,s=e.ownerReassignStatus,i=e.availableActions,u=e.onSelectRestartProject,d=e.onSelectApplyMigration,p=e.onSelectRollbackMigration,m=e.onSelectFinalizeMigration,f=(0,a.useRouter)(),h=function(){return f.push("/project/".concat(t.ref,"/settings/billing/update/pro"))},x=function(e){switch(e.action_type){case $.Us.UpgradeProjectToPro:return(0,l.jsx)(c.zxk,{type:"default",onClick:h,children:"Upgrade project"});case $.Us.SchedulePostgresRestart:return(0,l.jsx)(c.zxk,{type:"default",onClick:u,children:"Restart project"});case $.Us.MigratePostgresSchema:return e.reason===$.Fi.Finalize?"migrated"!==(null===s||void 0===s?void 0:s.desired)&&(0,l.jsx)(c.zxk,{type:"default",onClick:m,children:"Finalize"}):e.reason===$.Fi.Rollback?"temp_role"===(null===s||void 0===s?void 0:s.desired)&&(0,l.jsx)(c.zxk,{type:"default",onClick:p,children:"Rollback"}):"unmigrated"===(null===s||void 0===s?void 0:s.desired)&&(0,l.jsx)(c.zxk,{type:"default",onClick:d,children:"Apply now"})}};return(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[i.map((function(e){return(0,l.jsx)(n.Fragment,{children:x(e)},"".concat(e.action_type,"_").concat(e.reason))})),r&&(0,l.jsx)(o.default,{href:r,children:(0,l.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,l.jsx)(c.zxk,{as:"span",type:"default",icon:(0,l.jsx)(c.TqL,{size:12,strokeWidth:2}),children:"More info"})})})]})},ae=function(e){var t,r,s=e.notification,a=e.onSelectRestartProject,o=e.onSelectApplyMigration,u=e.onSelectRollbackMigration,d=e.onSelectFinalizeMigration,p=(0,i.oR)(),f=p.app,x=p.ui,j=(0,g.NL)(),b=(0,n.useState)(!1),y=b[0],w=b[1],k=f.projects.list((function(e){return e.id===s.project_id})),N=(0,B.Z)(k,1)[0],S=X()(s.inserted_at).format("DD MMM YYYY, HH:mma"),P=s.data.changelog_link,C=null!==(t=null===(r=s.meta)||void 0===r?void 0:r.actions_available)&&void 0!==t?t:[],I=(0,ee.a)(["projects",N.ref,"owner-reassign"],(function(e){var t=e.signal;return(0,M.U2)("".concat(m.T5,"/database/").concat(N.ref,"/owner-reassign"),{signal:t})}),{enabled:"schema-migration"===s.data.upgrade_type}).data,O=function(){var e=(0,h.Z)(v().mark((function e(t){var r,n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return w(!0),e.next=5,(0,M.$v)("".concat(m.T5,"/notifications"),{ids:[t]});case 5:if(r=e.sent,!(n=r.error)){e.next=11;break}x.setNotification({category:"error",message:"Failed to dismiss notification",error:n,duration:4e3}),e.next=13;break;case 11:return e.next=13,j.invalidateQueries(te());case 13:w(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,l.jsxs)("div",{className:"flex py-2",children:[(0,l.jsx)("div",{className:"flex min-w-[50px] justify-center",children:s.notification_status!==$.Ez.Seen&&(0,l.jsx)("div",{className:"mt-1.5 h-2 w-2 rounded-full bg-green-900"})}),(0,l.jsxs)("div",{className:"flex-grow mr-8 flex flex-col gap-4",children:[(0,l.jsxs)("div",{className:"w-full flex justify-between",children:[(0,l.jsxs)("div",{className:"w-9/10 space-y-2",children:[re(N,s,I),ne(C,I),(0,l.jsx)("p",{className:"text-scale-1100 text-sm !mt-2",children:S})]}),(0,l.jsx)("div",{className:"w-1/10 flex justify-end",children:(0,l.jsx)("div",{children:(0,l.jsxs)(R.fC,{delayDuration:0,children:[(0,l.jsx)(R.xz,{children:(0,l.jsx)(c.zxk,{className:"!px-1 group",type:"text",loading:y,icon:(0,l.jsx)(c.kLi,{size:14,strokeWidth:2,className:"text-scale-1100 group-hover:text-scale-1200 transition"}),onClick:function(){return O(s.id)}})}),(0,l.jsxs)(R.VY,{side:"bottom",children:[(0,l.jsx)(R.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,l.jsx)("span",{className:"text-xs text-scale-1200",children:"Dismiss"})})]})]})})})]}),(C.length>0||void 0!==P)&&(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)(se,{project:N,changelogLink:P,ownerReassignStatus:I,availableActions:C,onSelectRestartProject:function(){return a(N,s)},onSelectApplyMigration:function(){return o(N,s)},onSelectRollbackMigration:function(){return u(N,s)},onSelectFinalizeMigration:function(){return d(N,s)}})})]})]})},ie=r(96364);function oe(e){return ce.apply(this,arguments)}function ce(){return(ce=(0,h.Z)(v().mark((function e(t){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,M.U2)("".concat(m.T5,"/notifications"),{signal:t});case 2:if(!(r=e.sent).error){e.next=5;break}throw r.error;case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var le=function(){var e,t,r,s,o,u,d,p,f,x,g,j,b,y,w,k,N,S,P=(0,a.useRouter)(),C=(0,i.oR)(),I=C.app,O=C.meta,R=C.ui,Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,ee.a)(te(),(function(e){return oe(e.signal)}),e)}(),_=Z.data,T=Z.refetch,E=(0,n.useState)(),L=E[0],A=E[1],z=(0,n.useState)(),F=z[0],D=z[1],B=(0,n.useState)(),U=B[0],W=B[1],H=(0,n.useState)(),Q=H[0],Y=H[1],G=(0,n.useState)(),q=G[0],V=G[1];if(!_)return(0,l.jsx)(l.Fragment,{});var K=null===_||void 0===_?void 0:_.some((function(e){return e.notification_status===$.Ez.New})),re=function(){var e=(0,h.Z)(v().mark((function e(t){var r,n,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=9;break}if(!((r=_.filter((function(e){return e.notification_status===$.Ez.New})).map((function(e){return e.id}))).length>0)){e.next=9;break}return e.next=5,(0,M.r$)("".concat(m.T5,"/notifications"),{ids:r});case 5:n=e.sent,(s=n.error)&&console.error("Failed to update notifications",s),T();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=(0,h.Z)(v().mark((function e(){var t,r,n,s,a,i,o,c,l;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L&&q){e.next=2;break}return e.abrupt("return");case 2:return r=q.id,n=L.id,s=L.ref,a=L.region,t={},(0,J.Z)(t,$.Us.PgBouncerRestart,"pgbouncer"),(0,J.Z)(t,$.Us.SchedulePostgresRestart,"postgresql"),(0,J.Z)(t,$.Us.MigratePostgresSchema,"postgresql"),i=t,o=q.meta.actions_available.map((function(e){return e.action_type})).filter((function(e){return-1!==Object.keys(i).indexOf(e)})).map((function(e){return i[e]})),e.next=8,(0,M.v_)("".concat(m.T5,"/projects/").concat(s,"/restart-services"),{restartRequest:{region:a,source_notification_id:r,services:o}});case 8:c=e.sent,(l=c.error)?R.setNotification({category:"error",message:"Failed to restart project: ".concat(l.message),error:l}):(I.onProjectPostgrestStatusUpdated(n,"OFFLINE"),R.setNotification({category:"success",message:"Restarting services"}),P.push("/project/".concat(s))),A(void 0),V(void 0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=(0,h.Z)(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,M.v_)("".concat(m.T5,"/database/").concat(F.ref,"/owner-reassign"),{});case 4:if((t=e.sent).error){e.next=11;break}return e.next=8,I.projects.fetchDetail(F.ref,(function(e){return O.setProjectDetails(e)}));case 8:R.setNotification({category:"success",message:'Successfully applied migration for project "'.concat(F.name,'"')}),e.next=12;break;case 11:R.setNotification({error:t.error,category:"error",message:"Failed to apply migration: ".concat(t.error.message)});case 12:D(void 0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=(0,h.Z)(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,M.$v)("".concat(m.T5,"/database/").concat(U.ref,"/owner-reassign"),{});case 4:if((t=e.sent).error){e.next=11;break}return e.next=8,I.projects.fetchDetail(U.ref,(function(e){return O.setProjectDetails(e)}));case 8:R.setNotification({category:"success",message:'Successfully rolled back migration for project "'.concat(U.name,'"')}),e.next=12;break;case 11:R.setNotification({error:t.error,category:"error",message:"Failed to roll back migration: ".concat(t.error.message)});case 12:W(void 0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=(0,h.Z)(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,M.r$)("".concat(m.T5,"/database/").concat(Q.ref,"/owner-reassign"),{});case 4:if((t=e.sent).error){e.next=11;break}return e.next=8,I.projects.fetchDetail(Q.ref,(function(e){return O.setProjectDetails(e)}));case 8:R.setNotification({category:"success",message:'Successfully finalized migration for project "'.concat(Q.name,'"')}),e.next=12;break;case 11:R.setNotification({error:t.error,category:"error",message:"Failed to finalize migration: ".concat(t.error.message)});case 12:Y(void 0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.J2e,{size:"content",align:"end",side:"bottom",sideOffset:8,onOpenChange:re,overlay:(0,l.jsxs)("div",{className:"w-[400px] lg:w-[700px]",children:[(0,l.jsx)("div",{className:"flex items-center justify-between border-b border-gray-500 bg-gray-400 px-4 py-2",children:(0,l.jsx)("p",{className:"text-sm",children:"Notifications"})}),(0,l.jsx)("div",{className:"max-h-[380px] overflow-y-auto py-2",children:0===_.length?(0,l.jsx)("div",{className:"py-2 px-4",children:(0,l.jsx)("p",{className:"text-sm text-scale-1000",children:"No notifications available"})}):(0,l.jsx)(l.Fragment,{children:_.map((function(e,t){return(0,l.jsxs)(n.Fragment,{children:[(0,l.jsx)(ae,{notification:e,onSelectRestartProject:function(e,t){A(e),V(t)},onSelectApplyMigration:function(e,t){D(e),V(t)},onSelectRollbackMigration:function(e,t){W(e),V(t)},onSelectFinalizeMigration:function(e,t){Y(e),V(t)}}),t!==_.length-1&&(0,l.jsx)(c.J2e.Separator,{})]},e.id)}))})})]}),children:(0,l.jsxs)("div",{className:"relative flex",children:[(0,l.jsx)(c.zxk,{as:"span",id:"notification-button",type:"default",icon:(0,l.jsx)(c.YK1,{size:16,strokeWidth:1.5,className:"text-scale-1200"})}),K&&(0,l.jsxs)("div",{className:"absolute -top-1 -right-1 z-50 flex h-3 w-3 items-center justify-center",children:[(0,l.jsx)("div",{className:"h-full w-full animate-ping rounded-full bg-green-800 opacity-60"}),(0,l.jsx)("div",{className:"z-60 absolute top-0 right-0 h-full w-full rounded-full bg-green-900 opacity-80"})]})]})}),(0,l.jsx)(ie.Z,{danger:!0,visible:void 0!==L,title:'Restart project "'.concat(null===L||void 0===L?void 0:L.name,'"'),description:"Are you sure you want to restart the project? There will be a few minutes of downtime.",buttonLabel:"Restart",buttonLoadingLabel:"Restarting",onSelectCancel:function(){return A(void 0)},onSelectConfirm:ne}),(0,l.jsx)(ie.Z,{size:"large",visible:void 0!==F,title:'Apply schema migration for "'.concat(null===F||void 0===F?void 0:F.name,'"'),description:(0,l.jsxs)("div",{className:"text-scale-1200 space-y-2",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{children:"The following schema migration will be applied to the project"}),(0,l.jsx)("ol",{className:"list-disc pl-6",children:(0,l.jsx)("li",{children:(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)("p",{children:null===q||void 0===q||null===(e=q.data)||void 0===e||null===(t=e.additional)||void 0===t?void 0:t.name}),(0,l.jsx)(c.Ec8,{size:12,strokeWidth:2}),(0,l.jsx)("p",{children:null===q||void 0===q||null===(r=q.data)||void 0===r||null===(s=r.additional)||void 0===s?void 0:s.version_to})]})})})]}),(0,l.jsxs)("p",{children:["This change can be rolled back anytime up till"," ",X()(new Date(null!==(o=null===q||void 0===q||null===(u=q.meta.actions_available)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.deadline)&&void 0!==o?o:0)).format("DD MMM YYYY, HH:mma ZZ"),", after which the changes will be finalized and can no longer be undone."]})]}),buttonLabel:"Confirm",buttonLoadingLabel:"Confirm",onSelectCancel:function(){return D(void 0)},onSelectConfirm:se}),(0,l.jsx)(ie.Z,{size:"medium",visible:void 0!==U,title:'Rollback schema migration for "'.concat(null===U||void 0===U?void 0:U.name,'"'),description:(0,l.jsxs)("div",{className:"text-scale-1200 space-y-2",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{children:"The following schema migration will be rolled back for the project"}),(0,l.jsx)("ol",{className:"list-disc pl-6",children:(0,l.jsx)("li",{children:(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)("p",{children:null===q||void 0===q||null===(p=q.data)||void 0===p||null===(f=p.additional)||void 0===f?void 0:f.name}),(0,l.jsx)(c.Ec8,{size:12,strokeWidth:2}),(0,l.jsx)("p",{children:null===q||void 0===q||null===(x=q.data)||void 0===x||null===(g=x.additional)||void 0===g?void 0:g.version_to})]})})})]}),(0,l.jsxs)("p",{children:["This migration however will still be applied and finalized after"," ",X()(new Date(null!==(j=null===q||void 0===q||null===(b=q.meta.actions_available)||void 0===b||null===(y=b[0])||void 0===y?void 0:y.deadline)&&void 0!==j?j:0)).format("DD MMM YYYY, HH:mma ZZ"),", after which the changes can no longer be undone."]})]}),buttonLabel:"Confirm",buttonLoadingLabel:"Confirm",onSelectCancel:function(){return W(void 0)},onSelectConfirm:ce}),(0,l.jsx)(ie.Z,{danger:!0,size:"small",visible:void 0!==Q,title:'Finalize schema migration for "'.concat(null===Q||void 0===Q?void 0:Q.name,'"'),description:(0,l.jsxs)("div",{className:"text-scale-1200 space-y-4",children:[(0,l.jsx)(c.bZj,{withIcon:!0,variant:"warning",title:"This action canot be undone"}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{children:"The following schema migration will be finalized for the project"}),(0,l.jsx)("ol",{className:"list-disc pl-6",children:(0,l.jsx)("li",{children:(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)("p",{children:null===q||void 0===q||null===(w=q.data)||void 0===w||null===(k=w.additional)||void 0===k?void 0:k.name}),(0,l.jsx)(c.Ec8,{size:12,strokeWidth:2}),(0,l.jsx)("p",{children:null===q||void 0===q||null===(N=q.data)||void 0===N||null===(S=N.additional)||void 0===S?void 0:S.version_to})]})})})]})]}),buttonLabel:"Confirm",buttonLoadingLabel:"Confirm",onSelectCancel:function(){return Y(void 0)},onSelectConfirm:le})]})},ue=r(45322),de=r(83282),pe=r(47510),me=(0,s.Pi)((function(e){var t,r,n,s,a=e.customHeaderComponents,u=e.breadcrumbs,d=void 0===u?[]:u,p=e.headerBorder,f=void 0===p||p,h=(0,i.oR)().ui,x=h.selectedOrganization,v=h.selectedProject,g=(0,i.UO)().ref,j=(0,pe.d2)().project,b=(0,de.VP)({projectRef:null===j||void 0===j?void 0:j.ref,connectionString:null===j||void 0===j?void 0:j.connectionString}).data,y=(0,ue.DK)({projectRef:g}).data,w=(s=y)?(0,I.compact)(Object.keys(s).map((function(e){var t=s[e];if(t.usage/t.limit>=1)return e}))):[],k=(null===(t=h.selectedProject)||void 0===t?void 0:t.subscription_tier)===m.ev.PAYG||(null===(r=h.selectedProject)||void 0===r?void 0:r.subscription_tier)===m.ev.ENTERPRISE||(null===(n=h.selectedProject)||void 0===n?void 0:n.subscription_tier)===m.ev.TEAM;void 0!==(null===v||void 0===v?void 0:v.subscription_tier)&&!k&&w.length;return(0,l.jsxs)("div",{className:"flex h-12 max-h-12 items-center justify-between py-2 px-5 ".concat(f?"border-b dark:border-dark":""),children:[(0,l.jsxs)("div",{className:"-ml-2 flex items-center text-sm",children:[x?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(F,{}),v&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-scale-800 dark:text-scale-700",children:(0,l.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",children:(0,l.jsx)("path",{d:"M16 3.549L7.12 20.600"})})}),(0,l.jsx)(D,{}),b&&(0,l.jsx)("div",{className:"ml-2",children:(0,l.jsx)(o.default,{href:"/project/".concat(g,"/settings/billing/usage"),children:(0,l.jsx)("a",{children:(0,l.jsx)(c.Cts,{color:"red",children:"Project is in read-only mode"})})})})]})]}):(0,l.jsx)(o.default,{href:"/projects",children:(0,l.jsx)("a",{className:"cursor-pointer px-2 py-1 text-xs text-scale-1200 focus:bg-transparent focus:outline-none",children:"Supabase"})}),(0,l.jsx)(A,{defaultValue:d})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[a&&a,m.Qy&&(0,l.jsx)(V,{}),m.Qy&&(0,l.jsx)(q,{}),m.Qy&&(0,l.jsx)(le,{})]})]})})),fe=r(71714),he=r(6159),xe=(0,s.Pi)((function(e){var t=e.project,r=(0,i.oR)().app,s=(0,n.useRef)(),a=(0,n.useState)(!1),u=a[0],d=a[1],p=(0,n.useState)(!1),m=p[0],f=p[1];(0,n.useEffect)((function(){var e=setTimeout((function(){return d(!0)}),3e4);return function(){return clearTimeout(e)}}),[]),(0,n.useEffect)((function(){if(t.restUrl)return s.current=window.setInterval(x,4e3),function(){clearInterval(s.current)}}),[t]);var x=function(){var e=(0,h.Z)(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,he.Z)(t.restUrl,t.ref,{kpsVersion:t.kpsVersion});case 2:e.sent&&(clearInterval(s.current),r.onProjectPostgrestStatusUpdated(t.id,"ONLINE"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"mx-auto my-16 w-full max-w-7xl space-y-16",children:(0,l.jsxs)("div",{className:"mx-6 space-y-16",children:[(0,l.jsxs)("div",{className:"flex flex-col space-y-4 lg:flex-row lg:items-center lg:space-y-0 lg:space-x-6",children:[(0,l.jsx)("h1",{className:"text-3xl",children:t.name}),(0,l.jsx)("div",{children:(0,l.jsx)(c.Cts,{color:"brand",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(c.pAw,{className:"animate-spin",size:12}),(0,l.jsx)("span",{children:"Connecting to project"})]})})})]}),(0,l.jsx)("div",{className:"flex h-[500px] items-center justify-center rounded border border-scale-400 bg-scale-300 p-8",children:(0,l.jsxs)("div",{className:"w-[420px] space-y-4",children:[(0,l.jsxs)("div",{className:"mx-auto flex max-w-[300px] items-center justify-center space-x-4 lg:space-x-8",children:[(0,l.jsx)(c.rei,{className:"text-scale-1100",size:50,strokeWidth:1.5}),(0,l.jsx)(fe.Z,{active:!0}),(0,l.jsx)(c.IJ_,{className:"text-scale-1100",size:50,strokeWidth:1.5})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("p",{className:"text-center",children:["Connecting to ",t.name]}),(0,l.jsx)("p",{className:"cursor-pointer text-center text-sm text-scale-1100 opacity-60 transition hover:opacity-100",onClick:function(){return f(!0)},children:"This may take a few minutes"})]}),(0,l.jsx)("div",{className:"flex flex-col items-center",children:u&&(0,l.jsx)(c.zxk,{type:"default",onClick:function(){return f(!0)},children:"Still connecting?"})})]})})]})}),(0,l.jsx)(c.u_l,{visible:m,onCancel:function(){return f(!1)},header:(0,l.jsx)("div",{className:"flex items-baseline gap-2",children:(0,l.jsx)("h5",{className:"text-sm text-scale-1200",children:"Checking the health of your database"})}),size:"medium",hideFooter:!0,closable:!0,children:(0,l.jsx)("div",{className:"py-4",children:(0,l.jsx)(c.u_l.Content,{children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("p",{className:"text-sm text-scale-1200",children:["Your project might be facing resource constraints and hence is having trouble connecting. You can verify this by checking your"," ",(0,l.jsx)("span",{className:"text-brand-1000",children:(0,l.jsx)(o.default,{href:"/project/".concat(t.ref,"/settings/database"),children:(0,l.jsx)("a",{children:"database's health"})})})," ","or your remaining daily disk IO budget via a"," ",(0,l.jsx)("span",{className:"text-brand-1000",children:(0,l.jsx)(o.default,{href:"/project/".concat(t.ref,"/reports"),children:(0,l.jsx)("a",{children:"customizable project report"})})}),"."]}),(0,l.jsxs)("p",{className:"text-sm text-scale-1200",children:["If your project is facing resource constraints, you can"," ",(0,l.jsx)("span",{className:"text-brand-1000",children:(0,l.jsx)(o.default,{href:"/project/".concat(t.ref,"/reports"),children:(0,l.jsx)("a",{children:"upgrade"})})})," ","your project's subscription to a Pro for access to larger compute sizes."]}),(0,l.jsxs)("p",{className:"text-sm text-scale-1200",children:["However, if your project still fails to connect thereafter, you can open a support ticket"," ",(0,l.jsx)("span",{className:"text-brand-1000",children:(0,l.jsx)(o.default,{href:"/support/new?ref=".concat(t.ref),children:"here"})}),"."]})]})})})})]})})),ve=function(e){var t=e.project;return(0,l.jsx)("div",{className:"mx-auto my-16 w-full max-w-7xl space-y-16",children:(0,l.jsxs)("div",{className:"mx-6 space-y-16",children:[(0,l.jsxs)("div",{className:"flex flex-col space-y-4 lg:flex-row lg:items-center lg:space-y-0 lg:space-x-6",children:[(0,l.jsx)("h1",{className:"text-3xl",children:t.name}),(0,l.jsx)("div",{children:(0,l.jsx)(c.Cts,{color:"gray",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(c.pAw,{className:"animate-spin",size:12}),(0,l.jsx)("span",{children:"Pausing project"})]})})})]}),(0,l.jsx)("div",{className:"mx-auto mt-8 mb-16 w-full max-w-7xl",children:(0,l.jsx)("div",{className:"mx-6 flex h-[500px] items-center justify-center rounded border border-scale-400 bg-scale-300 p-8",children:(0,l.jsxs)("div",{className:"grid w-[380px] gap-4",children:[(0,l.jsxs)("div",{className:"relative mx-auto max-w-[300px]",children:[(0,l.jsx)("div",{className:"absolute flex h-full w-full items-center justify-center",children:(0,l.jsx)(c.pAw,{className:"animate-spin",size:20,strokeWidth:2})}),(0,l.jsx)(c.f4m,{className:"text-scale-900",size:50,strokeWidth:1.5})]}),(0,l.jsxs)("p",{className:"text-center",children:["Pausing ",t.name]}),(0,l.jsx)("p",{className:"mt-4 text-center text-sm text-scale-1100",children:"You may restore your project anytime thereafter, and your data will be restored to when it was initially paused."})]})})})]})})},ge=r(1693),je=r(34465),be=r(95925),ye=r(941);function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){(0,J.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ne=(0,s.Pi)((function(e){var t=e.project,r=(0,i.oR)(),s=(r.ui,r.app),a=(0,n.useRef)();function u(){return d.apply(this,arguments)}function d(){return(d=(0,h.Z)(v().mark((function e(){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,M.GC)("".concat(m.T5,"/projects/").concat(t.ref,"/status"),{timeout:2e3});case 4:if(!(r=e.sent)||r.error){e.next=11;break}if(r.status!==m.S.ACTIVE_HEALTHY){e.next=11;break}return clearInterval(a.current),e.next=11,s.projects.fetchDetail(t.ref);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,n.useEffect)((function(){return a.current=window.setInterval(u,4e3),function(){clearInterval(a.current)}}),[]),(0,l.jsxs)("div",{className:"mx-auto my-16 w-full max-w-6xl items-center justify-center",children:[(0,l.jsxs)("div",{className:"mx-6 flex flex-col space-y-16",children:[(0,l.jsxs)("div",{className:" flex flex-col gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("h1",{className:"text-3xl text-scale-1200",children:null===t||void 0===t?void 0:t.name}),(0,l.jsx)(c.Cts,{color:"brand",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(c.pAw,{className:"animate-spin",size:12}),(0,l.jsx)("span",{children:t.status===m.S.RESTORING?"Restoring project":"Setting up project"})]})})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm text-scale-1100",children:[" ","We are provisioning your database and API endpoints"]}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:" This may take a few minutes"})]})]}),(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:" grid grid-cols-12 gap-12",children:[(0,l.jsxs)("div",{className:"col-span-12 space-y-12 lg:col-span-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-base text-scale-1200",children:"While you wait"}),(0,l.jsx)(Se,{description:(0,l.jsxs)("p",{className:"text-sm text-scale-1100",children:["Browse the Supabase"," ",(0,l.jsx)(o.default,{href:"https://supabase.com/docs",children:(0,l.jsx)("a",{className:"mb-0 text-brand-900 transition-colors hover:text-brand-1200",target:"_blank",children:"documentation"})}),"."]})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-base text-scale-1200",children:"Not working?"}),(0,l.jsx)(Se,{description:(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"Try refreshing after a couple of minutes."})}),(0,l.jsx)("ul",{children:(0,l.jsx)(Se,{description:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"mb-4 text-sm text-scale-1100",children:"If your dashboard hasn't connected within 2 minutes, you can open a support ticket."}),(0,l.jsx)(o.default,{href:"/support/new",children:(0,l.jsx)(c.zxk,{type:"default",children:"Contact support team"})})]})})})]})]}),(0,l.jsxs)("div",{className:"col-span-12  lg:col-span-8",children:[(0,l.jsx)(ye.D,{}),(0,l.jsx)(ye.m,{})]})]})})]}),t.status===m.S.COMING_UP&&(0,l.jsxs)("div",{className:"mx-auto my-16 w-full max-w-7xl space-y-16",children:[(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsx)("div",{className:"mx-6",children:(0,l.jsx)("h5",{children:"Client libraries"})}),(0,l.jsx)("div",{className:"mx-6 mb-12 grid gap-12 md:grid-cols-3",children:be.l.map((function(e){return(0,l.jsx)(je.Z,ke({},e),e.language)}))})]}),(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsx)("div",{className:"mx-6",children:(0,l.jsx)("h5",{children:"Example projects"})}),(0,l.jsx)("div",{className:"mx-6 grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:be.B.map((function(e){return(0,l.jsx)(ge.Z,ke({},e),e.url)}))})]})]})]})})),Se=function(e){var t=e.description;return(0,l.jsxs)("li",{className:"my-3 flex flex-wrap space-x-3",children:[(0,l.jsx)("div",{className:"mt-0.5",children:(0,l.jsx)(c.Ec8,{className:"text-scale-900",size:"tiny"})}),(0,l.jsx)("div",{className:"flex-1",children:t})]})},Pe=function(e){(0,C.Z)(e);var t=(0,i.oR)(),r=t.app,s=t.ui,a=t.meta,u=s.selectedProject,d=(0,n.useRef)(),p=(0,n.useState)(!1),f=p[0],x=p[1],g=(0,n.useState)(!1),j=g[0],b=g[1],y=(0,n.useState)(!1),w=y[0],k=y[1];function N(){return S.apply(this,arguments)}function S(){return(S=(0,h.Z)(v().mark((function e(){var t,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,M.GC)("".concat(m.T5,"/projects/").concat(u.ref,"/status"),{timeout:2e3});case 4:(t=e.sent)&&!t.error&&((r=t.status)===m.S.RESTORATION_FAILED?(clearInterval(d.current),b(!0)):r===m.S.ACTIVE_HEALTHY&&(clearInterval(d.current),k(!0)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,n.useEffect)((function(){return d.current=window.setInterval(N,4e3),function(){return clearInterval(d.current)}}),[]);var P=function(){var e=(0,h.Z)(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,r.projects.fetchDetail(null!==(t=null===u||void 0===u?void 0:u.ref)&&void 0!==t?t:"",(function(e){return a.setProjectDetails(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,l.jsx)("div",{className:"bg-scale-300 border border-scale-400 rounded-md w-3/4 lg:w-1/2",children:w?(0,l.jsxs)("div",{className:"space-y-6 pt-6",children:[(0,l.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,l.jsx)("div",{className:"mt-1",children:(0,l.jsx)(c.Bu,{className:"text-brand-900",size:18,strokeWidth:2})}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{children:"Restoration complete!"}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"Your project has been successfully restored and is now back online."})]})]}),(0,l.jsx)("div",{className:"border-t border-scale-400 flex items-center justify-end py-4 px-8",children:(0,l.jsx)(c.zxk,{disabled:f,loading:f,onClick:P,children:"Return to project"})})]}):j?(0,l.jsxs)("div",{className:"space-y-6 pt-6",children:[(0,l.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,l.jsx)("div",{className:"mt-1",children:(0,l.jsx)(c.Ldj,{size:18,strokeWidth:2})}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{children:"Something went wrong while restoring your project"}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"Our engineers have already been notified of this, do hang tight while we are investigating into the issue."})]})]}),j&&(0,l.jsx)("div",{className:"border-t border-scale-400 flex items-center justify-end py-4 px-8",children:(0,l.jsx)(o.default,{href:"/support/new?category=Database_unresponsive&ref=".concat(null===u||void 0===u?void 0:u.ref,"&subject=Restoration%20failed%20for%20project"),children:(0,l.jsx)("a",{children:(0,l.jsx)(c.zxk,{type:"default",children:"Contact support"})})})})]}):(0,l.jsx)("div",{className:"space-y-6 py-6",children:(0,l.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,l.jsx)("div",{className:"mt-1",children:(0,l.jsx)(c.pAw,{className:"animate-spin",size:18})}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{children:"Restoration in progress"}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"Restoration can take from a few minutes up to several hours depending on the size of your database. Your project will be offline while the restoration is running."})]})]})})})})},Ce=function(e){var t,r=e.title,n=e.isLoading,s=void 0!==n&&n,a=e.product,o=void 0===a?"":a,c=e.productMenu,u=e.children,d=e.hideHeader,p=void 0!==d&&d,m=e.hideIconBar,f=void 0!==m&&m,h=(0,i.UO)().ref,x=(0,i.oR)().ui,v=(0,i.P5)("ongoingIncident"),g=null===(t=x.selectedProject)||void 0===t?void 0:t.name;return(0,l.jsxs)(pe.Ml,{projectRef:h,children:[(0,l.jsxs)(y.default,{children:[(0,l.jsx)("title",{children:r?"".concat(r," | Supabase"):g?"".concat(g," | Supabase"):"Supabase"}),(0,l.jsx)("meta",{name:"description",content:"Supabase Studio"}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,l.jsxs)("div",{className:"flex h-full",children:[!f&&(0,l.jsx)(E,{}),(0,l.jsx)(Re,{isLoading:s,productMenu:c,children:(0,l.jsx)(L,{title:o,children:c})}),(0,l.jsxs)("main",{className:"flex flex-col flex-1 w-full overflow-x-hidden",style:{height:v?"calc(100vh - 44px)":"100vh"},children:[!p&&(0,l.jsx)(me,{}),(0,l.jsx)(Ze,{isLoading:s,children:u})]})]})]})},Ie=(0,i.QO)((0,s.Pi)(Ce)),Oe=(0,s.Pi)(Ce),Re=(0,s.Pi)((function(e){var t=e.isLoading,r=e.productMenu,n=e.children,s=(0,i.oR)().ui;return(0,l.jsx)(l.Fragment,{children:!t&&r&&void 0!==s.selectedProject?n:null})})),Ze=(0,s.Pi)((function(e){var t,r,s,o,c,u=e.isLoading,d=e.children,p=(0,i.oR)().ui,f=(0,a.useRouter)(),h="/project/[ref]/settings/general"!==f.pathname,x=!["/project/[ref]/reports","/project/[ref]/settings/general","/project/[ref]/settings/database","/project/[ref]/settings/billing/subscription","/project/[ref]/settings/billing/update","/project/[ref]/settings/billing/update/free","/project/[ref]/settings/billing/update/pro"].includes(f.pathname),v=(null===(t=p.selectedProject)||void 0===t?void 0:t.status)===m.S.RESTORING,g=[m.S.COMING_UP,m.S.RESTORING].includes(null!==(r=null===(s=p.selectedProject)||void 0===s?void 0:s.status)&&void 0!==r?r:""),j=(null===(o=p.selectedProject)||void 0===o?void 0:o.status)===m.S.GOING_DOWN,b="OFFLINE"===(null===(c=p.selectedProject)||void 0===c?void 0:c.postgrestStatus);return(0,l.jsx)(l.Fragment,{children:u||void 0===p.selectedProject?(0,l.jsx)(P.Z,{}):j?(0,l.jsx)(ve,{project:p.selectedProject}):x&&b?(0,l.jsx)(xe,{project:p.selectedProject}):h&&v?(0,l.jsx)(Pe,{}):h&&g?(0,l.jsx)(Ne,{project:p.selectedProject}):(0,l.jsx)(n.Fragment,{children:d},p.selectedProject.ref)})})),_e=r(68043),Te=r(24954),Ee=(0,s.Pi)((function(e){var t=e.selectedSchema,r=e.onSelectSchema,s=void 0===r?function(){}:r,a=e.onAddTable,u=void 0===a?function(){}:a,d=e.onEditTable,p=void 0===d?function(){}:d,m=e.onDeleteTable,f=void 0===m?function(){}:m,x=e.onDuplicateTable,g=void 0===x?function(){}:x,j=(0,i.oR)().meta,b=(0,i.UO)(),y=b.id,w=b.ref,k=j.schemas.list(),N=j.tables.list((function(e){return e.schema===t})),S=j.views.list((function(e){return e.schema===t})),P=j.foreignTables.list((function(e){return e.schema===t})),C=0===N.filter((function(e){return e.schema===t})).length&&j.tables.isLoading,O=k.find((function(e){return e.name===t})),Z=(0,i.FH)(_e.KA.TENANT_SQL_ADMIN_WRITE,"tables"),_=(0,n.useState)(""),T=_[0],E=_[1],L=(0,n.useState)(!1),A=L[0],z=L[1],F=function(){var e=(0,h.Z)(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return z(!0),e.next=4,j.tables.loadBySchema(t);case 4:return e.next=6,j.views.loadBySchema(t);case 6:z(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=0===T.length?N:N.filter((function(e){return e.name.toLowerCase().includes(T.toLowerCase())})),U=0===T.length?S||[]:(S||[]).filter((function(e){var t;return(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"").toLowerCase().includes(T.toLowerCase())})),M=0===T.length?P:P.filter((function(e){var t;return(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"").toLowerCase().includes(T.toLowerCase())})),W=(0,I.partition)(k,(function(e){var t;return j.excludedSchemas.includes(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"")})),H=(0,B.Z)(W,2),Q=H[0],Y=H[1],G=Q.some((function(e){return e.id===(null===O||void 0===O?void 0:O.id)}));return(0,l.jsxs)("div",{className:"pt-6 flex flex-grow flex-col space-y-6",style:{maxHeight:"calc(100vh - 48px)"},children:[(0,l.jsx)("div",{className:"px-3 mx-4",children:j.schemas.isInitialized?(0,l.jsxs)(c.RiT,{size:"tiny",value:t,onChange:function(e){E(""),s(e)},children:[(0,l.jsx)(c.RiT.Option,{disabled:!0,value:"normal-schemas",label:"Schemas",children:(0,l.jsx)("p",{className:"text-xs text-scale-1100",children:"Schemas"})},"normal-schemas"),Y.map((function(e){return(0,l.jsx)(c.RiT.Option,{value:e.name,label:e.name,addOnBefore:function(){return(0,l.jsx)("span",{className:"text-scale-900 text-xs",children:"schema"})},children:(0,l.jsx)("span",{className:"text-scale-1200 text-xs",children:e.name})},e.id)})),(0,l.jsx)(c.RiT.Option,{disabled:!0,value:"protected-schemas",label:"Protected schemas",children:(0,l.jsx)("p",{className:"text-xs text-scale-1100",children:"Protected schemas"})},"protected-schemas"),Q.map((function(e){return(0,l.jsx)(c.RiT.Option,{value:e.name,label:e.name,addOnBefore:function(){return(0,l.jsx)("span",{className:"text-scale-900 text-xs",children:"schema"})},children:(0,l.jsx)("span",{className:"text-scale-1200 text-xs",children:e.name})},e.id)}))]}):(0,l.jsxs)("div",{className:"flex h-[26px] items-center space-x-3 rounded border border-gray-500 px-3",children:[(0,l.jsx)(c.pAw,{className:"animate-spin",size:12}),(0,l.jsx)("span",{className:"text-xs text-scale-900",children:"Loading schemas..."})]})}),(0,l.jsxs)("div",{className:"space-y-1 mx-4",children:[!G&&(0,l.jsx)("div",{className:"px-3",children:(0,l.jsxs)(R.fC,{delayDuration:0,children:[(0,l.jsx)(R.xz,{className:"w-full",children:(0,l.jsx)(c.zxk,{block:!0,as:"span",disabled:!Z,size:"tiny",icon:(0,l.jsx)("div",{className:"text-scale-900",children:(0,l.jsx)(c.yl5,{size:14,strokeWidth:1.5})}),type:"default",style:{justifyContent:"start"},onClick:u,children:"New table"})}),!Z&&(0,l.jsxs)(R.VY,{side:"bottom",children:[(0,l.jsx)(R.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,l.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to create tables"})})]})]})}),(0,l.jsx)("div",{className:"mb-2 block px-3",children:(0,l.jsx)(c.IIB,{className:"table-editor-search border-none",icon:(0,l.jsx)(c.jVj,{className:"text-scale-900",size:12,strokeWidth:1.5}),placeholder:"Search tables",onChange:function(e){return E(e.target.value)},value:T,size:"tiny",actions:T&&(0,l.jsx)(c.zxk,{size:"tiny",type:"text",onClick:function(){return E("")},children:(0,l.jsx)(c.kLi,{size:12,strokeWidth:2})})})})]}),C?(0,l.jsxs)("div",{className:"mx-7 flex items-center space-x-2",children:[(0,l.jsx)(c.pAw,{className:"animate-spin",size:14,strokeWidth:1.5}),(0,l.jsx)("p",{className:"text-sm text-scale-1000",children:"Loading tables..."})]}):0===T.length&&0===D.length&&0===U.length?(0,l.jsxs)("div",{className:"mx-7 space-y-1 rounded-md border border-scale-400 bg-scale-300 py-3 px-4",children:[(0,l.jsx)("p",{className:"text-xs",children:"No tables available"}),(0,l.jsx)("p",{className:"text-xs text-scale-1100",children:"This schema has no tables available yet"})]}):(0,l.jsxs)("div",{className:"flex-auto px-4 overflow-y-auto space-y-6 pb-4",children:[D.length>0&&(0,l.jsxs)(c.v2r,{type:"pills",children:[(0,l.jsx)(c.v2r.Group,{title:(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)("p",{children:"Tables"}),(0,l.jsxs)("p",{style:{fontVariantNumeric:"tabular-nums"},children:["(",D.length,")"]})]}),(0,l.jsx)("button",{className:"cursor-pointer",onClick:F,children:(0,l.jsx)(c.Kdl,{className:A?"animate-spin":"",size:14})})]})})}),(0,l.jsx)("div",{children:D.map((function(e){var t=Number(y)===e.id;return(0,l.jsx)(Te.Z,{url:"/project/".concat(w,"/editor/").concat(e.id),name:e.name,hoverText:e.comment?e.comment:e.name,isActive:t,action:t&&!G&&(0,l.jsx)(c.Ltx,{size:"small",side:"bottom",align:"start",overlay:[(0,l.jsx)(c.Ltx.Item,{icon:(0,l.jsx)(c.yl5,{size:"tiny"}),onClick:function(){return p(e)},children:"Edit Table"},"edit-table"),(0,l.jsx)(c.Ltx.Item,{icon:(0,l.jsx)(c.vUr,{size:"tiny"}),onClick:function(){return g(e)},children:"Duplicate Table"},"duplicate-table"),(0,l.jsx)(o.default,{href:"/project/".concat(w,"/auth/policies?search=").concat(e.id),children:(0,l.jsx)("a",{children:(0,l.jsx)(c.Ltx.Item,{icon:(0,l.jsx)(c._V1,{size:"tiny"}),children:"View Policies"},"delete-table")})}),(0,l.jsx)(c.Ltx.Separator,{},"separator"),(0,l.jsx)(c.Ltx.Item,{icon:(0,l.jsx)(c.IT9,{size:"tiny"}),onClick:function(){return f(e)},children:"Delete Table"},"delete-table")],children:(0,l.jsx)("div",{className:"text-scale-900 transition-colors hover:text-scale-1200",children:(0,l.jsx)(c.C26,{size:14,strokeWidth:2})})})},e.name)}))})]}),U.length>0&&(0,l.jsxs)(c.v2r,{type:"pills",children:[(0,l.jsx)(c.v2r.Group,{title:(0,l.jsxs)("div",{className:"flex w-full items-center space-x-1",children:[(0,l.jsx)("p",{children:"Views"}),(0,l.jsxs)("p",{style:{fontVariantNumeric:"tabular-nums"},children:["(",U.length,")"]})]})}),U.map((function(e){var t=Number(y)===e.id;return(0,l.jsx)(o.default,{href:"/project/".concat(w,"/editor/").concat(e.id,"?type=view"),children:(0,l.jsx)("a",{children:(0,l.jsx)(c.v2r.Item,{rounded:!0,active:t,children:(0,l.jsx)("div",{className:"flex justify-between",children:(0,l.jsx)("p",{className:"truncate",children:e.name})})},e.id)})},e.id)}))]}),M.length>0&&(0,l.jsxs)(c.v2r,{type:"pills",children:[(0,l.jsx)(c.v2r.Group,{title:(0,l.jsxs)("div",{className:"flex w-full items-center space-x-1",children:[(0,l.jsx)("p",{children:"Foreign Tables"}),(0,l.jsxs)("p",{style:{fontVariantNumeric:"tabular-nums"},children:["(",M.length,")"]})]})}),M.map((function(e){var t=Number(y)===e.id;return(0,l.jsx)(o.default,{href:"/project/".concat(w,"/editor/").concat(e.id,"?type=foreign"),children:(0,l.jsx)("a",{children:(0,l.jsx)(c.v2r.Item,{rounded:!0,active:t,children:(0,l.jsx)("div",{className:"flex justify-between",children:(0,l.jsx)("p",{className:"truncate",children:e.name})})},e.id)})},e.id)}))]})]}),T.length>0&&0===D.length&&0===U.length&&(0,l.jsxs)("div",{className:"!mt-0 mx-7 space-y-1 rounded-md border border-scale-400 bg-scale-300 py-3 px-4",children:[(0,l.jsx)("p",{className:"text-xs",children:"No results found"}),(0,l.jsx)("p",{className:"text-xs text-scale-1100",children:"There are no tables or views that match your search"})]})]})})),Le=r(38230),Ae=(0,s.Pi)((function(e){var t,r,s,a,o=e.selectedSchema,c=e.onSelectSchema,d=void 0===c?function(){}:c,p=e.onAddTable,m=void 0===p?function(){}:p,f=e.onEditTable,h=void 0===f?function(){}:f,x=e.onDeleteTable,v=void 0===x?function(){}:x,g=e.onDuplicateTable,j=void 0===g?function(){}:g,b=e.children,y=(0,i.oR)(),w=y.vault,k=y.meta,N=y.ui,S=(0,i.UO)(),P=S.id,C=S.type,O=k.tables,R=O.isInitialized,Z=O.isLoading,_=O.error,T=(0,n.useState)(R),E=T[0],L=T[1],A=(0,i.FH)(_e.KA.TENANT_SQL_ADMIN_READ,"tables"),z=k.extensions.byId("supabase_vault"),F=void 0!==z&&null!==z.installed_version;return(0,n.useEffect)((function(){var e;null!==(e=N.selectedProject)&&void 0!==e&&e.ref&&(k.schemas.load(),k.types.load(),k.policies.load(),k.publications.load(),k.extensions.load(),k.views.load(),k.foreignTables.load())}),[null===(t=N.selectedProject)||void 0===t?void 0:t.ref]),(0,n.useEffect)((function(){var e;o&&null!==(e=N.selectedProject)&&void 0!==e&&e.ref&&(k.tables.loadBySchema(o),k.views.loadBySchema(o))}),[null===(r=N.selectedProject)||void 0===r?void 0:r.ref,o]),(0,n.useEffect)((function(){var e;null!==(e=N.selectedProject)&&void 0!==e&&e.ref&&P&&"view"!==C&&"foreign"!==C&&k.tables.loadById(Number(P))}),[null===(s=N.selectedProject)||void 0===s?void 0:s.ref,P]),(0,n.useEffect)((function(){F&&w.load()}),[null===(a=N.selectedProject)||void 0===a?void 0:a.ref,F]),(0,n.useEffect)((function(){var e=!1;return Z||E||e||L(!0),function(){e=!0}}),[Z]),A?_?(0,l.jsx)(Oe,{children:(0,l.jsx)(u,{error:_})}):(0,l.jsx)(Oe,{isLoading:!E||(0,I.isUndefined)(o),product:"Table editor",productMenu:(0,l.jsx)(Ee,{selectedSchema:o,onSelectSchema:d,onAddTable:m,onEditTable:h,onDeleteTable:v,onDuplicateTable:j}),children:b}):(0,l.jsx)(Oe,{children:(0,l.jsx)(Le.Z,{isFullPage:!0,resourceText:"view tables from this project"})})})),ze=r(41224),Fe=(0,s.Pi)((function(e){var t=e.tabId,r=e.onComplete,n=e.visible,s=e.onCancel,a=(0,i.oR)(),o=a.ui,u=a.content,d=(0,ze.JU)(),p=function(){var e=d.tabs.find((function(e){return e.id===t}));if(e)return e.renameModel;var r=d.favorites.find((function(e){return e.key===t}));if(r)return r.renameModel}();function m(e){return f.apply(this,arguments)}function f(){return f=(0,h.Z)(v().mark((function e(n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.update(t,{name:n.name,description:n.desc});case 3:return d.renameQuery(t,n),r&&r(),e.abrupt("return",Promise.resolve());case 8:e.prev=8,e.t0=e.catch(0),o.setNotification({error:e.t0,category:"error",message:"Failed to rename query: ".concat(e.t0.message)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),f.apply(this,arguments)}return(0,l.jsx)(c.u_l,{visible:n,onCancel:s,hideFooter:!0,header:"Rename",size:"small",children:(0,l.jsx)(c.l09,{onReset:s,validateOnBlur:!0,initialValues:{name:p?p.name:"",desc:p?p.desc:""},validate:function(e){var t={};return e.name||(t.name="Please enter a query name"),t},onSubmit:function(){var e=(0,h.Z)(v().mark((function e(t,r){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=r.setSubmitting)(!0),e.next=4,m(t);case 4:n(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;return(0,l.jsxs)("div",{className:"space-y-4 py-4",children:[(0,l.jsx)(c.u_l.Content,{children:(0,l.jsx)(c.IIB,{label:"Name",id:"name",name:"name"})}),(0,l.jsx)(c.u_l.Content,{children:(0,l.jsx)(c.IIB,{label:"Description",id:"desc",placeholder:"Describe query"})}),(0,l.jsx)(c.u_l.Separator,{}),(0,l.jsx)(c.u_l.Content,{children:(0,l.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,l.jsx)(c.zxk,{htmlType:"reset",type:"default",onClick:s,children:"Cancel"}),(0,l.jsx)(c.zxk,{htmlType:"submit",loading:t,children:"Rename query"})]})})]})}})})})),De=Fe,Be=r(63840),Ue=(0,s.Pi)((function(e){var t=e.tabInfo,r=e.canCreateSQLSnippet,n=(0,ze.JU)(),s=t||{},a=s.id,i=s.name,o=n.activeTab.id===a;return(0,l.jsx)(Te.Z,{isActive:o,name:i,action:o&&r&&(0,l.jsx)(Me,{tabInfo:t}),onClick:function(){return n.selectTab(a)},textClassName:"w-44"},a)})),Me=(0,s.Pi)((function(e){var t=e.tabInfo,r=(0,i.oR)(),s=r.ui.profile,a=r.content,o=(0,ze.JU)(),u=(0,n.useState)(""),d=u[0],p=u[1],f=(0,n.useState)(!1),x=f[0],g=f[1],j=(0,n.useState)(!1),b=j[0],y=j[1],w=t||{},k=w.id,N=w.name;function S(){g(!1)}function P(e){p(k),g(!0)}return(0,l.jsxs)("div",{children:[m.Qy?(0,l.jsx)(c.Ltx,{side:"bottom",align:"end",overlay:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.Ltx.Item,{onClick:P,icon:(0,l.jsx)(c.xUH,{size:"tiny"}),children:"Rename query"}),(0,l.jsx)(c.Ltx.Separator,{}),(0,l.jsx)(c.Ltx.Item,{onClick:function(){return y(!0)},icon:(0,l.jsx)(c.IT9,{size:"tiny"}),children:"Remove query"})]}),children:(0,l.jsx)(c.zxk,{as:"span",type:"text",icon:(0,l.jsx)(c.C26,{size:12}),style:{padding:"3px"}})}):(0,l.jsx)(c.zxk,{as:"span",type:"text",style:{padding:"3px"}}),(0,l.jsx)(De,{visible:x,onCancel:S,tabId:d,onComplete:S}),(0,l.jsx)(Be.Z,{header:"Confirm to remove",buttonLabel:"Confirm",visible:b,onSelectConfirm:(0,h.Z)(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.closeTab(k),e.next=3,a.del(k);case 3:o.loadTabs(o.tabsFromContentStore(a,null===s||void 0===s?void 0:s.id),!1);case 4:case"end":return e.stop()}}),e)}))),onSelectCancel:function(){return y(!1)},children:(0,l.jsx)(c.u_l.Content,{children:(0,l.jsx)("p",{className:"py-4 text-sm text-scale-1100",children:"Are you sure you want to remove '".concat(N,"' ?")})})})]})})),We=(0,s.Pi)((function(){var e,t,r,s,a,o,u=(0,i.oR)().ui,d=(0,ze.JU)(),p=(0,n.useState)(""),f=p[0],h=p[1],x=(0,i.FH)(_e.KA.CREATE,"user_content",{resource:{type:"sql",owner_id:null===(e=u.profile)||void 0===e?void 0:e.id},subject:{id:null===(t=u.profile)||void 0===t?void 0:t.id}}),v=(0,i.gM)(x),g=(null!==(r=null===d||void 0===d?void 0:d.tabs)&&void 0!==r?r:[]).filter((function(e){return e.type===ze.si.WELCOME})),j=(null!==(s=null===d||void 0===d?void 0:d.tabs)&&void 0!==s?s:[]).filter((function(e){return e.type!==ze.si.WELCOME&&e.favorite})),b=(null!==(a=null===d||void 0===d?void 0:d.tabs)&&void 0!==a?a:[]).filter((function(e){return e.type!==ze.si.WELCOME&&!e.favorite})),y=0===f.length?j:j.filter((function(e){return e.name.includes(f)})),w=0===f.length?b:b.filter((function(e){return e.name.includes(f)}));return(0,l.jsx)("div",{className:"mt-6",children:(0,l.jsxs)(c.v2r,{type:"pills",children:[m.Qy&&(0,l.jsxs)("div",{className:"my-4 mx-3 space-y-1 px-3",children:[(0,l.jsx)(c.zxk,{block:!0,icon:(0,l.jsx)(c.SC9,{}),type:"default",style:{justifyContent:"start"},onClick:function(){return v()},children:"New query"}),(0,l.jsx)(c.IIB,{icon:(0,l.jsx)(c.jVj,{size:"tiny"}),placeholder:"Search",onChange:function(e){return h(e.target.value)},value:f,size:"tiny",actions:f&&(0,l.jsx)(c.kLi,{size:"tiny",className:"mr-2 cursor-pointer",onClick:function(){return h("")}})})]}),0===(null!==(o=null===d||void 0===d?void 0:d.tabs)&&void 0!==o?o:[]).length?(0,l.jsxs)("div",{className:"my-4 flex items-center space-x-2 px-7",children:[(0,l.jsx)(c.pAw,{className:"animate-spin",size:16,strokeWidth:2}),(0,l.jsx)("p",{className:"text-sm",children:"Loading SQL snippets"})]}):(0,l.jsxs)("div",{className:"space-y-6",children:[m.Qy&&(0,l.jsxs)("div",{className:"px-3",children:[(0,l.jsx)(c.v2r.Group,{title:"Getting started"}),g.map((function(e){var t=e||{},r=t.id,n=t.name;return(0,l.jsx)(Te.Z,{name:n,isActive:d.activeTab.id===r,onClick:function(){return d.selectTab(r)}},r)}))]}),(0,l.jsxs)("div",{className:"space-y-6 px-3",children:[y.length>=1&&(0,l.jsxs)("div",{className:"editor-product-menu",children:[(0,l.jsx)(c.v2r.Group,{title:"Favorites"}),(0,l.jsx)("div",{className:"space-y-1",children:y.map((function(e){var t=(e||{}).id;return(0,l.jsx)(Ue,{tabInfo:e,canCreateSQLSnippet:x},t)}))})]}),w.length>=1&&(0,l.jsxs)("div",{className:"editor-product-menu",children:[(0,l.jsx)(c.v2r.Group,{title:"SQL snippets"}),(0,l.jsx)("div",{className:"space-y-1",children:w.map((function(e){var t=(e||{}).id;return(0,l.jsx)(Ue,{tabInfo:e,canCreateSQLSnippet:x},t)}))})]}),f.length>0&&0===y.length&&0===w.length&&(0,l.jsx)("div",{className:"px-4",children:(0,l.jsx)("p",{className:"text-sm",children:"No queries found"})})]})]})]})})})),He=(0,i.QO)((0,s.Pi)((function(e){var t,r=e.title,s=e.children,a=(0,i.oR)(),o=a.ui,c=a.content,d=a.meta,p=o.profile,m=(0,ze.Q)(null===(t=o.selectedProject)||void 0===t?void 0:t.ref,d);return(0,n.useEffect)((function(){m&&m.loadRemotePersistentData(c,null===p||void 0===p?void 0:p.id)}),[m]),(0,l.jsx)(ze.Ab.Provider,{value:m,children:c.error?(0,l.jsx)(Oe,{children:(0,l.jsx)(u,{error:c.error})}):(0,l.jsx)(Oe,{isLoading:c.isLoading||null===m,title:r||"SQL",product:"SQL Editor",productMenu:(0,l.jsx)(We,{}),children:s})})}))),Qe=function(e){var t,r=null!==(t=null===e||void 0===e?void 0:e.ref)&&void 0!==t?t:"default",n=!(null===e||void 0===e||!e.inserted_at)&&e.inserted_at>"2021-07-30T15:33:54.383Z",s=(0,i.P5)("foreignDataWrappers");return[{title:"Database",items:[{name:"Tables",key:"tables",url:"/project/".concat(r,"/database/tables"),items:[]},{name:"Triggers",key:"triggers",url:"/project/".concat(r,"/database/triggers"),items:[]},{name:"Functions",key:"functions",url:"/project/".concat(r,"/database/functions"),label:"ALPHA",items:[]},{name:"Extensions",key:"extensions",url:"/project/".concat(r,"/database/extensions"),items:[]},{name:"Roles",key:"roles",url:"/project/".concat(r,"/database/roles"),items:[]},{name:"Replication",key:"replication",url:"/project/".concat(r,"/database/replication"),items:[]}].concat((0,p.Z)(n?[{name:"Webhooks",key:"hooks",url:"/project/".concat(r,"/database/hooks"),items:[],label:"ALPHA"}]:[]),(0,p.Z)(s?[{name:"Wrappers",key:"wrappers",url:"/project/".concat(r,"/database/wrappers"),items:[],label:"ALPHA"}]:[]),(0,p.Z)(m.Qy?[{name:"Backups",key:"backups",url:"/project/".concat(r,"/database/backups/scheduled"),items:[]}]:[]))}]},Ye=(0,i.QO)((0,s.Pi)((function(e){e.title;var t,r,s=e.children,o=(0,i.oR)(),c=o.meta,p=o.ui,f=o.vault,h=o.backups,x=c.tables,v=x.isInitialized,g=x.isLoading,j=x.error,b=p.selectedProject,y=(0,a.useRouter)().pathname.split("/")[4],w=c.extensions.byId("supabase_vault"),k=void 0!==w&&null!==w.installed_version,N=(0,n.useState)(v),S=N[0],P=N[1];return(0,n.useEffect)((function(){var e;null!==(e=p.selectedProject)&&void 0!==e&&e.ref&&(c.schemas.load(),c.tables.load(),c.roles.load(),c.triggers.load(),c.extensions.load(),c.publications.load(),m.Qy&&h.load())}),[null===(t=p.selectedProject)||void 0===t?void 0:t.ref]),(0,n.useEffect)((function(){k&&f.load()}),[null===(r=p.selectedProject)||void 0===r?void 0:r.ref,k]),(0,n.useEffect)((function(){g||S||P(!0)}),[g]),j?(0,l.jsx)(bt,{children:(0,l.jsx)(u,{error:j})}):(0,l.jsx)(bt,{isLoading:!S,product:"Database",productMenu:(0,l.jsx)(d.Z,{page:y,menu:Qe(b)}),children:(0,l.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:s})})})));var Ge=(0,i.QO)((0,s.Pi)((function(e){var t,r,s,o,m,f=e.title,h=e.children,x=(0,a.useRouter)(),v=(0,i.oR)(),g=v.meta,j=v.ui,b=g.openApi,y=b.data,w=b.isLoading,k=b.error,N=(0,i.P5)("graphiql");if((0,n.useEffect)((function(){var e;null!==(e=j.selectedProject)&&void 0!==e&&e.ref&&g.openApi.load()}),[null===(t=j.selectedProject)||void 0===t?void 0:t.ref]),k)return(0,l.jsx)(Oe,{children:(0,l.jsx)(u,{error:k})});var S,P,C,I,R=null!==(r=null===(s=j.selectedProject)||void 0===s?void 0:s.ref)&&void 0!==r?r:"default",Z=(null!==(o=null===y||void 0===y?void 0:y.tables)&&void 0!==o?o:[]).map((function(e){return e.name})),_=(null!==(m=null===y||void 0===y?void 0:y.functions)&&void 0!==m?m:[]).map((function(e){return e.name}));return(0,l.jsx)(Oe,{title:f||"API Docs",isLoading:w,product:"API Docs",productMenu:(0,l.jsx)(d.Z,{page:function(){if(x.pathname.endsWith("graphiql"))return"graphiql";var e=x.query,t=e.page,r=e.resource;return t||r?t||r||"":"introduction"}(),menu:(S=R,P=Z,C=_,I=N,[{title:"Getting Started",items:[{name:"Introduction",key:"introduction",url:"/project/".concat(S,"/api"),items:[]},{name:"Authentication",key:"auth",url:"/project/".concat(S,"/api?page=auth"),items:[]},{name:"User Management",key:"users",url:"/project/".concat(S,"/api?page=users"),items:[]}]},{title:"Tables and Views",items:[{name:"Introduction",key:"tables-intro",url:"/project/".concat(S,"/api?page=tables-intro"),items:[]}].concat((0,p.Z)(P.sort().map((function(e){return{name:e,key:e,url:"/project/".concat(S,"/api?resource=").concat(e),items:[]}}))))},{title:"Stored Procedures",items:[{name:"Introduction",key:"rpc-intro",url:"/project/".concat(S,"/api?page=rpc-intro"),items:[]}].concat((0,p.Z)(C.map((function(e){return{name:e,key:e,url:"/project/".concat(S,"/api?rpc=").concat(e),items:[]}}))))}].concat((0,p.Z)(I?[{title:"GraphQL",items:[{name:"GraphiQL",key:"graphiql",url:"/project/".concat(S,"/api/graphiql"),icon:(0,l.jsx)(O.Z,{src:"/img/graphql.svg",style:{width:"".concat(16,"px"),height:"".concat(16,"px")},className:"text-scale-1200",preProcessor:function(e){return e.replace(/svg/,'svg class="m-auto text-color-inherit"')}}),items:[]}]}]:[]),[{title:"More Resources",items:[{name:"Guides",key:"guides",url:"https://supabase.com/docs",icon:(0,l.jsx)(c.Z7c,{size:14,strokeWidth:2}),items:[],isExternal:!0},{name:"API Reference",key:"api-reference",url:"https://supabase.com/docs/guides/database/api",icon:(0,l.jsx)(c.sDS,{size:14,strokeWidth:2}),items:[],isExternal:!0}]}]))}),children:h})}))),qe=(0,i.QO)((0,s.Pi)((function(e){var t,r=e.title,s=e.children,o=(0,i.oR)(),c=o.ui,u=o.meta,f=c.selectedProjectRef,h=c.selectedProjectBaseInfo,x=(0,a.useRouter)(),v=x.pathname.includes("billing")?x.pathname.split("/")[5]:x.pathname.split("/")[4],g=function(e,t){var r=(0,i.P5)("vaultExtension"),n=(null===t||void 0===t?void 0:t.status)!==m.S.ACTIVE_HEALTHY,s="/project/".concat(e,"/building");return[{title:"Project Settings",items:[{name:"General",key:"general",url:"/project/".concat(e,"/settings/general"),items:[]},{name:"Database",key:"database",url:n?s:"/project/".concat(e,"/settings/database"),items:[]},{name:"API",key:"api",url:n?s:"/project/".concat(e,"/settings/api"),items:[]}].concat((0,p.Z)(m.Qy?[{name:"Auth",key:"auth",url:n?s:"/project/".concat(e,"/settings/auth"),items:[]}]:[]),(0,p.Z)(m.Qy?[{name:"Storage",key:"storage",url:"/project/".concat(e,"/settings/storage"),items:[]}]:[]),(0,p.Z)(r?[{name:"Vault",key:"vault",url:n?s:"/project/".concat(e,"/settings/vault/secrets"),items:[],label:"BETA"}]:[]))}].concat((0,p.Z)(m.Qy?[{title:"Billing",items:[{name:"Subscription",key:"subscription",url:n?s:"/project/".concat(e,"/settings/billing/subscription"),items:[]},{name:"Usage",key:"usage",url:n?s:"/project/".concat(e,"/settings/billing/usage"),items:[]},{name:"Invoices",key:"invoices",url:n?s:"/project/".concat(e,"/settings/billing/invoices"),items:[]}]}]:[]))}(f,h);return(0,n.useEffect)((function(){var e;null!==(e=c.selectedProject)&&void 0!==e&&e.ref&&u.extensions.load()}),[null===(t=c.selectedProject)||void 0===t?void 0:t.ref]),(0,l.jsx)(bt,{title:r||"Settings",product:"Settings",productMenu:(0,l.jsx)(d.Z,{page:v,menu:g}),children:(0,l.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:s})})}))),Ve=r(2288),Je=r(61548),Ke=function(e){var t=e.bucket,r=void 0===t?{}:t,n=e.projectRef,s=void 0===n?"":n,a=e.isSelected,i=void 0!==a&&a,o=e.onSelectDeleteBucket,u=void 0===o?function(){}:o,d=e.onSelectToggleBucketPublic,p=void 0===d?function(){}:d;return(0,l.jsx)(Te.Z,{name:(0,l.jsxs)("div",{className:"flex items-center justify-between space-x-2 truncate w-full",children:[(0,l.jsx)("p",{className:"truncate",title:r.name,children:r.name}),r.public&&(0,l.jsx)(c.Cts,{color:"yellow",children:"Public"})]}),url:"/project/".concat(s,"/storage/buckets/").concat(r.id),isActive:i,action:r.status===Je.R9.LOADING?(0,l.jsx)(c.pAw,{className:"animate-spin",size:16,strokeWidth:2}):r.status===Je.R9.READY?(0,l.jsx)(c.Ltx,{side:"bottom",align:"start",overlay:[(0,l.jsx)(c.Ltx.Item,{onClick:function(){return p(r)},children:r.public?"Make private":"Make public"},"toggle-private"),(0,l.jsx)(c.Ltx.Separator,{},"bucket-separator"),(0,l.jsx)(c.Ltx.Item,{icon:(0,l.jsx)(c.IT9,{size:"tiny"}),onClick:function(){return u(r)},children:"Delete bucket"},"delete-bucket")],children:(0,l.jsx)(c.nqv,{className:"opacity-0 group-hover:opacity-100",size:"tiny",strokeWidth:2})}):(0,l.jsx)("div",{})},r.id)},Xe=r(17737),$e=(0,s.Pi)((function(){var e,t=(0,a.useRouter)(),r=(0,i.UO)(),n=r.ref,s=r.bucketId,u=t.pathname.split("/")[4],d=(0,Xe.HN)()||{},p=d.loaded,m=d.buckets,f=d.openCreateBucketModal,h=d.openDeleteBucketModal,x=d.openToggleBucketPublicModal,v=(0,Ve.qP)({projectRef:n}),g=v.data,j=v.isLoading,b=null===g||void 0===g?void 0:g.autoApiService,y=(0,I.find)(null!==(e=null===b||void 0===b?void 0:b.service_api_keys)&&void 0!==e?e:[],(function(e){return"service_role"===e.tags})),w=!j&&b&&void 0!==y;return(0,l.jsxs)(c.v2r,{type:"pills",className:"my-6 flex flex-grow flex-col px-5",children:[(0,l.jsx)("div",{className:"mb-6 px-2",children:(0,l.jsxs)(R.fC,{delayDuration:0,children:[(0,l.jsx)(R.xz,{className:"w-full",children:(0,l.jsx)(c.zxk,{block:!0,type:"default",icon:(0,l.jsx)("div",{className:"text-scale-900",children:(0,l.jsx)(c.yl5,{size:14})}),disabled:!w,style:{justifyContent:"start"},onClick:f,children:"New bucket"})}),!w&&(0,l.jsxs)(R.VY,{side:"bottom",children:[(0,l.jsx)(R.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,l.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to create buckets"})})]})]})}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("div",{className:"",children:(0,l.jsxs)("div",{children:[(0,l.jsx)(c.v2r.Group,{title:"All buckets"}),p?(0,l.jsxs)(l.Fragment,{children:[0===m.length&&(0,l.jsx)("div",{className:"px-2",children:(0,l.jsx)(c.bZj,{title:"No buckets available",children:"Buckets that you create will appear here"})}),m.map((function(e,t){var r=s===e.id;return(0,l.jsx)(Ke,{bucket:e,projectRef:n,isSelected:r,onSelectDeleteBucket:h,onSelectToggleBucketPublic:x},"".concat(t,"_").concat(e.id))}))]}):(0,l.jsxs)("div",{className:"flex items-center space-x-2 py-2 px-2",children:[(0,l.jsx)(c.pAw,{className:"animate-spin",size:14,strokeWidth:2}),(0,l.jsx)("span",{className:"text-sm",children:"Loading buckets"})]})]})}),(0,l.jsx)("div",{className:"h-px w-full bg-scale-500"}),(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)(c.v2r.Group,{title:"Configuration"}),(0,l.jsx)(o.default,{href:"/project/".concat(n,"/storage/policies"),children:(0,l.jsx)(c.v2r.Item,{rounded:!0,active:"policies"===u,children:(0,l.jsx)("p",{className:"truncate",children:"Policies"})})})]})]})]})})),et=r(20505),tt=r(11280),rt=r(49226),nt=r(39790),st=(0,i.QO)((0,s.Pi)((function(e){var t,r=e.title,s=e.children,o=(0,i.oR)(),c=o.ui,u=o.meta,d=(0,a.useRouter)(),p=(0,i.UO)().ref,m=(0,Xe.HN)(),f=m||{},x=f.selectedBucketToEdit,g=f.closeCreateBucketModal,j=f.showCreateBucketModal,b=f.closeDeleteBucketModal,y=f.showDeleteBucketModal,w=f.closeToggleBucketPublicModal,k=f.showToggleBucketPublicModal,N=f.createBucket,S=f.deleteBucket,P=f.toggleBucketPublic,C=f.buckets,O=(0,Ve.qP)({projectRef:p}),R=O.data,Z=O.isLoading,_=null===R||void 0===R?void 0:R.autoApiService,T=(0,I.find)(null!==(t=null===_||void 0===_?void 0:_.service_api_keys)&&void 0!==t?t:[],(function(e){return"service_role"===e.tags})),E=!Z&&_&&T;(0,n.useEffect)((function(){!Z&&_&&L(_)}),[Z]);var L=function(){var e=(0,h.Z)(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.endpoint){e.next=7;break}if(!T){e.next=5;break}return m.initStore(p,t.endpoint,t.serviceApiKey,t.protocol),e.next=5,m.fetchBuckets();case 5:e.next=8;break;case 7:c.setNotification({category:"error",message:"Failed to fetch project configuration. Try refreshing your browser, or reach out to us at support@supabase.io"});case 8:m.setLoaded(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,h.Z)(v().mark((function e(t,r){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t,r);case 2:void 0!==(n=e.sent)&&d.push("/project/".concat(p,"/storage/buckets/").concat(n.name));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),z=function(){var e=(0,h.Z)(v().mark((function e(t){var r,n,s,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:if(!e.sent){e.next=10;break}return r=u.policies.list(),n=(0,I.filter)(r,{table:"objects"}),s=(0,et.hM)(C,n),a=(0,I.get)((0,I.find)(s,{name:t.name}),["policies"],[]),e.next=10,Promise.all(a.map((function(e){u.policies.del(e.id)})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Z||E?(0,l.jsxs)(Oe,{title:r||"Storage",product:"Storage",productMenu:(0,l.jsx)($e,{}),children:[s,(0,l.jsx)(tt.Z,{visible:j,onSelectCancel:g,onSelectSave:A}),(0,l.jsx)(rt.Z,{visible:y,bucket:x,onSelectCancel:b,onSelectDelete:z}),(0,l.jsx)(nt.Z,{visible:k,bucket:x,onSelectCancel:w,onSelectSave:P})]}):(0,l.jsx)(bt,{children:(0,l.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:(0,l.jsx)(Le.Z,{isFullPage:!0,resourceText:"access your project's storage"})})})}))),at=function(e){var t=e.title,r=e.header,n=e.breadcrumbs,s=void 0===n?[]:n,a=e.children,o=e.sections,u=e.subitems,d=e.subitemsParentKey,p=e.hideSidebar,m=void 0!==p&&p,f=e.customSidebarContent,h=!o&&!f,x=(0,i.P5)("ongoingIncident")?"calc(100vh - 44px)":"100vh";return(0,l.jsxs)("div",{className:"flex max-h-full",children:[!m&&!h&&(0,l.jsxs)("div",{id:"with-sidebar",style:{height:x,maxHeight:x},className:["h-full bg-sidebar-linkbar-light dark:bg-sidebar-linkbar-dark","hide-scrollbar w-64 overflow-auto border-r dark:border-dark"].join(" "),children:[t&&(0,l.jsx)("div",{className:"mb-2",children:(0,l.jsx)("div",{className:"flex h-12 max-h-12 items-center border-b px-6 dark:border-dark",children:(0,l.jsx)("h4",{className:"mb-0 text-lg truncate",title:t,children:t})})}),r&&r,(0,l.jsx)("div",{className:"-mt-1",children:(0,l.jsxs)(c.v2r,{children:[f,o.map((function(e,t){return Boolean(e.heading)?(0,l.jsx)(it,{section:e,subitems:u,subitemsParentKey:d},e.key):(0,l.jsx)("div",{className:"border-b py-5 px-6 dark:border-dark",children:(0,l.jsx)(ot,{links:e.links,subitems:u,subitemsParentKey:d})},e.key)}))]})})]}),(0,l.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,l.jsx)(me,{breadcrumbs:s}),(0,l.jsx)("div",{className:"flex-1 flex-grow overflow-auto",children:a})]})]})},it=function(e){var t=e.section,r=e.subitems,n=e.subitemsParentKey;return(0,l.jsxs)("div",{className:"border-b py-5 px-6 dark:border-dark",children:[t.heading&&(0,l.jsx)(c.v2r.Group,{title:t.heading}),t.versionLabel&&(0,l.jsx)("div",{className:"mb-1 px-3",children:(0,l.jsx)(c.Cts,{color:"yellow",children:t.versionLabel})}),(0,l.jsx)(ot,{links:t.links,subitems:r,subitemsParentKey:n})]},t.heading)},ot=function(e){var t=e.links,r=e.subitems,n=e.subitemsParentKey;return(0,l.jsx)("ul",{className:"space-y-1",children:t.map((function(e,t){var s=e.isActive&&!r,a=(0,l.jsx)(ct,{id:"".concat(e.key,"-").concat(t),isActive:s,label:e.label,href:e.href,onClick:e.onClick,isExternal:e.isExternal||!1},"".concat(e.key,"-").concat(t,"-sidebarItem"));if(r&&e.subitemsKey===n){var i=r.map((function(t,r){return(0,l.jsx)(ct,{id:"".concat(t.key||t.as,"-").concat(r),isSubitem:!0,label:t.label,onClick:t.onClick,isExternal:e.isExternal||!1},"".concat(t.key||t.as,"-").concat(r,"-sidebarItem"))}));a=[a].concat((0,p.Z)(i))}return a}))})},ct=function(e){var t,r=e.id,n=e.label,s=e.href,a=e.isActive,i=e.isSubitem,u=e.isExternal,d=e.onClick;return(0,I.isUndefined)(s)?(u&&(t=(0,l.jsx)(c.cFN,{size:"tiny"})),"Logout"===n&&(t=(0,l.jsx)(c.iSn,{size:"tiny"})),(0,l.jsx)(c.v2r.Item,{rounded:!0,style:{marginLeft:i?".5rem":"0rem"},active:!!a,onClick:d||function(){},icon:t,children:i?(0,l.jsx)("p",{className:"text-sm",children:n}):n},r)):(0,l.jsx)(o.default,{href:s||"",children:(0,l.jsx)("a",{className:"block",target:u?"_blank":"_self",children:(0,l.jsxs)("button",{className:"group flex max-w-full cursor-pointer items-center space-x-2 border-scale-500 py-1 font-normal outline-none ring-scale-1200 focus-visible:z-10 focus-visible:ring-1 group-hover:border-scale-900",onClick:d||function(){},children:[u&&(0,l.jsx)("span",{className:"truncate text-sm text-scale-900 transition group-hover:text-scale-1100",children:(0,l.jsx)(c.cFN,{size:"tiny"})}),(0,l.jsx)("span",{title:n,className:"w-full truncate text-sm text-scale-1100 transition group-hover:text-scale-1200",children:i?(0,l.jsx)("p",{children:n}):n})]})})})},lt=function(e){var t=e.children,r=e.title,n=e.breadcrumbs,s=(0,a.useRouter)(),o=(0,i.oR)(),c=o.app,u=o.ui,d=(0,g.NL)(),f=(0,i.P5)("ongoingIncident")?"calc(100vh - 44px)":"100vh",x=function(){var e=(0,h.Z)(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.I8.signOut();case 2:return localStorage.removeItem(b.Uf),e.next=5,s.push("/sign-in");case 5:return e.next=7,d.resetQueries();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=c.organizations.list().map((function(e){var t;return{isActive:s.pathname.startsWith("/org/")&&(null===(t=u.selectedOrganization)||void 0===t?void 0:t.slug)===e.slug,label:e.name,href:"/org/".concat(e.slug,"/general"),key:e.slug}})).sort((function(e,t){return e.label.localeCompare(t.label)})),w=[{heading:"Projects",key:"projects",links:[{isActive:"/projects"===s.pathname,label:"All projects",href:"/projects",key:"all-projects-item"}]}].concat((0,p.Z)(m.Qy&&(null===j||void 0===j?void 0:j.length)>0?[{heading:"Organizations",key:"organizations",links:j}]:[]),(0,p.Z)(m.Qy?[{heading:"Account",key:"account",links:[{isActive:"/account/me"===s.pathname,icon:"/img/user.svg",label:"Preferences",href:"/account/me",key:"/account/me"},{isActive:"/account/tokens"===s.pathname,icon:"/img/user.svg",label:"Access Tokens",href:"/account/tokens",key:"/account/tokens"}]}]:[]),[{heading:"Documentation",key:"documentation",links:[{key:"ext-guides",icon:"/img/book.svg",label:"Guides",href:"https://supabase.com/docs",isExternal:!0},{key:"ext-guides",icon:"/img/book-open.svg",label:"API Reference",href:"https://supabase.com/docs/guides/database/api",isExternal:!0}]}],(0,p.Z)(m.Qy?[{key:"logout-link",links:[{key:"logout",icon:"/icons/feather/power.svg",label:"Logout",href:void 0,onClick:x}]}]:[]));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(y.default,{children:[(0,l.jsx)("title",{children:r?"".concat(r," | Supabase"):"Supabase"}),(0,l.jsx)("meta",{name:"description",content:"Supabase Studio"}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,l.jsx)("div",{className:"flex h-full",children:(0,l.jsx)("main",{style:{height:f,maxHeight:f},className:"flex flex-col flex-1 w-full overflow-y-auto",children:(0,l.jsx)(at,{title:r,breadcrumbs:n,sections:w,children:t})})})]})},ut=(0,i.QO)((0,s.Pi)(lt)),dt=((0,s.Pi)(lt),function(e){var t=e.organization,r=e.project,n=e.children,s=(0,i.P5)("ongoingIncident")?"calc(100vh - 44px)":"100vh";return(0,l.jsxs)("div",{className:"flex w-full flex-col",style:{height:s,maxHeight:s},children:[(0,l.jsx)(ft,{organization:t,project:r}),(0,l.jsx)("div",{className:"overflow-auto",children:(0,l.jsx)("section",{className:"has-slide-in slide-in relative mx-auto my-10 max-w-2xl",children:n})})]})}),pt=(0,i.QO)((0,s.Pi)(dt)),mt=(0,s.Pi)(dt),ft=function(e){var t=e.organization,r=e.project,n=t?1:r?2:0;return(0,l.jsx)("div",{className:"border-b p-3 dark:border-dark",children:(0,l.jsx)("div",{className:"PageHeader",children:(0,l.jsxs)("div",{className:"Breadcrumbs flex justify-between",children:[(0,l.jsx)("div",{className:"flex items-center text-sm",children:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(o.default,{href:"/projects",children:(0,l.jsx)("a",{children:(0,l.jsx)("img",{src:"/img/supabase-logo.svg",alt:"Supabase",className:"rounded border p-1 hover:border-white dark:border-dark",style:{height:24}})})}),(0,l.jsx)(c.VG8,{size:"small",className:"text-scale-1100"}),(0,l.jsx)("p",{className:"text-sm",children:t?"Organization: ".concat(t.name):"Create an organization"}),(0,l.jsx)(c.VG8,{size:"small",className:"text-scale-1100"}),(0,l.jsx)("p",{className:"text-sm ".concat(n<1?"text-scale-1100":""),children:r?r.name:"Create a new project"}),(0,l.jsx)(c.VG8,{size:"small",className:"text-scale-1100"}),(0,l.jsx)("p",{className:"text-sm ".concat(n<2?"text-scale-1100":""),children:r?r.name:"Extend your database"})]})}),(0,l.jsx)("div",{className:"flex"})]})})})},ht=(r(91700),(0,i.QO)((0,s.Pi)((function(e){var t,r,n,s=e.children,a=(0,i.oR)().ui;return(0,l.jsx)(bt,{hideHeader:!0,hideIconBar:!0,children:(0,l.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4 border-b py-4 px-5 dark:border-dark",children:[(0,l.jsx)(o.default,{href:"/project/".concat(null===(t=a.selectedProject)||void 0===t?void 0:t.ref,"/settings/billing/subscription"),passHref:!0,children:(0,l.jsx)("a",{className:"text-scale-900 transition-colors hover:text-scale-1200",children:(0,l.jsx)(c.kLi,{size:16,strokeWidth:1.5})})}),(0,l.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,l.jsx)("h1",{className:"text-sm text-scale-1200",children:"Customize your plan"}),(0,l.jsx)("div",{className:"h-6 w-px bg-scale-600"}),(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:null===(r=a.selectedOrganization)||void 0===r?void 0:r.name}),(0,l.jsx)("span",{className:"text-scale-800",children:(0,l.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",children:(0,l.jsx)("path",{d:"M16 3.549L7.12 20.600"})})}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:null===(n=a.selectedProject)||void 0===n?void 0:n.name})]})]})]}),(0,l.jsx)("div",{className:"overflow-auto",children:(0,l.jsx)("section",{className:"relative",children:s})})]})})})))),xt=r(31027),vt=function(e){var t,r=null!==(t=null===e||void 0===e?void 0:e.ref)&&void 0!==t?t:"default",n=(0,i.P5)("productReports");return[{title:"",items:[{name:"Custom reports",key:"",url:"/project/".concat(r,"/reports"),items:[]}]},{items:[].concat((0,p.Z)(n?[{name:"API",key:"api",url:"/project/".concat(r,"/reports/api"),items:[]},{name:"Auth",key:"auth",url:"/project/".concat(r,"/reports/auth"),items:[]}]:[]),[{name:"Database",key:"database",url:"/project/".concat(r,"/reports/database"),items:[]}])}]},gt=(0,i.QO)((0,s.Pi)((function(e){var t=e.title,r=e.children,n=(0,i.oR)().ui,s=(0,a.useRouter)(),o=n.selectedProject,c=s.pathname.split("/")[4]||"";return(0,l.jsx)(Oe,{title:t,product:"Reports",productMenu:(0,l.jsx)(d.Z,{page:c,menu:vt(o)}),children:(0,l.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:r})})}))),jt=(0,s.Pi)((function(e){var t,r,n=e.children,s=(0,i.oR)().ui;return(0,l.jsx)(ut,{title:null!==(t=null===(r=s.selectedOrganization)||void 0===r?void 0:r.name)&&void 0!==t?t:"Supabase",breadcrumbs:[{key:"org-settings",label:"Settings"}],children:n})})),bt=Oe},11280:function(e,t,r){var n=r(27378),s=r(88983),a=r(24246);t.Z=function(e){var t=e.visible,r=void 0!==t&&t,i=e.onSelectCancel,o=void 0===i?function(){}:i,c=e.onSelectSave,l=void 0===c?function(){}:c,u=(0,n.useState)(!1),d=u[0],p=u[1],m=(0,n.useState)(""),f=m[0],h=m[1],x=(0,n.useState)(""),v=x[0],g=x[1],j=(0,n.useState)(!1),b=j[0],y=j[1];(0,n.useEffect)((function(){h(""),g(""),p(!1),y(!1)}),[r]);var w=function(e){if(e&&e.preventDefault(),0===v.length)o();else{if(v.includes(" "))return h("Bucket names should not have any spaces");if(v.match(/[:;'"/?!#$%^&*()+_{}\[\]|\s]/g))return h("Only dots(.) or hyphens(-) are allowed");if(v!==v.toLowerCase())return h("Only lowercase letters are allowed");h(""),p(!0),l(v,b)}};return(0,a.jsx)(s.u_l,{visible:r,header:"Create storage bucket",size:"medium",onCancel:o,customFooter:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(s.zxk,{type:"default",onClick:o,children:"Cancel"}),(0,a.jsx)(s.zxk,{type:"primary",disabled:d,loading:d,onClick:w,children:d?"Creating bucket":"Create bucket"})]}),children:(0,a.jsxs)("form",{className:"space-y-6 py-4",children:[(0,a.jsx)(s.u_l.Content,{children:(0,a.jsx)("div",{className:"relative flex items-center",children:(0,a.jsx)(s.IIB,{autoFocus:!0,label:"Name of bucket",labelOptional:"Buckets cannot be renamed once created.",descriptionText:(0,a.jsx)("p",{className:"text-scale-1000",children:"Only lowercase letters, numbers, dots, and hyphens"}),layout:"vertical",error:f,type:"text",className:"w-full",placeholder:"e.g new-bucket",value:v,onChange:function(e){return g(e.target.value)}})})}),(0,a.jsx)(s.u_l.Separator,{}),(0,a.jsx)(s.u_l.Content,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(s.ZDl,{name:"isPublic",label:"Public bucket",descriptionText:"Anyone can read any object without any authorization",layout:"flex",size:"medium",onChange:function(){return y(!b)}}),b&&(0,a.jsxs)(s.bZj,{title:"Public buckets are not protected",variant:"warning",withIcon:!0,children:[(0,a.jsx)("p",{className:"mb-2",children:"Users can read objects in public buckets without any authorization."}),(0,a.jsx)("p",{children:"Row level security (RLS) policies are still required for other operations such as object uploads and deletes."})]})]})}),(0,a.jsx)("button",{className:"hidden",type:"submit",onClick:w})]})})}},49226:function(e,t,r){var n=r(27378),s=r(44198),a=r(24246);t.Z=function(e){var t=e.visible,r=void 0!==t&&t,i=e.bucket,o=void 0===i?{}:i,c=e.onSelectCancel,l=e.onSelectDelete,u=(0,n.useState)(!1),d=u[0],p=u[1],m=(0,n.useState)(""),f=(m[0],m[1]);(0,n.useEffect)((function(){f(""),p(!1)}),[r]);return(0,a.jsx)(s.Z,{visible:r,title:"Confirm deletion of ".concat(o.name),confirmPlaceholder:"Type in name of bucket",onConfirm:function(){p(!0),l(o)},onCancel:c,confirmString:o.name,loading:d,text:"This will delete your bucket called ".concat(o.name,"."),alert:"You cannot recover this bucket once it is deleted!",confirmLabel:"Delete bucket ".concat(o.name)})}},61548:function(e,t,r){r.d(t,{Qo:function(){return n},De:function(){return s},Ye:function(){return a},sd:function(){return i},fh:function(){return o},R9:function(){return c},Eb:function(){return l},l6:function(){return u}});var n={WEEK:604800,MONTH:2592e3,YEAR:31536e3},s={COLUMNS:"COLUMNS",LIST:"LIST"},a={NAME:"name",UPDATED_AT:"updated_at",CREATED_AT:"created_at",LAST_ACCESSED_AT:"last_accessed_at"},i={ASC:"asc",DESC:"desc"},o={BUCKET:"BUCKET",FILE:"FILE",FOLDER:"FOLDER"},c={READY:"READY",LOADING:"LOADING",EDITING:"EDITING"},l={upload:["INSERT"],download:["SELECT"],list:["SELECT"],update:["SELECT","UPDATE"],move:["SELECT","UPDATE"],copy:["SELECT","INSERT"],remove:["SELECT","DELETE"],createSignedUrl:["SELECT"],createSignedUrls:["SELECT"],getPublicUrl:[]},u={STORAGE_COLUMN:"STORAGE_COLUMN",STORAGE_ITEM:"STORAGE_ITEM",STORAGE_FOLDER:"STORAGE_FOLDER"}},20505:function(e,t,r){r.d(t,{hM:function(){return u},n6:function(){return f},GH:function(){return x},g_:function(){return g},pD:function(){return j}});var n=r(11246),s=r(90849),a=r(98784),i=r(61548);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=function(e){for(var t=0,r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return new Uint32Array([t])[0].toString(36)},u=function(e,t){if(0===t.length)return t;var r=d(e,t);return m(r)},d=function(e,t){var r=e.map((function(e){return e.name}));return t.map((function(e){var t=e.definition,n=e.check,s=p(null!==t?t:n);return s&&r.includes(s)?c(c({},e),{},{bucket:s}):c(c({},e),{},{bucket:"Ungrouped"})}))},p=function(e){var t,r=(null!==(t=null===e||void 0===e?void 0:e.split(" AND "))&&void 0!==t?t:[]).filter((function(e){return e.includes("bucket_id")})),s=(0,n.Z)(r,1)[0];return s?s.split("'")[1]:null},m=function(e){var t=(0,a.groupBy)(e,"bucket");return Object.keys(t).map((function(e){return{name:e,policies:t[e]}}))},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t.name,s=t.definition,a=t.allowedOperations,i=t.roles,o=s?s.replace(/\s+/g," ").trim():"";return a.map((function(t,s){return h(s,e,n,o,t,i,r)}))},h=function(e,t,r,n,s,a,i){var o=l(t);return{name:i?"".concat(r," ").concat(o,"_").concat(e):r,definition:"INSERT"===s?void 0:"(".concat(n,")"),action:"PERMISSIVE",check:"INSERT"===s?"(".concat(n,")"):void 0,command:s,schema:"storage",table:"objects",roles:a.length>0?a:void 0}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object.keys(i.Eb).filter((function(t){var r=i.Eb[t];if(0===(0,a.difference)(r,e).length)return t}))},v=function(e,t,r,n,s,a,i){var o=l(t),c=i?"".concat(r," ").concat(o,"_").concat(e):r,u="Add policy for the ".concat(s,' operation under the policy "').concat(r,'"'),d=0===a.length?["public"]:a;return{description:u,statement:'\n    CREATE POLICY "'.concat(c,'"\n    ON storage.objects\n    FOR ').concat(s,"\n    TO ").concat(d.join(", "),"\n    ").concat("INSERT"===s?"WITH CHECK":"USING"," (").concat(n,");\n").replace(/\s+/g," ").trim()}},g=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t.name,s=t.definition,a=t.allowedOperations,i=t.roles,o=a.map((function(t,a){return v(a,e,n,s||"",t,i,r)}));return o},j=function(e,t){return e.replace("{bucket_id}","'".concat(t,"'"))}},39790:function(e,t,r){var n=r(27378),s=r(88983),a=r(63840),i=r(24246);t.Z=function(e){var t=e.visible,r=void 0!==t&&t,o=e.bucket,c=void 0===o?{}:o,l=e.onSelectCancel,u=void 0===l?function(){}:l,d=e.onSelectSave,p=void 0===d?function(e){}:d,m=(0,n.useState)(!1),f=(m[0],m[1]);(0,n.useEffect)((function(){f(!1)}),[r]);var h=c.public?"Confirm making ".concat(c.name," private"):"Confirm making ".concat(c.name," public"),x=c.public?"Warning: Making bucket private":"Warning: Making bucket public",v=c.public?"This will make all objects in ".concat(c.name," private. They can only be accessed via signed URLs or downloaded with the right authorisation headers"):"This will make all objects in ".concat(c.name," public");return(0,i.jsx)(a.Z,{danger:!0,visible:r,header:h,children:(0,i.jsx)("div",{className:"py-4",children:(0,i.jsx)(s.u_l.Content,{children:(0,i.jsx)(s.bZj,{title:x,variant:"warning",withIcon:!0,children:v})})}),buttonLabel:"Update bucket",buttonLoadingLabel:"Updating bucket",onSelectCancel:u,onSelectConfirm:function(){f(!0),p(c)}})}},63840:function(e,t,r){var n=r(88983),s=r(27378),a=r(24246);t.Z=function(e){var t=e.visible,r=void 0!==t&&t,i=e.danger,o=void 0!==i&&i,c=e.header,l=void 0===c?"":c,u=e.description,d=void 0===u?"":u,p=e.size,m=void 0===p?"small":p,f=e.buttonLabel,h=void 0===f?"":f,x=e.buttonLoadingLabel,v=void 0===x?"":x,g=e.onSelectCancel,j=void 0===g?function(){}:g,b=e.onSelectConfirm,y=void 0===b?function(){}:b,w=e.children;(0,s.useEffect)((function(){r&&S(!1)}),[r]);var k=(0,s.useState)(!1),N=k[0],S=k[1];return(0,a.jsx)(n.u_l,{layout:"vertical",visible:r,header:l,description:d,size:m,onCancel:j,customFooter:(0,a.jsxs)("div",{className:"flex justify-end w-full items-center space-x-3",children:[(0,a.jsx)(n.zxk,{type:"default",disabled:N,onClick:j,children:"Cancel"}),(0,a.jsx)(n.zxk,{type:o?"danger":"primary",loading:N,disabled:N,onClick:function(e){e.preventDefault(),e.stopPropagation(),S(!0),y()},children:N?v:h})]}),children:w})}},96364:function(e,t,r){var n=r(88983),s=r(27378),a=r(24246);t.Z=function(e){var t=e.visible,r=void 0!==t&&t,i=e.danger,o=void 0!==i&&i,c=e.title,l=void 0===c?"":c,u=e.description,d=void 0===u?"":u,p=e.size,m=void 0===p?"small":p,f=e.buttonLabel,h=void 0===f?"":f,x=e.buttonLoadingLabel,v=void 0===x?"":x,g=e.onSelectCancel,j=void 0===g?function(){}:g,b=e.onSelectConfirm,y=void 0===b?function(){}:b;(0,s.useEffect)((function(){r&&N(!1)}),[r]);var w=(0,s.useState)(!1),k=w[0],N=w[1];return(0,a.jsx)(n.u_l,{header:l,visible:r,title:l,description:d,size:m,hideFooter:!0,onCancel:j,children:(0,a.jsx)(n.l09,{initialValues:{},validateOnBlur:!0,onSubmit:function(){return N(!0),void y()},validate:function(){return[]},children:function(){return(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsx)(n.u_l.Content,{children:(0,a.jsx)("p",{className:"text-sm text-scale-1100",children:d})}),(0,a.jsx)(n.u_l.Separator,{}),(0,a.jsx)(n.u_l.Content,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.zxk,{block:!0,htmlType:"button",type:"default",onClick:j,disabled:k,children:"Cancel"}),(0,a.jsx)(n.zxk,{htmlType:"submit",block:!0,type:o?"danger":"primary",disabled:k,loading:k,children:v&&k?v:h||"Confirm"})]})})]})}})})}},92836:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(24246);function s(e){e.light;return(0,n.jsx)("div",{className:"h-px w-full bg-scale-400"})}},44198:function(e,t,r){var n=r(88983),s=r(24246);t.Z=function(e){var t=e.title,r=e.size,a=void 0===r?"small":r,i=e.onConfirm,o=e.visible,c=e.onCancel,l=e.loading,u=e.confirmLabel,d=e.confirmPlaceholder,p=e.confirmString,m=e.alert,f=e.text,h=e.children;return(0,s.jsx)(n.u_l,{hideFooter:!0,closable:!0,size:a,visible:o,header:t,onCancel:c,children:(0,s.jsx)(n.l09,{validateOnBlur:!0,initialValues:{confirmValue:""},validate:function(e){var t={};return 0===e.confirmValue.length?t.confirmValue="Enter the required value.":e.confirmValue!==p&&(t.confirmValue="Value entered does not match."),t},onSubmit:i,children:function(){return(0,s.jsx)("div",{className:"w-full py-4",children:(0,s.jsxs)("div",{className:"space-y-4",children:[h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.u_l.Content,{children:h}),(0,s.jsx)(n.u_l.Separator,{})]}),m&&(0,s.jsx)(n.u_l.Content,{children:(0,s.jsx)(n.bZj,{variant:"warning",withIcon:!0,title:m})}),void 0!==f&&(0,s.jsx)(n.u_l.Content,{children:(0,s.jsx)("p",{className:"mb-2 block text-sm",children:f})}),(0,s.jsx)(n.u_l.Separator,{}),(0,s.jsx)(n.u_l.Content,{children:(0,s.jsx)(n.IIB,{id:"confirmValue",label:(0,s.jsxs)("span",{children:["Type ",(0,s.jsx)("span",{className:"text-scale-1200",children:p})," to confirm."]}),placeholder:d})}),(0,s.jsx)(n.u_l.Separator,{}),(0,s.jsx)(n.u_l.Content,{children:(0,s.jsx)(n.zxk,{block:!0,type:"danger",size:"medium",htmlType:"submit",loading:l,disabled:l,children:u})})]})})}})})}},38230:function(e,t,r){var n=r(79305),s=r(88983),a=r(24246);t.Z=function(e){var t=e.resourceText,r=e.isFullPage,i=function(e){return(0,n.Z)(e),(0,a.jsx)("div",{className:["block w-full rounded border border-opacity-20 py-4 px-6","border-gray-600 bg-gray-100","dark:border-gray-300 dark:bg-gray-400"].join(" "),children:(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(s.Ldj,{size:"large"})}),(0,a.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{className:"text-sm",children:["You need additional permissions to ",t]}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm text-scale-1100",children:"Contact your organization owner or adminstrator for assistance."})})]})})]})})};return void 0!==r&&r?(0,a.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,a.jsx)("div",{className:"w-[550px]",children:(0,a.jsx)(i,{})})}):(0,a.jsx)(i,{})}},96423:function(e,t,r){var n=r(88983),s=(r(27378),r(24246));function a(e){var t=[];t=e.hideHeaderStyling?["\n    bg-panel-body-light dark:bg-panel-body-dark"]:["\n    bg-panel-header-light dark:bg-panel-header-dark\n    border-b border-panel-border-light dark:border-panel-border-dark"];var r=(0,s.jsxs)("div",{className:"\n        overflow-hidden rounded-md border\n        border-panel-border-light shadow-sm\n        dark:border-panel-border-dark ".concat(e.noMargin?"":"mb-8"," ").concat(e.className),children:[e.title&&(0,s.jsx)("div",{className:t.join(" "),children:(0,s.jsx)("div",{className:"flex items-center px-6 py-4",children:e.title})}),(0,s.jsx)("div",{className:"bg-panel-body-light dark:bg-panel-body-dark ".concat(e.bodyClassName||""),children:e.children}),e.footer&&(0,s.jsx)("div",{className:" border-t border-panel-border-interior-light bg-panel-footer-light dark:border-panel-border-interior-dark dark:bg-panel-footer-dark",children:(0,s.jsx)("div",{className:"flex h-12 items-center px-6",children:e.footer})})]});return!1===e.wrapWithLoading?r:(0,s.jsx)(n.gbz,{active:Boolean(e.loading),children:r})}a.Content=function(e){var t=e.children,r=e.className,n=["px-6 py-4"];return r&&n.push(r),(0,s.jsx)("div",{className:n.join(" "),children:t})},t.Z=a},24954:function(e,t,r){var n=r(79894),s=r(88983),a=r(24246);t.Z=function(e){var t=e.name,r=void 0===t?"":t,i=e.isActive,o=e.isExternal,c=e.icon,l=e.action,u=e.url,d=void 0===u?"":u,p=e.target,m=void 0===p?"_self":p,f=e.onClick,h=e.textClassName,x=void 0===h?"":h,v=e.hoverText,g=void 0===v?"":v,j=e.label,b=(0,a.jsx)(s.v2r.Item,{icon:c,rounded:!0,active:i,onClick:f,children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,a.jsxs)("div",{title:g||("string"===typeof r?r:""),className:"flex items-center gap-2 w-full ".concat(x),children:[(0,a.jsxs)("span",{className:"truncate",children:[r," "]}),void 0!==j&&(0,a.jsx)("span",{className:"text-orange-800 text-xs font-normal truncate",children:j})]}),l]})});return d?o?(0,a.jsx)(n.default,{href:d,children:(0,a.jsx)("a",{target:"_blank",children:(0,a.jsx)(s.zxk,{block:!0,className:"!justify-start",type:"text",size:"small",icon:c,children:r})})}):(0,a.jsx)(n.default,{href:d,passHref:!0,children:(0,a.jsx)("a",{className:"block",target:m,children:b})}):b}},24376:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(88983),s=r(24954),a=r(24246),i=function(e){var t=e.page,r=e.menu;return(0,a.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto",children:(0,a.jsx)(n.v2r,{type:"pills",children:r.map((function(e,i){return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"my-6 space-y-8",children:(0,a.jsxs)("div",{className:"mx-3",children:[(0,a.jsx)(n.v2r.Group,{title:e.title?(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)("span",{children:e.title}),e.isPreview&&(0,a.jsx)(n.Cts,{color:"amber",children:"Not production ready"})]}):null}),(0,a.jsx)("div",{children:e.items.map((function(e){return(0,a.jsx)(s.Z,{url:e.url,name:e.name,icon:e.icon,isActive:t===e.key,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)}))})]})}),i!==r.length-1&&(0,a.jsx)("div",{className:"h-px w-full bg-scale-500"})]},e.title)}))})})}},941:function(e,t,r){r.d(t,{D:function(){return p},m:function(){return m}});var n=r(68043),s=r(25024),a=r(88983),i=r(96423),o=r(18229),c=r(43109),l=r(42791),u=r(20796),d=r(24246),p=function(){var e,t,r=(0,l.UO)().ref,p=(0,o.oF)({projectRef:r}),m=p.data,f=p.isError,h=p.isLoading,x=(0,c.tb)({projectRef:r}),v=x.data,g=x.isError,j=x.isLoading,b=null===v||void 0===v?void 0:v.jwtSecretUpdateStatus,y=(0,l.FH)(n.KA.READ,"service_api_keys"),w=void 0===b||b===s.iL.Updated,k=(null!==(e=null===m||void 0===m?void 0:m.services)&&void 0!==e?e:[]).find((function(e){return e.app.id==u.pG})),N=null!==(t=null===k||void 0===k?void 0:k.service_api_keys)&&void 0!==t?t:[],S=0===N.length;return(0,d.jsx)(i.Z,{title:(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("h5",{className:"text-base",children:"Project API keys"}),(0,d.jsxs)("p",{className:"text-sm text-scale-1000",children:["Your API is secured behind an API gateway which requires an API Key for every request.",(0,d.jsx)("br",{}),"You can use the keys below to use Supabase client libraries."]})]}),children:f||g?(0,d.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,d.jsx)(a.Ldj,{size:16,strokeWidth:1.5}),(0,d.jsx)("p",{className:"text-sm text-scale-1100",children:f?"Failed to retrieve API keys":"Failed to update JWT secret"})]}):S||h||j?(0,d.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,d.jsx)(a.pAw,{className:"animate-spin",size:16,strokeWidth:1.5}),(0,d.jsx)("p",{className:"text-sm text-scale-1100",children:h||S?"Retrieving API keys":"JWT secret is being updated"})]}):N.map((function(e,t){var r;return(0,d.jsx)(i.Z.Content,{className:t>=1&&"border-t border-panel-border-interior-light dark:border-panel-border-interior-dark",children:(0,d.jsx)(a.IIB,{readOnly:!0,disabled:!0,layout:"horizontal",className:"input-mono",label:(0,d.jsxs)(d.Fragment,{children:[null===(r=e.tags)||void 0===r?void 0:r.split(",").map((function(e,t){return(0,d.jsx)("code",{className:"text-xs text-code",children:e},"".concat(e).concat(t))})),"service_role"===e.tags&&(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("code",{className:"bg-red-900 text-xs text-white",children:"secret"})}),"anon"===e.tags&&(0,d.jsx)("code",{className:"text-xs text-code",children:"public"})]}),copy:y&&w,reveal:"anon"!==e.tags&&y&&w,value:y?b===s.iL.Failed?"JWT secret update failed, new API key may have issues":b===s.iL.Updating?"Updating JWT secret...":e.api_key:"You need additional permissions to view API keys",onChange:function(){},descriptionText:"service_role"===e.tags?"This key has the ability to bypass Row Level Security. Never share it publicly.":"This key is safe to use in a browser if you have enabled Row Level Security for your tables and configured policies."})},e.api_key)}))})},m=function(){var e,t,r,n,p,m=(0,l.UO)().ref,h=(0,o.oF)({projectRef:m}),x=h.data,v=h.isLoading,g=h.isError,j=(0,c.tb)({projectRef:m}),b=j.data,y=j.isError,w=j.isLoading,k=null===b||void 0===b?void 0:b.jwtSecretUpdateStatus,N=void 0===k||k===s.iL.Updated,S=null!==(e=null===x||void 0===x||null===(t=x.project)||void 0===t?void 0:t.jwt_secret)&&void 0!==e?e:"",P=(null!==(r=null===x||void 0===x?void 0:x.services)&&void 0!==r?r:[]).find((function(e){return e.app.id==u.pG})),C=null===P||void 0===P?void 0:P.app_config,I="".concat(null!==(n=null===C||void 0===C?void 0:C.protocol)&&void 0!==n?n:"https","://").concat(null!==(p=null===C||void 0===C?void 0:C.endpoint)&&void 0!==p?p:"-");return(0,d.jsx)(f,{children:g||y?(0,d.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,d.jsx)(a.Ldj,{size:16,strokeWidth:1.5}),(0,d.jsx)("p",{className:"text-sm text-scale-1100",children:g?"Failed to retrieve configuration":"Failed to update JWT secret"})]}):v||w?(0,d.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,d.jsx)(a.pAw,{className:"animate-spin",size:16,strokeWidth:1.5}),(0,d.jsx)("p",{className:"text-sm text-scale-1100",children:v?"Retrieving API keys":"JWT secret is being updated"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.Z.Content,{children:(0,d.jsx)(a.IIB,{label:"URL",readOnly:!0,copy:!0,disabled:!0,className:"input-mono",value:I,descriptionText:"A RESTful endpoint for querying and managing your database.",layout:"horizontal"})}),(0,d.jsx)(i.Z.Content,{className:"border-t border-panel-border-interior-light dark:border-panel-border-interior-dark",children:(0,d.jsx)(a.IIB,{label:"JWT Secret",readOnly:!0,copy:N,reveal:N,disabled:!0,value:k===s.iL.Failed?"JWT secret update failed":k===s.iL.Updating?"Updating JWT secret...":S,className:"input-mono",descriptionText:"Used to decode your JWTs. You can also use this to mint your own JWTs.",layout:"horizontal"})})]})})},f=function(e){var t=e.children;return(0,d.jsx)(i.Z,{title:(0,d.jsx)("div",{className:"space-y-3",children:(0,d.jsx)("h5",{className:"text-base",children:"Project Configuration"})}),children:t})}},71714:function(e,t,r){var n=r(24246);t.Z=function(e){return e.active?(0,n.jsx)("div",{className:"logs-shimmering-loader w-full h-0.5"}):null}},43109:function(e,t,r){r.d(t,{tb:function(){return j}});var n=r(90849),s=r(90089),a=r(55732),i=r(34707),o=r.n(i),c=r(25024),l=r(85945),u=r(36492),d=r(14919),p=r(20796),m=(r(27378),r(49175)),f=["enabled"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){return g.apply(this,arguments)}function g(){return(g=(0,a.Z)(o().mark((function e(t,r){var n,s,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.projectRef){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,d.U2)("".concat(p.T5,"/props/project/").concat(s,"/jwt-secret-update-status"),{signal:r});case 5:if(!(a=e.sent).error){e.next=8;break}throw a.error;case 8:return i=null===a||void 0===a||null===(n=a.jwtSecretUpdateStatus)||void 0===n?void 0:n.meta,e.abrupt("return",{changeTrackingId:null===i||void 0===i?void 0:i.change_tracking_id,jwtSecretUpdateError:null===i||void 0===i?void 0:i.error,jwtSecretUpdateProgress:null===i||void 0===i?void 0:i.progress,jwtSecretUpdateStatus:null===i||void 0===i?void 0:i.status});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(e){var t=e.projectRef,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.enabled,a=void 0===n||n,i=(0,s.Z)(r,f),o=(0,l.NL)();return(0,u.a)(m.U.jwtSecretUpdatingStatus(t),(function(e){var r=e.signal;return v({projectRef:t},r)}),x({enabled:a&&"undefined"!==typeof t,refetchInterval:function(e){return!!e&&(e.jwtSecretUpdateStatus===c.iL.Updating&&1e3)},onSuccess:function(){o.invalidateQueries(m.U.postgrest(t))}},i))}},49175:function(e,t,r){r.d(t,{U:function(){return n}});var n={settings:function(e){return["projects",e,"settings"]},api:function(e){return["projects",e,"settings","api"]},postgrest:function(e){return["projects",e,"postgrest"]},jwtSecretUpdatingStatus:function(e){return["projects",e,"jwt-secret-updating-status"]},storage:function(e){return["projects",e,"storage"]}}},2288:function(e,t,r){r.d(t,{qP:function(){return v}});var n=r(90849),s=r(90089),a=r(55732),i=r(34707),o=r.n(i),c=r(36492),l=r(14919),u=r(20796),d=(r(27378),r(49175)),p=["enabled"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)(o().mark((function e(t,r){var n,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.projectRef){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,l.U2)("".concat(u.T5,"/props/project/").concat(n,"/api"),{signal:r});case 5:if(!(s=e.sent).error){e.next=8;break}throw s.error;case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(e){var t=e.projectRef,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.enabled,a=void 0===n||n,i=(0,s.Z)(r,p);return(0,c.a)(d.U.api(t),(function(e){var r=e.signal;return h({projectRef:t},r)}),f({enabled:a&&"undefined"!==typeof t,refetchInterval:function(e,t){var r;if(!e)return!1;var n=e.autoApiService;return 0===(null!==(r=null===n||void 0===n?void 0:n.service_api_keys)&&void 0!==r?r:[]).length?2e3:0}},i))}},83282:function(e,t,r){r.d(t,{VP:function(){return o}});var n=r(90849),s=r(51991);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var o=function(e){var t=e.projectRef,r=e.connectionString,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.cp)({projectRef:t,connectionString:r,sql:"\n    show default_transaction_read_only;\n  ",queryKey:["project-read-only"]},i({select:function(e){var t;return"on"===(null===(t=e.result[0])||void 0===t?void 0:t.default_transaction_read_only)},enabled:"undefined"!==typeof t&&"undefined"!==typeof r},n))}},18229:function(e,t,r){r.d(t,{oF:function(){return v}});var n=r(90849),s=r(90089),a=r(55732),i=r(34707),o=r.n(i),c=r(36492),l=r(14919),u=r(20796),d=(r(27378),r(49175)),p=["enabled"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)(o().mark((function e(t,r){var n,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.projectRef){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,l.U2)("".concat(u.T5,"/props/project/").concat(n,"/settings"),{signal:r});case 5:if(!(s=e.sent).error){e.next=8;break}throw s.error;case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(e){var t=e.projectRef,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.enabled,a=void 0===n||n,i=(0,s.Z)(r,p);return(0,c.a)(d.U.settings(t),(function(e){var r=e.signal;return h({projectRef:t},r)}),f({enabled:a&&"undefined"!==typeof t,refetchInterval:function(e,t){var r,n,s=(null!==(r=null===e||void 0===e?void 0:e.services)&&void 0!==r?r:[]).find((function(e){return e.app.id==u.pG}));return 0===(null!==(n=null===s||void 0===s?void 0:s.service_api_keys)&&void 0!==n?n:[]).length?2e3:0}},i))}},51991:function(e,t,r){r.d(t,{Rj:function(){return v},cp:function(){return j}});var n=r(90849),s=r(90089),a=r(55732),i=r(34707),o=r.n(i),c=r(36492),l=r(4327),u=r.n(l),d=r(14919),p=r(20796),m=(r(27378),r(41532)),f=["enabled"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){return g.apply(this,arguments)}function g(){return(g=(0,a.Z)(o().mark((function e(t,r){var n,s,a,i,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.projectRef,s=t.connectionString,a=t.sql,n){e.next=3;break}throw new Error("projectRef is required");case 3:return i=new Headers,s&&i.set("x-connection-encrypted",s),e.next=7,(0,d.v_)("".concat(p.T5,"/pg-meta/").concat(n,"/query"),{query:a},{headers:Object.fromEntries(i),signal:r});case 7:if(!(c=e.sent).error){e.next=10;break}throw c.error;case 10:return e.abrupt("return",{result:c});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(e){var t=e.projectRef,r=e.connectionString,n=e.sql,a=e.queryKey,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.enabled,l=void 0===o||o,d=(0,s.Z)(i,f);return(0,c.a)(m.M.query(t,null!==a&&void 0!==a?a:[u()(n)]),(function(e){var s=e.signal;return v({projectRef:t,connectionString:r,sql:n},s)}),x({enabled:l&&"undefined"!==typeof t},d))}},41532:function(e,t,r){r.d(t,{M:function(){return s}});var n=r(44285),s={query:function(e,t){return["projects",e,"query"].concat((0,n.Z)(t))}}},45322:function(e,t,r){r.d(t,{DK:function(){return v}});var n=r(90849),s=r(90089),a=r(55732),i=r(34707),o=r.n(i),c=r(36492),l=r(14919),u=r(20796),d=(r(27378),function(e){return["projects",e,"usage"]}),p=["enabled"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)(o().mark((function e(t,r){var n,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.projectRef){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,l.U2)("".concat(u.T5,"/projects/").concat(n,"/usage"),{signal:r});case 5:if(!(s=e.sent).error){e.next=8;break}throw s.error;case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(e){var t=e.projectRef,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.enabled,a=void 0===n||n,i=(0,s.Z)(r,p);return(0,c.a)(d(t),(function(e){var r=e.signal;return h({projectRef:t},r)}),f({enabled:a&&"undefined"!==typeof t},i))}},17737:function(e,t,r){r.d(t,{HN:function(){return I}});var n=r(11246),s=r(44285),a=r(55732),i=r(43350),o=r(80040),c=r(90849),l=r(34707),u=r.n(l),d=r(5332),p=(r(27378),r(79588)),m=r(98784),f=r(57476),h=r(14620),x=r(42791),v=r(98574),g=r(20796),j=r(27061),b=new URL(j.env.SUPABASE_PUBLIC_URL||"http://localhost:8000"),y=("".concat(b.origin,"/rest/v1/"),b.host,b.protocol.replace(":","")),w=(j.env.DEFAULT_PROJECT_NAME,r(61548));function k(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw a}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=null;function I(){return null===C&&(C=new E(null)),C}var O=9e5,R=200,Z=31536e4,_=".emptyFolderPlaceholder",T="Please do not close the browser until it's completed",E=function(){function e(t){var r=this;(0,i.Z)(this,e),(0,c.Z)(this,"projectRef",""),(0,c.Z)(this,"loaded",!1),(0,c.Z)(this,"view",w.De.COLUMNS),(0,c.Z)(this,"sortBy",w.Ye.NAME),(0,c.Z)(this,"sortByOrder","asc"),(0,c.Z)(this,"buckets",[]),(0,c.Z)(this,"selectedBucket",{}),(0,c.Z)(this,"selectedBucketToEdit",{}),(0,c.Z)(this,"columns",[]),(0,c.Z)(this,"openedFolders",[]),(0,c.Z)(this,"selectedItems",[]),(0,c.Z)(this,"selectedItemsToDelete",[]),(0,c.Z)(this,"selectedItemsToMove",[]),(0,c.Z)(this,"selectedFilePreview",{}),(0,c.Z)(this,"selectedFileCustomExpiry",void 0),(0,c.Z)(this,"DEFAULT_OPTIONS",{limit:R,offset:0,sortBy:{column:this.sortBy,order:this.sortByOrder}}),(0,c.Z)(this,"ui",null),(0,c.Z)(this,"supabaseClient",null),(0,c.Z)(this,"showCreateBucketModal",!1),(0,c.Z)(this,"showDeleteBucketModal",!1),(0,c.Z)(this,"showToggleBucketPublicModal",!1),(0,c.Z)(this,"filePreviewCache",[]),(0,c.Z)(this,"uploadProgress",0),(0,c.Z)(this,"abortController",null),(0,c.Z)(this,"initializeSupabaseClient",(function(e,t,n){r.supabaseClient=(0,h.eI)("".concat(g.Qy?"https":n,"://").concat(t),e,{auth:{persistSession:!1,autoRefreshToken:!1,multiTab:!1,detectSessionInUrl:!1,localStorage:{getItem:function(e){},setItem:function(e,t){},removeItem:function(e){}}}})})),(0,c.Z)(this,"updateFileInPreviewCache",(function(e){var t=r.filePreviewCache.map((function(t){return t.id===e.id?e:t}));r.filePreviewCache=t})),(0,c.Z)(this,"addFileToPreviewCache",(function(e){var t=r.filePreviewCache.concat([e]);r.filePreviewCache=t})),(0,c.Z)(this,"clearFilePreviewCache",(function(){r.filePreviewCache=[]})),(0,c.Z)(this,"getLocalStorageKey",(function(){return"supabase-storage-".concat(r.projectRef)})),(0,c.Z)(this,"getLatestColumnIndex",(function(){return r.columns.length-1})),(0,c.Z)(this,"getCurrentlySelectedBucket",(function(){return r.columns.length>1?r.columns[1]:null})),(0,c.Z)(this,"getPathAlongOpenedFolders",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?r.openedFolders.length>0?"".concat(r.selectedBucket.name,"/").concat(r.openedFolders.map((function(e){return e.name})).join("/")):r.selectedBucket.name:r.openedFolders.map((function(e){return e.name})).join("/")})),(0,c.Z)(this,"abortApiCalls",(function(){r.abortController.abort(),r.abortController=new AbortController})),(0,c.Z)(this,"setLoaded",(function(e){r.loaded=e})),(0,c.Z)(this,"openCreateBucketModal",(function(){r.showCreateBucketModal=!0})),(0,c.Z)(this,"closeCreateBucketModal",(function(){r.showCreateBucketModal=!1})),(0,c.Z)(this,"openDeleteBucketModal",(function(e){r.selectedBucketToEdit=e,r.showDeleteBucketModal=!0})),(0,c.Z)(this,"closeDeleteBucketModal",(function(){r.showDeleteBucketModal=!1})),(0,c.Z)(this,"openToggleBucketPublicModal",(function(e){r.selectedBucketToEdit=e,r.showToggleBucketPublicModal=!0})),(0,c.Z)(this,"closeToggleBucketPublicModal",(function(){r.showToggleBucketPublicModal=!1})),(0,c.Z)(this,"setSelectedBucket",(function(e){r.selectedBucket=e,r.clearOpenedFolders(),r.closeFilePreview(),r.clearSelectedItems()})),(0,c.Z)(this,"setView",(function(e){r.view=e,r.closeFilePreview(),r.updateExplorerPreferences()})),(0,c.Z)(this,"setSortBy",function(){var e=(0,a.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.sortBy=t,r.closeFilePreview(),r.updateExplorerPreferences(),e.next=5,r.refetchAllOpenedFolders();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"setSortByOrder",function(){var e=(0,a.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.sortByOrder=t,r.closeFilePreview(),r.updateExplorerPreferences(),e.next=5,r.refetchAllOpenedFolders();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"clearColumns",(function(){r.columns=[]})),(0,c.Z)(this,"pushColumnAtIndex",(function(e,t){r.columns=r.columns.slice(0,t+1).concat([e])})),(0,c.Z)(this,"popColumn",(function(){r.abortApiCalls(),r.columns=r.columns.slice(0,r.getLatestColumnIndex())})),(0,c.Z)(this,"popColumnAtIndex",(function(e){r.columns=r.columns.slice(0,e+1)})),(0,c.Z)(this,"setColumnIsLoadingMore",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r.columns=r.columns.map((function(r,n){return n===e?P(P({},r),{},{isLoadingMoreItems:t}):r}))})),(0,c.Z)(this,"pushOpenedFolderAtIndex",(function(e,t){r.openedFolders=r.openedFolders.slice(0,t).concat(e)})),(0,c.Z)(this,"popOpenedFolders",(function(){r.openedFolders=r.openedFolders.slice(0,r.openedFolders.length-1)})),(0,c.Z)(this,"popOpenedFoldersAtIndex",(function(e){r.openedFolders=r.openedFolders.slice(0,e+1)})),(0,c.Z)(this,"clearOpenedFolders",(function(){r.openedFolders=[]})),(0,c.Z)(this,"setSelectedItems",(function(e){r.selectedItems=e})),(0,c.Z)(this,"clearSelectedItems",(function(e){r.selectedItems=void 0!==e?r.selectedItems.filter((function(t){return t.columnIndex!==e})):[]})),(0,c.Z)(this,"setSelectedItemsToDelete",(function(e){r.selectedItemsToDelete=e})),(0,c.Z)(this,"clearSelectedItemsToDelete",(function(){r.selectedItemsToDelete=[]})),(0,c.Z)(this,"setSelectedItemsToMove",(function(e){r.selectedItemsToMove=e})),(0,c.Z)(this,"clearSelectedItemsToMove",(function(){r.selectedItemsToMove=[]})),(0,c.Z)(this,"setSelectedFileCustomExpiry",(function(e){r.selectedFileCustomExpiry=e})),(0,c.Z)(this,"addNewFolderPlaceholder",(function(e){var t=w.fh.FOLDER,n=-1===e?r.getLatestColumnIndex():e;r.addTempRow(t,"Untitled folder",w.R9.EDITING,n,{},!0)})),(0,c.Z)(this,"addNewFolder",function(){var e=(0,a.Z)(u().mark((function e(t,n){var s,a,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1,null!==(s=r.sanitizeNameForDuplicateInColumn(t,false,n))){e.next=4;break}return e.abrupt("return");case 4:if(/^[a-zA-Z0-9_-]*$/.test(s)){e.next=6;break}return e.abrupt("return",r.ui.setNotification({message:"Folder name contains invalid special characters",category:"error",duration:8e3}));case 6:if(!s.includes("/")&&!s.includes("\\")){e.next=8;break}return e.abrupt("return",r.ui.setNotification({message:"Folder names should not have forward or back slashes.",category:"error",duration:8e3}));case 8:if(0!==s.length){e.next=10;break}return e.abrupt("return",r.removeTempRows(n));case 10:return r.updateFolderAfterEdit(s,n),a="".concat(s,"/").concat(_),i=r.openedFolders.slice(0,n).map((function(e){return e.name})).join("/"),o=i.length>0?"".concat(i,"/").concat(a):a,e.next=16,r.supabaseClient.storage.from(r.selectedBucket.name).upload(o,new File([],_));case 16:if(!(i.length>0)){e.next=19;break}return e.next=19,r.supabaseClient.storage.from(r.selectedBucket.name).remove(["".concat(i,"/").concat(_)]);case 19:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),(0,c.Z)(this,"setFilePreview",function(){var e=(0,a.Z)(u().mark((function e(t){var n,s,a,i,o,c,l,d,p,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null===(n=t.metadata)||void 0===n?void 0:n.size,!(null===(s=t.metadata)||void 0===s?void 0:s.mimetype)||!a||r.selectedFilePreview.id===t.id){e.next=25;break}if(!(a>1e7)){e.next=6;break}return r.selectedFilePreview=P(P({},t),{},{previewUrl:"skipped"}),e.abrupt("return");case 6:if(r.selectedFilePreview=P(P({},t),{},{previewUrl:"loading"}),i=(0,m.find)(r.filePreviewCache,{id:t.id}),o=(0,m.get)(i,["fetchedAt"],null),c=(0,m.get)(i,["expiresIn"],null),!(l=null!==o&&null!==c)||o+1e3*c<Date.now()){e.next=16;break}r.selectedFilePreview=P(P({},t),{},{previewUrl:i.url}),e.next=23;break;case 16:return e.next=18,r.fetchFilePreview(t.name);case 18:d=e.sent,p=r.selectedBucket.public?"".concat(d,"?t=").concat((new Date).toISOString()):d,r.selectedFilePreview=P(P({},t),{},{previewUrl:p}),f={id:t.id,url:d,expiresIn:Z,fetchedAt:Date.now()},l?r.updateFileInPreviewCache(f):r.addFileToPreviewCache(f);case 23:e.next=26;break;case 25:r.selectedFilePreview=P(P({},t),{},{previewUrl:null});case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"closeFilePreview",(function(){r.selectedFilePreview={}})),(0,c.Z)(this,"copyFileURLToClipboard",function(){var e=(0,a.Z)(u().mark((function e(t){var n,s,a,i,o,c=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:0,!(s=(0,m.find)(r.filePreviewCache,{id:t.id}))||0!==n){e.next=6;break}(0,v.vQ)(s.url,(function(){r.ui.setNotification({category:"success",message:"Copied URL for ".concat(t.name," to clipboard."),duration:4e3})})),e.next=10;break;case 6:return e.next=8,r.fetchFilePreview(t.name,n);case 8:a=e.sent;try{(i=new URL(a)).searchParams.set("t",(new Date).toISOString()),(0,v.vQ)(i.toString(),(function(){r.ui.setNotification({category:"success",message:"Copied URL for ".concat(t.name," to clipboard."),duration:4e3})})),o={id:t.id,url:i.toString(),expiresIn:Z,fetchedAt:Date.now()},r.addFileToPreviewCache(o)}catch(l){r.ui.setNotification({category:"error",message:"Failed to copy URL: ".concat(l)})}case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"createBucket",function(){var e=(0,a.Z)(u().mark((function e(t){var n,s,a,i,o=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]&&o[1],!(0,m.isNil)(r.supabaseClient)){e.next=3;break}return e.abrupt("return",r.ui.setNotification({message:"Failed to initialize supabase client, try refreshing your browser.",category:"error"}));case 3:return e.next=5,r.supabaseClient.storage.createBucket(t,{public:n});case 5:if(s=e.sent,a=s.data,!(i=s.error)){e.next=12;break}return r.ui.setNotification({message:i.message,category:"error"}),r.closeCreateBucketModal(),e.abrupt("return",void 0);case 12:return e.next=14,r.fetchBuckets();case 14:return r.closeCreateBucketModal(),e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"openBucket",function(){var e=(0,a.Z)(u().mark((function e(t){var n,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,s=t.name,-1,(0,m.isEqual)(r.selectedBucket,t)){e.next=6;break}return r.setSelectedBucket(t),e.next=6,r.fetchFolderContents(n,s,-1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"fetchBuckets",(0,a.Z)(u().mark((function e(){var t,n,s,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.supabaseClient.storage.listBuckets();case 2:if(t=e.sent,n=t.data,!(s=t.error)){e.next=7;break}return e.abrupt("return",r.ui.setNotification({message:s.message,category:"error"}));case 7:return a=n.map((function(e){return P(P({},e),{},{type:w.fh.BUCKET,status:w.R9.READY})})),r.buckets=a,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))),(0,c.Z)(this,"deleteBucket",function(){var e=(0,a.Z)(u().mark((function e(t){var n,s,a,i,o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,s=t.name,e.next=3,r.supabaseClient.storage.emptyBucket(n);case 3:if(a=e.sent,!(i=a.error)){e.next=8;break}return r.ui.setNotification({message:i.message,category:"error"}),e.abrupt("return",!1);case 8:return e.next=10,r.supabaseClient.storage.deleteBucket(n);case 10:if(o=e.sent,!(c=o.error)){e.next=15;break}return r.ui.setNotification({message:c.message,category:"error"}),e.abrupt("return",!1);case 15:return e.next=17,r.fetchBuckets();case 17:return s===r.selectedBucket.name&&(r.setSelectedBucket({}),r.clearColumns(),r.clearOpenedFolders()),r.clearSelectedItemsToDelete(),r.closeDeleteBucketModal(),e.abrupt("return",!0);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"toggleBucketPublic",function(){var e=(0,a.Z)(u().mark((function e(t){var n,s,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,e.next=3,r.supabaseClient.storage.updateBucket(n,{public:!t.public});case 3:if(s=e.sent,s.data,!(a=s.error)){e.next=9;break}return r.ui.setNotification({message:a.message,category:"error"}),e.abrupt("return",r.closeToggleBucketPublicModal());case 9:return e.next=11,r.fetchBuckets();case 11:return r.clearFilePreviewCache(),r.closeToggleBucketPublicModal(),e.next=15,r.openBucket(P(P({},t),{},{public:!t.public}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"getFile",function(){var e=(0,a.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,r){return t.file(e,r)}));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.error("getFile error:",e.t0),e.abrupt("return",void 0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"getFilesDataTransferItems",function(){var e=(0,a.Z)(u().mark((function e(t){var n,a,i,o,c,l,p,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.ui.setNotification({category:"loading",message:"Retrieving items to upload..."}),a=[],i=[],o=k(t);try{for(o.s();!(c=o.n()).done;)l=c.value,i.push(l.webkitGetAsEntry())}catch(u){o.e(u)}finally{o.f()}case 5:if(!(i.length>0)){e.next=25;break}if(!(p=i.shift()||{}).isFile){e.next=14;break}return e.next=10,r.getFile(p);case 10:void 0!==(m=e.sent)&&(m.path=p.fullPath.slice(1),a.push(m)),e.next=23;break;case 14:if(!p.isDirectory){e.next=23;break}return e.t0=i.push,e.t1=i,e.t2=s.Z,e.next=20,r.readAllDirectoryEntries(p.createReader());case 20:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 23:e.next=5;break;case 25:return d.ZP.dismiss(n),e.abrupt("return",a);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"readAllDirectoryEntries",function(){var e=(0,a.Z)(u().mark((function e(t){var n,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,r.readEntriesPromise(t);case 3:a=e.sent;case 4:if(!(a.length>0)){e.next=11;break}return n.push.apply(n,(0,s.Z)(a)),e.next=8,r.readEntriesPromise(t);case 8:a=e.sent,e.next=4;break;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"readEntriesPromise",function(){var e=(0,a.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,r){t.readEntries(e,r)}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error("readEntriesPromise error:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"uploadFiles",function(){var e=(0,a.Z)(u().mark((function e(t,n){var s,i,o,c,l,p,f,h,x,v,g,j,b,y,k,N,S=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=S.length>2&&void 0!==S[2]&&S[2],i=new Date,o=!0,!s){e.next=9;break}return e.next=6,r.getFilesDataTransferItems(t);case 6:e.t0=e.sent.filter((function(e){return!e.path.includes("#/")})),e.next=10;break;case 9:e.t0=Array.from(t);case 10:return c=e.t0,l=-1===n?r.getLatestColumnIndex():n,p=(0,m.get)(r.columns,[l,"items"],[]).filter((function(e){return!e.id})).map((function(e){return e.name})),f=c.map((function(e){if(!e.path)return e;var t=e.path.split("/"),s=t.length>1?t[0]:null;if(p.includes(s)){var a=r.sanitizeNameForDuplicateInColumn(s,o,n);t[0]=a,e.path=t.join("/")}return e})),r.uploadProgress=0,h=[],x=f.length,v=0,g=0,j=r.openedFolders.slice(0,l).map((function(e){return e.name})).join("/"),b=r.ui.setNotification({category:"loading",message:"Uploading ".concat(f.length," file").concat(f.length>1?"s":"","..."),description:T,progress:0}),y=f.map((function(e){var t={cacheControl:"3600"},n={mimetype:e.type,size:e.size},s=(0,m.get)(e,["path"],"").split("/").length>1,i=s?e.name:r.sanitizeNameForDuplicateInColumn(e.name,o),c=(0,m.has)(e,["path"])&&s?e.path:i,d=j.length>0?"".concat(j,"/").concat(c):c;if(s){var p=e.path.split("/")[0];h.includes(p)||(r.addTempRow(w.fh.FOLDER,p,w.R9.LOADING,l,n),h.push(p))}else r.addTempRow(w.fh.FILE,i,w.R9.LOADING,l,n);return function(){return new Promise(function(){var n=(0,a.Z)(u().mark((function n(s){var a,i;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.supabaseClient.storage.from(r.selectedBucket.name).upload(d,e,t);case 2:a=n.sent,i=a.error,r.uploadProgress=r.uploadProgress+1/f.length,i?(g+=1,r.ui.setNotification({message:"Failed to upload ".concat(e.name,": ").concat(i.message),category:"error"}),s()):(v+=1,s());case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}})),k=(0,m.chunk)(y,10),e.prev=23,e.next=26,k.reduce(function(){var e=(0,a.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.next=4,Promise.allSettled(n.map((function(e){return e()})));case 4:r.ui.setNotification({id:b,category:"loading",message:"Uploading ".concat(f.length," file").concat(f.length>1?"s":"","..."),description:T,progress:100*r.uploadProgress});case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Promise.resolve());case 26:if(!(v>0)){e.next=29;break}return e.next=29,r.supabaseClient.storage.from(r.selectedBucket.name).remove(["".concat(j,"/").concat(_)]);case 29:return e.next=31,r.refetchAllOpenedFolders();case 31:0===x?d.ZP.dismiss(b):g===x?r.ui.setNotification({id:b,category:"error",message:"Failed to upload ".concat(x," file").concat(x>1?"s":"","!")}):v===x?r.ui.setNotification({id:b,category:"success",message:"Successfully uploaded ".concat(x," file").concat(x>1?"s":"","!")}):r.ui.setNotification({id:b,category:"success",message:"Successfully uploaded ".concat(v," out of ").concat(x," file").concat(x>1?"s":"","!")}),e.next=37;break;case 34:e.prev=34,e.t1=e.catch(23),r.ui.setNotification({id:b,error:e.t1,message:"Failed to upload files",category:"error"});case 37:N=new Date,console.log("Total time taken for ".concat(f.length," files: ").concat((N-i)/1e3," seconds"));case 39:case"end":return e.stop()}}),e,null,[[23,34]])})));return function(t,r){return e.apply(this,arguments)}}()),(0,c.Z)(this,"moveFiles",function(){var e=(0,a.Z)(u().mark((function e(t){var n,s,i,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,m.compact)(t.split("/")),s=n.join("/"),i=0,r.clearSelectedItems(),o=(0,d.ZP)("Please do not close the browser until the delete is completed",{duration:1/0}),e.next=7,Promise.all(r.selectedItemsToMove.map(function(){var e=(0,a.Z)(u().mark((function e(n){var a,o,c,l,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.openedFolders.slice(0,n.columnIndex).map((function(e){return e.name})).join("/"),o=a.length>0?"".concat(a,"/").concat(n.name):n.name,c=t.length>0?"".concat(s,"/").concat(n.name):n.name,e.next=5,r.supabaseClient.storage.from(r.selectedBucket.name).move(o,c);case 5:l=e.sent,(d=l.error)&&(i+=1,r.ui.setNotification({message:d.message,category:"error"}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return i===r.selectedItemsToMove.length?r.ui.setNotification({message:"Failed to move files",category:"error"}):r.ui.setNotification({message:"Successfully moved ".concat(r.selectedItemsToMove.length-i," to ").concat(s),category:"success"}),d.ZP.dismiss(o),c=r.selectedItemsToMove.map((function(e){return e.id})),l=r.filePreviewCache.filter((function(e){return!c.includes(e.id)})),r.filePreviewCache=l,e.next=14,r.refetchAllOpenedFolders();case 14:r.clearSelectedItemsToMove();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"fetchFilePreview",function(){var e=(0,a.Z)(u().mark((function e(t){var n,s,a,i,o,c,l,d,p=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.length>1&&void 0!==p[1]?p[1]:0,s=!1,a=r.getPathAlongOpenedFolders(s),i=a.length>0?"".concat(a,"/").concat(t):t,!r.selectedBucket.public){e.next=12;break}return e.next=7,r.supabaseClient.storage.from(r.selectedBucket.name).getPublicUrl(i);case 7:if(o=e.sent,c=o.data,o.error){e.next=12;break}return e.abrupt("return",c.publicUrl);case 12:return e.next=14,r.supabaseClient.storage.from(r.selectedBucket.name).createSignedUrl(i,n||Z);case 14:if(l=e.sent,d=l.data,l.error){e.next=19;break}return e.abrupt("return",d.signedUrl);case 19:return e.abrupt("return",null);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"deleteFiles",function(){var e=(0,a.Z)(u().mark((function e(t){var n,s,i,o,c,l,p,f,h=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.length>1&&void 0!==h[1]&&h[1],r.closeFilePreview(),s=0,i=(0,m.some)(t,"prefix")?t.map((function(e){return"".concat(e.prefix,"/").concat(e.name)})):t.map((function(e){var t=e.name,n=e.columnIndex,s=r.openedFolders.slice(0,n).map((function(e){return e.name})).join("/");return r.updateRowStatus(t,w.R9.LOADING,n),s.length>0?"".concat(s,"/").concat(t):t})),r.clearSelectedItems(),o=r.ui.setNotification({category:"loading",message:"Deleting ".concat(i.length," file(s)..."),description:T,progress:0}),c=(0,m.chunk)(i,2).map((function(e){return function(){return s+=e.length/i.length,r.supabaseClient.storage.from(r.selectedBucket.name).remove(e)}})),e.next=9,(0,m.chunk)(c,2).reduce(function(){var e=(0,a.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.next=4,Promise.all(n.map((function(e){return e()})));case 4:r.ui.setNotification({id:o,category:"loading",message:"Deleting ".concat(i.length," file(s)..."),description:T,progress:100*s});case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Promise.resolve());case 9:if(l=t.map((function(e){return e.id})),p=r.filePreviewCache.filter((function(e){return!l.includes(e.id)})),r.filePreviewCache=p,n){e.next=22;break}return f=(0,m.uniq)(i.map((function(e){var t=e.split("/");return t.slice(0,t.length-1).join("/")}))),e.next=16,Promise.all(f.map((function(e){return r.validateParentFolderEmpty(e)})));case 16:return r.ui.setNotification({id:o,category:"success",message:"Successfully deleted ".concat(i.length," file(s)")}),e.next=19,r.refetchAllOpenedFolders();case 19:r.clearSelectedItemsToDelete(),e.next=23;break;case 22:d.ZP.dismiss(o);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"downloadFolder",function(){var e=(0,a.Z)(u().mark((function e(t){var n,s,i,o,c,l,d,p,h,x;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,s=r.ui.setNotification({category:"loading",message:"Retrieving files from folder..."}),e.next=4,r.getAllItemsAlongFolder(t);case 4:return i=e.sent,r.ui.setNotification({id:s,category:"loading",message:"Downloading ".concat(i.length," files..."),description:T,progress:0}),o=i.map((function(e){var t,s,o=null!==(t=null===(s=e.metadata)||void 0===s?void 0:s.mimetype)&&void 0!==t?t:null;return function(){return new Promise(function(){var t=(0,a.Z)(u().mark((function t(s){var a,c,l;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.supabaseClient.storage.from(r.selectedBucket.name).download("".concat(e.prefix,"/").concat(e.name));case 2:a=t.sent,c=a.data,l=a.error,n+=1/i.length,s(!l&&{name:e.name,prefix:e.prefix,blob:new Blob([c],{type:o})});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}})),c=(0,m.chunk)(o,10),e.next=10,c.reduce(function(){var e=(0,a.Z)(u().mark((function e(t,a){var o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return o=e.sent,e.next=5,Promise.allSettled(a.map((function(e){return e()})));case 5:return c=e.sent,r.ui.setNotification({id:s,category:"loading",message:"Downloading ".concat(i.length," file").concat(i.length>1?"s":"","..."),description:T,progress:100*n}),e.abrupt("return",(null!==o&&void 0!==o?o:[]).concat(c.map((function(e){return e.value})).filter(Boolean)));case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Promise.resolve());case 10:return l=e.sent,d=new f.U5("application/zip"),p=new f._Q(d,{bufferedWrite:!0}),l.forEach((function(e){p.add("".concat(e.prefix,"/").concat(e.name),new f.Nt(e.blob))})),e.t0=URL,e.next=17,p.close();case 17:e.t1=e.sent,h=e.t0.createObjectURL.call(e.t0,e.t1),(x=document.createElement("a")).href=h,x.setAttribute("download","".concat(t.name,".zip")),document.body.appendChild(x),x.click(),x.parentNode.removeChild(x),r.ui.setNotification({id:s,category:"success",message:'Successfully downloaded folder "'.concat(t.name,'"')});case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"downloadSelectedFiles",function(){var e=(0,a.Z)(u().mark((function e(t){var n,i,o,c,l,d,p,h,x,v,g;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Math.min.apply(Math,(0,s.Z)(t.map((function(e){return e.columnIndex})))),i=t.map((function(e){var t=e.name,s=e.columnIndex,a=r.openedFolders.slice(n,s).map((function(e){return e.name})).join("/"),i=a.length>0?"".concat(a,"/").concat(t):t;return P(P({},e),{},{formattedPathToFile:i})})),o=0,!0,!1,c=r.ui.setNotification({category:"loading",message:"Downloading ".concat(t.length," files...")}),l=i.map((function(e){return function(){return new Promise(function(){var t=(0,a.Z)(u().mark((function t(n){var s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.downloadFile(e,false,true);case 2:s=t.sent,o+=1/i.length,n(P(P({},s),{},{name:e.formattedPathToFile}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}})),d=(0,m.chunk)(l,10),e.next=10,d.reduce(function(){var e=(0,a.Z)(u().mark((function e(n,s){var a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return a=e.sent,e.next=5,Promise.allSettled(s.map((function(e){return e()})));case 5:return i=e.sent,r.ui.setNotification({id:c,category:"loading",message:"Downloading ".concat(t.length," file").concat(t.length>1?"s":"","..."),description:T,progress:100*o}),e.abrupt("return",(null!==a&&void 0!==a?a:[]).concat(i.map((function(e){return e.value})).filter(Boolean)));case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Promise.resolve());case 10:return p=e.sent,h=new f.U5("application/zip"),x=new f._Q(h,{bufferedWrite:!0}),p.forEach((function(e){x.add(e.name,new f.Nt(e.blob))})),e.t0=URL,e.next=17,x.close();case 17:e.t1=e.sent,v=e.t0.createObjectURL.call(e.t0,e.t1),(g=document.createElement("a")).href=v,g.setAttribute("download","supabase-files.zip"),document.body.appendChild(g),g.click(),g.parentNode.removeChild(g),r.ui.setNotification({id:c,category:"success",message:"Successfully downloaded ".concat(p.length," files")});case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"downloadFile",function(){var e=(0,a.Z)(u().mark((function e(t){var n,s,a,i,o,c,l,d,p,f,h,x,v,g,j=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(j.length>1&&void 0!==j[1])||j[1],s=j.length>2&&void 0!==j[2]&&j[2],a=t.name,i=(0,m.get)(t,["metadata","mimetype"],null),o=n?r.ui.setNotification({category:"loading",message:"Retrieving ".concat(a,"...")}):void 0,c=r.openedFolders.slice(0,t.columnIndex).map((function(e){return e.name})).join("/"),l=c.length>0?"".concat(c,"/").concat(a):a,e.next=9,r.supabaseClient.storage.from(r.selectedBucket.name).download(l);case 9:if(d=e.sent,p=d.data,f=d.error){e.next=29;break}if(h=p,x=new Blob([h],{type:i}),!s){e.next=17;break}return e.abrupt("return",{name:a,blob:x});case 17:return v=window.URL.createObjectURL(x),(g=document.createElement("a")).href=v,g.setAttribute("download","".concat(a)),document.body.appendChild(g),g.click(),g.parentNode.removeChild(g),window.URL.revokeObjectURL(h),o&&r.ui.setNotification({id:o,category:"success",message:"Downloading ".concat(a)}),e.abrupt("return",!0);case 29:return o&&r.ui.setNotification({error:f,id:o,category:"error",message:"Failed to download ".concat(a)}),e.abrupt("return",!1);case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"renameFile",function(){var e=(0,a.Z)(u().mark((function e(t,n,s){var a,i,o,c,l,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t.name)!==n){e.next=5;break}r.updateRowStatus(a,w.R9.READY,s),e.next=19;break;case 5:return r.updateRowStatus(a,w.R9.LOADING,s,n),!1,i=r.getPathAlongOpenedFolders(false),o=i.length>0?"".concat(i,"/").concat(a):a,c=i.length>0?"".concat(i,"/").concat(n):n,e.next=12,r.supabaseClient.storage.from(r.selectedBucket.name).move(o,c);case 12:return l=e.sent,(d=l.error)&&r.ui.setNotification({message:d.message,type:"error"}),e.next=17,r.refetchAllOpenedFolders();case 17:p=r.filePreviewCache.filter((function(e){return e.id!==t.id})),r.filePreviewCache=p;case 19:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),(0,c.Z)(this,"fetchFolderContents",function(){var e=(0,a.Z)(u().mark((function e(t,n,s){var a,i,o,c,l,d,p,m,f=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>3&&void 0!==f[3]?f[3]:"",r.abortApiCalls(),r.updateRowStatus(n,w.R9.LOADING,s),r.pushColumnAtIndex({id:t,name:n,status:w.R9.LOADING,items:[]},s),i=r.openedFolders.map((function(e){return e.name})).join("/"),o={limit:R,offset:0,search:a,sortBy:{column:r.sortBy,order:r.sortByOrder}},c={signal:r.abortController.signal},e.next=9,r.supabaseClient.storage.from(r.selectedBucket.name).list(i,o,c);case 9:l=e.sent,d=l.data,p=l.error,r.updateRowStatus(n,w.R9.READY,s),p||(m=r.formatFolderItems(d),r.pushColumnAtIndex({id:t||n,name:n,items:m,hasMoreItems:m.length===R,isLoadingMoreItems:!1},s));case 14:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),(0,c.Z)(this,"fetchMoreFolderContents",function(){var e=(0,a.Z)(u().mark((function e(t,n){var s,a,i,o,c,l,d,p=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>2&&void 0!==p[2]?p[2]:"",r.setColumnIsLoadingMore(t),a=r.openedFolders.map((function(e){return e.name})).join("/"),i={limit:R,offset:n.items.length,search:s,sortBy:{column:r.sortBy,order:r.sortByOrder}},o={signal:r.abortController.signal},e.next=7,r.supabaseClient.storage.from(r.selectedBucket.name).list(a,i,o);case 7:c=e.sent,l=c.data,c.error||(d=r.formatFolderItems(l),r.columns=r.columns.map((function(e,r){return r===t?P(P({},e),{},{items:e.items.concat(d),isLoadingMoreItems:!1,hasMoreItems:l.length===R}):e})));case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),(0,c.Z)(this,"refetchAllOpenedFolders",(0,a.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.openedFolders.map((function(e){return e.name})),e.next=3,r.fetchFoldersByPath(t);case 3:case"end":return e.stop()}}),e)})))),(0,c.Z)(this,"fetchFoldersByPath",function(){var e=(0,a.Z)(u().mark((function e(t){var n,s,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[""].concat(t),e.next=3,Promise.all(n.map(function(){var e=(0,a.Z)(u().mark((function e(n,s){var a,i,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.slice(0,s).join("/"),i={limit:R,offset:0,sortBy:{column:r.sortBy,order:r.sortByOrder}},e.next=4,r.supabaseClient.storage.from(r.selectedBucket.name).list(a,i);case 4:return o=e.sent,c=o.data,(l=o.error)&&console.error("Error at fetchFoldersByPath:",l),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 3:s=e.sent,i=s.map((function(e,t){var s=r.formatFolderItems(e);return{id:null,name:0===t?r.selectedBucket.name:n[t],items:s,hasMoreItems:s.length===R,isLoadingMoreItems:!1}})),r.columns=i,o=t.map((function(e,t){var r=(0,m.find)(i[t].items,{name:e});return r||{id:null,name:e,type:w.fh.FOLDER,status:w.R9.READY}})),r.openedFolders=o;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"validateParentFolderEmpty",function(){var e=(0,a.Z)(u().mark((function e(t){var n,s,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.supabaseClient.storage.from(r.selectedBucket.name).list(t,r.DEFAULT_OPTIONS);case 2:if(n=e.sent,s=n.data,n.error||0!==s.length){e.next=9;break}return a="".concat(t,"/").concat(_),e.next=9,r.supabaseClient.storage.from(r.selectedBucket.name).upload(a,new File([],_));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"deleteFolder",function(){var e=(0,a.Z)(u().mark((function e(t){var n,s,a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=!0,e.next=3,r.getAllItemsAlongFolder(t);case 3:return a=e.sent,e.next=6,r.deleteFiles(a,s);case 6:if((null===(n=r.openedFolders[r.openedFolders.length-1])||void 0===n?void 0:n.name)===t.name&&(r.popColumnAtIndex(t.columnIndex),r.popOpenedFoldersAtIndex(t.columnIndex-1)),i=r.openedFolders.map((function(e){return e.name})).join("/"),!(i.length>0)){e.next=12;break}return e.next=12,r.validateParentFolderEmpty(i);case 12:return e.next=14,r.refetchAllOpenedFolders();case 14:r.clearSelectedItemsToDelete(),r.ui.setNotification({category:"success",message:"Successfully deleted ".concat(t.name)});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"renameFolder",function(){var e=(0,a.Z)(u().mark((function e(t,n,s){var i,o,c,l,d,p,f,h,x;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=t.name)!==n){e.next=3;break}return e.abrupt("return",r.updateRowStatus(i,w.R9.READY,s));case 3:if(o=r.ui.setNotification({category:"loading",message:"Renaming folder to ".concat(n),description:T,progress:0}),!n.includes("/")&&!n.includes("\\")){e.next=6;break}return e.abrupt("return",r.ui.setNotification({message:"Folder name cannot contain forward or back slashes.",type:"error"}));case 6:return r.updateRowStatus(i,w.R9.LOADING,s,n),e.next=9,r.getAllItemsAlongFolder(t);case 9:return c=e.sent,l=0,d=!1,p=c.map((function(e){var t="".concat(e.prefix,"/").concat(e.name),i=t.split("/"),o=i.slice(0,s).concat(n).concat(i.slice(s+1)).join("/");return function(){return new Promise(function(){var e=(0,a.Z)(u().mark((function e(n){var s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l+=1/c.length,e.next=3,r.supabaseClient.storage.from(r.selectedBucket.name).move(t,o);case 3:s=e.sent,s.error&&(d=!0,r.ui.setNotification({category:"error",message:"Failed to move ".concat(t," to the new folder")})),n();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})),f=(0,m.chunk)(p,2),e.prev=14,e.next=17,f.reduce(function(){var e=(0,a.Z)(u().mark((function e(t,s){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.next=4,Promise.all(s.map((function(e){return e()})));case 4:r.ui.setNotification({id:o,category:"loading",message:"Renaming folder to ".concat(n),description:T,progress:100*l});case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Promise.resolve());case 17:return d?r.ui.setNotification({id:o,message:"Renamed folder to ".concat(n," with some errors"),category:"error"}):r.ui.setNotification({id:o,message:"Successfully renamed folder to ".concat(n),category:"success"}),e.next=20,r.refetchAllOpenedFolders();case 20:h=c.map((function(e){return e.id})),x=r.filePreviewCache.filter((function(e){return!h.includes(e.id)})),r.filePreviewCache=x,e.next=28;break;case 25:e.prev=25,e.t0=e.catch(14),r.ui.setNotification({id:o,message:"Failed to rename folder to ".concat(n),category:"error"});case 28:case"end":return e.stop()}}),e,null,[[14,25]])})));return function(t,r,n){return e.apply(this,arguments)}}()),(0,c.Z)(this,"getAllItemsAlongFolder",function(){var e=(0,a.Z)(u().mark((function e(t){var n,s,a,i,o,c,l,d,p,m,f,h,x,v,g;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=[],c="",l=t.name,d=t.columnIndex,void 0===(p=t.prefix)?(m=r.openedFolders.slice(0,d).map((function(e){return e.name})).join("/"),c=m.length>0?"".concat(m,"/").concat(l):l):c="".concat(p,"/").concat(l),f={limit:R,offset:0,sortBy:{column:r.sortBy,order:r.sortByOrder}},h=[];case 6:return e.next=8,r.supabaseClient.storage.from(r.selectedBucket.name).list(c,f);case 8:if(x=e.sent,v=x.data,h=h.concat(v),f.offset+=f.limit,!((v||[]).length<f.limit)){e.next=14;break}return e.abrupt("break",16);case 14:e.next=6;break;case 16:return g=null!==(n=null===(s=h)||void 0===s?void 0:s.filter((function(e){return null===e.id})))&&void 0!==n?n:[],(null!==(a=null===(i=h)||void 0===i?void 0:i.filter((function(e){return null!==e.id})))&&void 0!==a?a:[]).forEach((function(e){return o.push(P(P({},e),{},{prefix:c}))})),e.next=21,Promise.all(g.map((function(e){return r.getAllItemsAlongFolder(P(P({},e),{},{prefix:c}))})));case 21:return e.sent.map((function(e){e.map((function(e){return o.push(e)}))})),e.abrupt("return",o);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,c.Z)(this,"sanitizeNameForDuplicateInColumn",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.getLatestColumnIndex(),a=r.columns[s],i=a.items.filter((function(e){return e.status!==w.R9.EDITING})),o=i.filter((function(t){return t.name===e})).length>0;if(o){if(t){var c=e.split("."),l=(0,n.Z)(c,2),u=l[0],d=l[1],p=new RegExp("".concat(u," \\([-0-9]+\\)").concat(d?"."+d:"","$")),m=i.filter((function(e){return e.name.match(p)})),f=u+" (".concat(m.length+1,")");return d?"".concat(f,".").concat(d):f}return r.ui.setNotification({message:"The name ".concat(e," already exists in the current directory. Please use a different name."),category:"error",duration:4e3}),null}return e})),(0,c.Z)(this,"formatFolderItems",(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=null!==(e=null===t||void 0===t?void 0:t.filter((function(e){return e.name!==_})).map((function(e){var t=e.id?w.fh.FILE:w.fh.FOLDER,r=Number(new Date)-Number(new Date(e.created_at)),n=t===w.fh.FILE&&!e.metadata&&r>=O,s=t===w.fh.FILE&&!e.metadata&&r<=O?w.R9.LOADING:w.R9.READY;return P(P({},e),{},{type:t,status:s,isCorrupted:n})})))&&void 0!==e?e:[];return r})),(0,c.Z)(this,"addTempRow",(function(e,t,n,s){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=r.columns.map((function(r,o){if(o===s){var c={type:e,name:t,status:n,metadata:a},l=i?[c].concat(r.items):r.items.concat([c]);return P(P({},r),{},{items:l})}return r}));r.columns=o})),(0,c.Z)(this,"removeTempRows",(function(e){var t=r.columns.map((function(t,r){if(r===e){var n=t.items.filter((function(e){return(0,m.has)(e,"id")}));return P(P({},t),{},{items:n})}return t}));r.columns=t})),(0,c.Z)(this,"setSelectedItemToRename",(function(e){r.updateRowStatus(e.name,w.R9.EDITING,e.columnIndex)})),(0,c.Z)(this,"updateRowStatus",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.getLatestColumnIndex(),s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=r.columns.map((function(r,a){if(a===n){var i=r.items.map((function(r){return r.name===e?P(P({},r),{},{status:t},s&&{name:s}):r}));return P(P({},r),{},{items:i})}return r}));r.columns=a})),(0,c.Z)(this,"updateFolderAfterEdit",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.getLatestColumnIndex(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w.R9.READY,s=r.columns.map((function(r,s){if(s===t){var a=r.items.map((function(t){if(t.status===w.R9.EDITING){var r=(new Date).toISOString();return P(P({},t),{},{status:n,name:e,createdAt:r,lastAccessedAt:r,updatedAt:r,metadata:null,id:null})}return t}));return P(P({},r),{},{items:a})}return r}));r.columns=s})),(0,c.Z)(this,"updateExplorerPreferences",(function(){var e=r.getLocalStorageKey(),t={view:r.view,sortBy:r.sortBy,sortByOrder:r.sortByOrder};return localStorage.setItem(e,JSON.stringify(t)),t})),(0,c.Z)(this,"loadExplorerPreferences",(function(){var e=r.getLocalStorageKey(),t=localStorage.getItem(e);if(t){var n=JSON.parse(t),s=n.view,a=n.sortBy,i=n.sortByOrder;r.view=s,r.sortBy=a,r.sortByOrder=i}else{var o=r.updateExplorerPreferences(),c=o.view,l=o.sortBy,u=o.sortByOrder;r.view=c,r.sortBy=l,r.sortByOrder=u}})),(0,p.ky)(this,{supabaseClient:!1}),this.projectRef=t,this.ui=(0,x.oR)().ui,this.abortController=new AbortController}return(0,o.Z)(e,[{key:"initStore",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y;this.projectRef=e,this.initializeSupabaseClient(r,t,n)}},{key:"currentBucketName",get:function(){return this.selectedBucket.name}}]),e}()}}]);
//# sourceMappingURL=7571-affbab4bed97d3cf.js.map