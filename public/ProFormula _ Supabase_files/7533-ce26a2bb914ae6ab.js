"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7533],{81920:function(e,t,s){s.d(t,{Gb:function(){return n},H8:function(){return i},mp:function(){return r},$H:function(){return a}});var n=function(e){if(!e)return 0;var t=e.split("supabase-postgres-"),s=t[t.length-1].split("-")[0];return Number(s.split(".").join(""))},i=function(e){return[{id:void 0,name:"Micro Add-on",metadata:{default_price_id:void 0,supabase_prod_id:"addon_instance_micro",features:"2-core ARM (shared) \u2022 1GB memory \u2022 2,606Mbps Disk IO"},prices:[{id:void 0,currency:"usd",recurring:{interval:"month",usage_type:"licensed",interval_count:1,aggregate_usage:null,trial_period_days:null},unit_amount:0}]}].concat(["addon_instance_small","addon_instance_medium","addon_instance_large","addon_instance_xlarge","addon_instance_xxlarge","addon_instance_4xlarge","addon_instance_8xlarge","addon_instance_12xlarge","addon_instance_16xlarge"].map((function(t){return e.find((function(e){return e.metadata.supabase_prod_id===t}))}))).filter((function(e){return void 0!==e}))},r=function(e){var t={id:void 0,name:"Disable PITR",metadata:{default_price_id:void 0,supabase_prod_id:"addon_pitr_0days",features:""},prices:[{id:void 0,currency:"usd",recurring:{interval:"month",usage_type:"licensed",interval_count:1,aggregate_usage:null,trial_period_days:null},unit_amount:0}]},s=["addon_pitr_7days","addon_pitr_14days","addon_pitr_28days"].map((function(t){return e.find((function(e){return e.metadata.supabase_prod_id===t}))})).filter((function(e){return void 0!==e}));return 0===s.length?[]:[t].concat(s)},a=function(e){var t={id:void 0,name:"Disable Custom Domains",metadata:{default_price_id:void 0,supabase_prod_id:"addon_custom_domains_disabled",features:""},prices:[{id:void 0,currency:"usd",recurring:{interval:"month",usage_type:"licensed",interval_count:1,aggregate_usage:null,trial_period_days:null},unit_amount:0}]},s=["addon_custom_domains"].map((function(t){return e.find((function(e){return e.metadata.supabase_prod_id===t}))})).filter((function(e){return void 0!==e}));return 0===s.length?[]:[t].concat(s)}},7831:function(e,t,s){var n=s(79894),i=s(88983),r=s(42791),a=s(24246);t.Z=function(e){var t=e.currentOption,s=(0,r.UO)().ref;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)("h4",{className:"text-lg",children:"Support Plan"})}),(0,a.jsx)("p",{className:"text-sm text-scale-1100",children:"Designated support with guaranteed response times"})]}),(0,a.jsxs)("div",{className:["flex items-center justify-between block w-full rounded px-4 py-3","border border-scale-600 bg-scale-100 dark:border-scale-500 dark:bg-scale-400"].join(" "),children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h5",{className:"text-sm text-scale-1200",children:["Your project is currently on ",t.name]}),(0,a.jsx)("p",{className:"text-sm text-scale-1100",children:"If you would like to change your support plan, do reach out to us"})]}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(n.default,{href:"/support/new?ref=".concat(s,"&category=sales&subject=Change%20support%20plan"),children:(0,a.jsx)("a",{children:(0,a.jsx)(i.zxk,{children:"Contact us"})})})})]})]})}},64795:function(e,t,s){s.d(t,{Y:function(){return r},K:function(){return a}});var n=s(88983),i=s(24246),r=["Pricing","My project isn't getting traction","Poor customer service","Missing feature","I didn't see the value","Supabase didn't meet my needs","Dashboard is too complicated","Postgres is too complicated","Problem not solved","Bug issues","I decided to use something else","My work has finished/discontinued","I\u2019m migrating to/starting a new project","None of the above"],a=[{title:"Database",icon:(0,i.jsx)(n.OQ8,{className:"dark:text-scale-100",size:16,strokeWidth:2}),features:[{key:"db_size",attribute:"total_db_size_bytes",title:"Database size",units:"bytes",costPerUnit:.125,tooltip:(0,i.jsxs)("span",{children:["Billing is based on the average daily database size in GB throughout the billing period."," ",(0,i.jsx)("a",{href:"https://supabase.com/docs/guides/platform/database-usage",target:"_blank",children:"Docs"})]})},{key:"db_egress",attribute:"total_egress_modified",title:"Database egress",units:"bytes",costPerUnit:.09,tooltip:(0,i.jsx)("span",{children:"Database egress contains any outgoing traffic (egress) from your database. Billing is based on the total sum of egress in GB throughout your billing period."})}]},{title:"Auth",icon:(0,i.jsx)(n.Ol,{className:"dark:text-scale-100",size:16,strokeWidth:2}),features:[{key:"monthly_active_users",attribute:"total_auth_billing_period_mau",title:"Monthly Active Users",units:"absolute",costPerUnit:.00325,tooltip:(0,i.jsx)("span",{children:"The amount of distinct users requesting your API throughout the billing period. Resets at the beginning of every billing period."})}]},{title:"Storage",icon:(0,i.jsx)(n.fO3,{className:"dark:text-scale-100",size:16,strokeWidth:2}),features:[{key:"storage_size",attribute:"total_storage_size_bytes",title:"Storage space",units:"bytes",costPerUnit:.021,tooltip:(0,i.jsx)("span",{children:"The storage size is the sum of all objects in your storage buckets. Billing is based on the average size in GB throughout your billing period."})},{key:"storage_egress",attribute:"total_storage_egress",title:"Storage egress",units:"bytes",costPerUnit:.09,tooltip:(0,i.jsx)("span",{children:"Storage egress contains any outgoing traffic (egress) from your storage buckets, only download operations are counted. We currently do not differentiate between no-cache and cache hits. Billing is based on the total amount of egress in GB throughout your billing period."})},{key:"storage_image_render_count",attribute:"total_storage_image_render_count",title:"Storage Images Transformed",units:"absolute",costPerUnit:.005,tooltip:(0,i.jsx)("span",{children:"We distinctly count all images that were transformed in the billing period, ignoring any transformations. If you transform one image with different transformations (i.e. once with height=50 and once with height=150), it only counts as one. We only count the unique (origin) images being transformed."})}]},{title:"Functions",icon:(0,i.jsx)(n.seM,{className:"dark:text-scale-100",size:16,strokeWidth:2}),features:[{key:"func_count",attribute:"total_func_count",title:"Function Count",units:"absolute",costPerUnit:.1,tooltip:(0,i.jsx)("span",{children:"We continuously monitor the amount of serverless functions in your project. Billing is based on the maximum amount of functions at any point in time throughout your billing period."})},{key:"func_invocations",attribute:"total_func_invocations",title:"Function Invocations",units:"absolute",costPerUnit:2e-6,tooltip:(0,i.jsx)("span",{children:"Every single serverless function invocation independent of response status is counted. Billing is based on the sum of all invocations throughout your billing period."})}]}]},3651:function(e,t,s){s.d(t,{mt:function(){return o},G8:function(){return l},TX:function(){return d},nl:function(){return x}});var n=s(90849),i=s(81920);function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){(0,n.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var o=function(e){var t,s=null===(t=e.metadata)||void 0===t?void 0:t.default_price_id;return void 0!==s?e.prices.find((function(e){return e.id===s})):e.prices[0]},c=function(e,t){var s,n=e.addons.find((function(e){return e.prod_id===t.id})),i=t.prices.find((function(e){return e.unit_amount===(null===n||void 0===n?void 0:n.unit_amount)}));return(null===i||void 0===i?void 0:i.id)||(null===(s=o(t))||void 0===s?void 0:s.id)},l=function(e){var t;if(void 0!==(null===(t=e.pitrDuration)||void 0===t?void 0:t.id)&&void 0===e.computeSize.id)return"To enable PITR for your project, your project must minimally be on a Small Add-on."},d=function(e,t,s,n,i,r){var l=s.computeSize,d=s.pitrDuration,u=s.customDomains,x=c(e,l),p=c(e,d),m=c(e,u),h=t?o(t):void 0,f=n.map((function(t){return c(e,t)})),j="af-south-1"===r?[]:[x,p,m].concat(f).filter((function(e){return void 0!==e})),v=Math.floor(Date.now()/1e3);return a(a({},h&&{tier:h.id}),{},{addons:j,proration_date:v,payment_method:i})},u=function(e,t,s,n){var i=t.find((function(t){var n=e.addons.find((function(e){return e.supabase_prod_id.includes(s)}));return t.id===(null===n||void 0===n?void 0:n.prod_id)}));if(void 0===i)return t.find((function(e){return e.metadata.supabase_prod_id===n}));var r=e.addons.find((function(e){return e.prod_id===i.id}));return a(a({},i),{},{isLocked:0===(null===r||void 0===r?void 0:r.unit_amount)})},x=function(e,t){var s=(0,i.H8)(t),n=(0,i.mp)(t),r=(0,i.$H)(t);return{computeSize:u(e,s,"_instance_","addon_instance_micro"),pitrDuration:u(e,n,"_pitr_","addon_pitr_0days"),customDomains:u(e,r,"_custom_domains","addon_custom_domains_disabled"),supportPlan:t.find((function(t){var s=null===e||void 0===e?void 0:e.addons.find((function(e){return e.supabase_prod_id.includes("_support_")}));return t.id===(null===s||void 0===s?void 0:s.prod_id)}))}}},16658:function(e,t,s){var n=s(86677),i=s(88983),r=s(24246);t.Z=function(e){var t=e.title,s=e.message,a=e.projectRef,o=(0,n.useRouter)();return(0,r.jsxs)("div",{style:{height:"calc(100vh - 5rem - 49.5px)"},className:"mx-auto flex max-w-xl flex-col justify-center space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(i.Bu,{strokeWidth:2}),(0,r.jsx)("h3",{className:"text-xl",children:t})]}),(0,r.jsx)("p",{className:"text-sm text-scale-1100",children:s}),(0,r.jsx)("div",{}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(i.zxk,{onClick:function(){return o.push("/project/".concat(a))},children:"Back to dashboard"}),(0,r.jsx)(i.zxk,{onClick:function(){return o.push("/project/".concat(a,"/settings/billing/update"))},type:"default",children:"Back to billing"})]})]})}},37533:function(e,t,s){s.d(t,{AddNewPaymentMethodModal:function(){return re},ComputeSizeSelection:function(){return X},CustomDomainSelection:function(){return J},ExitSurvey:function(){return G},Invoices:function(){return oe},PAYGUsage:function(){return d},PITRDurationSelection:function(){return Q},PaymentSummaryPanel:function(){return H},PlanSelection:function(){return P},ProUpgrade:function(){return Y},Subscription:function(){return g},UpdateSuccess:function(){return R.Z}});var n,i=s(27693),r=s.n(i),a=s(51465),o=s(20796),c=s(64795),l=s(24246),d=function(e){var t,s,n=e.dateRange,i=null!==(t=n.period_start.date)&&void 0!==t?t:r()().utc().startOf("month").format(o.zT),d=null!==(s=n.period_end.date)&&void 0!==s?s:r()().utc().endOf("month").format(o.zT);return(0,l.jsx)("div",{className:"flex flex-col",children:c.K.map((function(e){return(0,l.jsx)("div",{className:"border-panel-border-light dark:border-panel-border-dark mb-8 overflow-hidden rounded border",children:(0,l.jsxs)("div",{className:"bg-panel-body-light dark:bg-panel-body-dark w-full",children:[(0,l.jsx)("div",{className:"bg-panel-header-light dark:bg-panel-header-dark",children:(0,l.jsx)("div",{className:"flex items-center justify-between overflow-hidden rounded px-6 py-3",children:(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded bg-white",children:e.icon}),(0,l.jsx)("h5",{className:"mb-0 font-medium",children:e.title})]})})}),(0,l.jsx)("div",{className:"flex flex-col",children:e.features.map((function(e){return(0,l.jsx)("div",{className:"border-panel-border-light dark:border-panel-border-dark relative border-t px-6 py-3",children:(0,l.jsx)(a.Z,{hideChartType:!0,label:"".concat(e.title," for ").concat(r()().format("MMMM")),attribute:e.attribute,provider:"daily-stats",startDate:i,endDate:d,interval:"1d",defaultChartStyle:"bar",customDateFormat:"MMM D, YYYY"})},e.title)}))})]})},e.title)}))})},u=s(86677),x=s(88983),p=s(24532),m=s(68043),h=s(42791),f=s(98574),j=function(e){var t=e.item,s=e.amount,n=e.unitPrice,i=e.price,r=e.note;return(0,l.jsxs)("div",{className:"relative flex items-center border-t border-panel-border-light px-6 py-3 dark:border-panel-border-dark",children:[(0,l.jsxs)("div",{className:"flex w-[40%] items-center gap-3",children:[(0,l.jsx)("span",{className:"text-sm",children:t}),r&&(0,l.jsx)(x.Cts,{color:"scale",children:(0,l.jsx)("span",{className:"text-xs text-scale-900",children:r})})]}),(0,l.jsx)("div",{className:"flex w-[20%] justify-end",children:(0,l.jsx)("span",{className:"text-sm",children:s})}),(0,l.jsx)("div",{className:"flex w-[20%] justify-end",children:(0,l.jsxs)("span",{className:"text-sm",children:["$",n]})}),(0,l.jsx)("div",{className:"flex w-[20%] justify-end",children:(0,l.jsxs)("span",{className:"text-sm",children:["$",i]})})]})},v=s(38230),b=s(45322),g=function(e){var t,s,n=e.project,i=e.subscription,a=e.loading,d=void 0!==a&&a,g=e.showProjectName,y=void 0!==g&&g,N=e.currentPeriodStart,w=e.currentPeriodEnd,k=(0,u.useRouter)(),_=(0,h.UO)().ref,S=(0,h.P5)("disableProjectCreationAndUpdate"),P=(0,h.FH)(m.KA.READ,"subscriptions"),C=(0,h.FH)(m.KA.BILLING_WRITE,"stripe.subscriptions"),T=(0,b.DK)({projectRef:_}),D=T.data,z=T.isLoading,O=(null===i||void 0===i?void 0:i.tier.prod_id)===o.Tx.PAYG,E=i.tier.supabase_prod_id===o.ev.ENTERPRISE,R=null!==(t=null===i||void 0===i?void 0:i.addons)&&void 0!==t?t:[],A=i&&i.tier.unit_amount>0,Z=(null===i||void 0===i?void 0:i.tier.unit_amount)/100;return(0,l.jsx)(x.gbz,{active:d||z,children:(0,l.jsx)("div",{className:"w-full mb-8 overflow-hidden border rounded border-panel-border-light dark:border-panel-border-dark",children:(0,l.jsxs)("div",{className:"bg-panel-body-light dark:bg-panel-body-dark",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between px-6 pt-4",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:y?n.name:"Current subscription"}),(0,l.jsx)("h3",{className:"mb-0 text-xl",children:null!==(s=null===i||void 0===i?void 0:i.tier.name)&&void 0!==s?s:"-"})]}),(0,l.jsx)("div",{className:"flex flex-col items-end space-y-2",children:(0,l.jsxs)(p.fC,{delayDuration:0,children:[(0,l.jsx)(p.xz,{children:(0,l.jsx)(x.zxk,{disabled:!C||S,onClick:function(){var e="/project/".concat(n.ref,E?"/settings/billing/update/enterprise":"/settings/billing/update");k.push(e)},type:"primary",children:E?"Change add-ons":"Change subscription"})}),!C||S?(0,l.jsxs)(p.VY,{side:"bottom",children:[(0,l.jsx)(p.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:["border border-scale-200 text-center","rounded bg-scale-100 py-1 px-2 leading-none shadow"].join(" "),children:(0,l.jsx)("span",{className:"text-xs text-scale-1200",children:S?(0,l.jsxs)(l.Fragment,{children:["Subscription changes are currently disabled.",(0,l.jsx)("br",{}),"Our engineers are working on a fix."]}):C?"":"You need additional permissions to amend subscriptions"})})]}):(0,l.jsx)(l.Fragment,{})]})})]}),A&&(0,l.jsx)("div",{className:"px-6 pt-4",children:(0,l.jsxs)("p",{children:["The next payment for this plan will be occur on"," ",r().unix(w).utc().format("MMM D, YYYY"),"."]})}),(0,l.jsx)("div",{className:"px-6 pb-4 mt-2",children:(0,l.jsxs)("p",{className:"text-sm text-scale-1100",children:["See our"," ",(0,l.jsx)("a",{href:"https://supabase.com/pricing",target:"_blank",className:"underline",children:"pricing"})," ","for a more detailed analysis of what Supabase has on offer."]})}),P?!d&&i?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"relative flex items-center px-6 py-3 border-t border-panel-border-light dark:border-panel-border-dark",children:[(0,l.jsx)("div",{className:"w-[40%]",children:(0,l.jsx)("p",{className:"text-xs uppercase text-scale-900",children:"Item"})}),(0,l.jsx)("div",{className:"flex w-[20%] justify-end",children:(0,l.jsx)("p",{className:"text-xs uppercase text-scale-900",children:"Amount"})}),(0,l.jsx)("div",{className:"flex w-[20%] justify-end",children:(0,l.jsx)("p",{className:"text-xs uppercase text-scale-900",children:"Unit Price"})}),(0,l.jsx)("div",{className:"flex w-[20%] justify-end",children:(0,l.jsx)("p",{className:"text-xs uppercase text-scale-900",children:"Price"})})]}),(0,l.jsx)(j,{item:"Base Plan",amount:1,unitPrice:Z.toFixed(2),price:Z.toFixed(2)}),R.map((function(e){return(0,l.jsx)(j,{item:e.name,amount:1,unitPrice:e.unit_amount/100,price:e.unit_amount/100},e.prod_id)})),O&&c.K.map((function(e){return e.features.map((function(e){var t,s,n,i,r,a,o=null!==(t=null===D||void 0===D||null===(s=D[e.key])||void 0===s?void 0:s.usage)&&void 0!==t?t:0,c=null!==(n=null===D||void 0===D||null===(i=D[e.key])||void 0===i?void 0:i.limit)&&void 0!==n?n:0,d=(null!==(r=null===D||void 0===D||null===(a=D[e.key])||void 0===a?void 0:a.cost)&&void 0!==r?r:0).toFixed(2);return(0,l.jsx)(j,{item:e.title,amount:"bytes"===e.units?(0,f.td)(o):o.toLocaleString(),unitPrice:"bytes"===e.units?"".concat(e.costPerUnit,"/GB"):e.costPerUnit,price:d,note:"bytes"===e.units?"".concat((0,f.td)(c)," included"):"".concat(c.toLocaleString()," included")},e.key)}))})),(0,l.jsxs)("div",{className:["relative flex items-center border-t px-6 py-3","border-panel-border-light dark:border-panel-border-dark"].join(" "),children:[(0,l.jsx)("div",{className:"w-[80%]",children:(0,l.jsxs)("p",{className:"text-sm text-scale-1100",children:["Estimated cost for ",r().unix(N).utc().format("MMM D, YYYY")," ","- ",r().unix(w).utc().format("MMM D, YYYY")," so far"]})}),(0,l.jsxs)("div",{className:"flex w-[20%] items-center justify-end space-x-1",children:[(0,l.jsx)("p",{className:"text-scale-1100",children:"$"}),(0,l.jsx)("h3",{className:"m-0 text-xl",children:function(){var e=R.map((function(e){return e.unit_amount/100})).reduce((function(e,t){return e+t}),0),t=void 0===D?0:Object.keys(D).map((function(e){var t;return null!==(t=D[e].cost)&&void 0!==t?t:0})).reduce((function(e,t){return e+t}),0);return Z+e+t}().toFixed(2)})]})]})]}):(0,l.jsx)(l.Fragment,{}):(0,l.jsx)("div",{className:"px-6 pb-4",children:(0,l.jsx)(v.Z,{resourceText:"view this project's subscription"})})]})})})},y=s(79894),N=s(42356),w=function(e){var t=e.plan,s=e.currentPlan,n=e.onSelectPlan,i=(0,h.P5)("disableProjectCreationAndUpdate");if(!s)return(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)(x.zxk,{type:"text",children:(0,l.jsx)(x.pAw,{size:18,className:"animate-spin"})})});var r=function(e,t){return["Free tier"].includes(e.name)?"default":t.prod_id===o.Tx.FREE?"primary":t.prod_id===o.Tx.TEAM&&"Team tier"!==e.name?"default":"primary"}(t,s),a=function(e,t){return"Enterprise"===e.name?"Contact sales":e.id===o.Tx.FREE?t.prod_id===o.Tx.FREE?"Current plan":"Downgrade to Free":e.id===o.Tx.PRO?t.prod_id===o.Tx.FREE?"Upgrade to Pro":t.prod_id===o.Tx.TEAM?"Downgrade to Pro":t.prod_id===o.Tx.PRO||t.prod_id===o.Tx.PAYG?"Edit plan configuration":"Contact sales":e.id===o.Tx.TEAM?t.prod_id===o.Tx.TEAM?"Edit plan configuration":[o.Tx.FREE,o.Tx.PRO,o.Tx.PAYG].includes(t.prod_id)?"Upgrade to Team":"Contact sales":void 0}(t,s),c=t.id===o.Tx.FREE&&s.prod_id===o.Tx.FREE;return"Enterprise"===t.name?(0,l.jsx)(y.default,{href:"https://supabase.com/contact/enterprise",children:(0,l.jsx)("a",{children:(0,l.jsx)(x.zxk,{disabled:c,type:r,block:!0,children:a})})}):(0,l.jsx)("div",{className:"flex flex-col items-center justify-center space-y-2",children:(0,l.jsxs)(p.fC,{delayDuration:0,children:[(0,l.jsx)(p.xz,{className:"w-full",children:(0,l.jsx)(x.zxk,{block:!0,type:r,disabled:c||i,onClick:function(){return n(t)},children:a})}),!c&&i&&(0,l.jsxs)(p.VY,{side:"bottom",children:[(0,l.jsx)(p.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200 w-[260px] flex items-center justify-center"].join(" "),children:(0,l.jsx)("span",{className:"text-xs text-scale-1200 text-center",children:"Subscription changes are currently disabled, our engineers are working on a fix"})})]})]})})},k=s(90849),_=(n={},(0,k.Z)(n,o.Tx.FREE,{name:"Free",description:"Perfect for passion projects & simple websites.",priceMonthly:0,priceUnit:"per month per project",warning:"Limit of 2 free projects",preface:"Get started with:",features:["Up to 500MB database & 1GB file storage","Up to 2GB bandwidth","Up to 50MB file uploads","Social OAuth providers","50,000 monthly active users","Up to 500K Edge Function invocations","1-day log retention","200 concurrent Realtime connections","2 million Realtime messages","Community support"],scale:"Free projects are paused after 1 week of inactivity."}),(0,k.Z)(n,o.Tx.PRO,{name:"Pro",description:"For production applications with the option to scale.",priceMonthly:25,priceUnit:"per month per project",warning:"+ any additional usage",preface:"Everything in the Free plan, plus:",features:["8GB database & 100GB file storage","50GB bandwidth","5GB file uploads","Social OAuth providers","100,000 monthly active users","2M Edge Function invocations","Daily backups","7-day log retention","500 concurrent Realtime connections","5 million Realtime messages","No project pausing","Email support"],additional:"Need more? Turn off your spend cap to Pay As You Grow ",scale:"Additional fees apply for usage and storage beyond the limits above."}),(0,k.Z)(n,o.Tx.TEAM,{new:!0,name:"Team",description:"Collaborate with different permissions and access patterns.",priceMonthly:599,priceUnit:"per month per organization",warning:"+ usage",preface:"The following features will apply to all projects within the organization:",features:["Usage-based pricing","100,000 monthly active users included","Organization member roles (ABAC)","Standardised Security Questionnaire","SOC2","SSO for Supabase Dashboard","Priority email support & SLAs","1 XS compute instance","14 day backups","28 day log retention"]}),(0,k.Z)(n,"Enterprise",{name:"Enterprise",href:"/contact/enterprise",description:"For large-scale applications managing serious workloads.",features:["Point in time recovery","Designated Support manager & SLAs","Enterprise OAuth providers","SSO/ SAML","SOC2","Custom contracts & invoicing","On-premise support","24\xd77\xd7365 premium enterprise support"]}),n),S=function(e){var t=e.plan,s=e.currentPlan,n=e.onSelectPlan,i=(null===s||void 0===s?void 0:s.supabase_prod_id)===o.ev.TEAM||(0,h.P5)("teamTier"),r=_[t.id],a="Enterprise"===t.id,c=t.id===(null===s||void 0===s?void 0:s.prod_id)||t.id===o.Tx.PRO&&(null===s||void 0===s?void 0:s.prod_id)===o.Tx.PRO||t.id===o.Tx.PRO&&(null===s||void 0===s?void 0:s.prod_id)===o.Tx.PAYG;return(0,l.jsxs)("div",{className:["px-6 py-6 border rounded flex flex-col justify-between","".concat(a?"bg-scale-200":"bg-scale-300"),"".concat(a&&i?"lg:col-span-3 xl:col-auto":"")].join(" "),children:[(0,l.jsxs)("div",{className:["space-y-8","".concat(a?"flex flex-col xl:space-x-0 xl:flex-col":""),"".concat(a&&i?"lg:flex-row lg:space-x-24":"")].join(" "),children:[(0,l.jsxs)("div",{className:["space-y-4","".concat(a?"xl:w-auto":""),"".concat(a&&i?"xl:w-auto":"")].join(" "),children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("p",{className:["text-brand-900 text-sm","".concat(a?"lg:text-base xl:text-sm font-bold font-mono uppercase":"")].join(" "),children:r.name}),c?(0,l.jsx)("div",{className:"text-xs bg-scale-500 text-scale-1000 rounded px-2 py-0.5",children:"Current plan"}):r.new?(0,l.jsx)("div",{className:"text-xs bg-brand-400 text-brand-900 rounded px-2 py-0.5",children:"New"}):(0,l.jsx)(l.Fragment,{})]}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:r.description}),(0,l.jsx)("div",{className:["space-y-2","".concat(a?"pb-6 border-b lg:pt-6 lg:border-b-0 lg:border-t xl:pt-0 xl:pb-6 xl:border-t-0 xl:border-b":"border-b border-t py-8")].join(" "),children:void 0!==r.priceMonthly?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"text-sm text-scale-1000",children:"Starting from"}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("p",{className:"text-[3.4rem] leading-none",children:["$",r.priceMonthly]}),(0,l.jsx)("p",{className:"text-sm text-scale-1000",children:r.priceUnit})]}),(0,l.jsx)("div",{className:"text-xs bg-brand-400 text-brand-900 rounded px-2 py-0.5 w-fit",children:r.warning})]}):(0,l.jsx)(w,{plan:t,currentPlan:s,onSelectPlan:n})})]}),(0,l.jsxs)("div",{className:"".concat(a?"lg:space-y-0 lg:!mt-0 xl:space-y-4":"space-y-4"),children:[(0,l.jsx)("p",{className:"text-xs text-scale-1000",children:r.preface}),(0,l.jsx)("ul",{role:"list",className:["".concat(a?"xl:gap-0 xl:columns-1":""),"".concat(a&&i?"lg:gap-16 lg:columns-2":"")].join(" "),children:r.features.map((function(e){return(0,l.jsxs)("li",{className:"flex py-2",children:[(0,l.jsx)("div",{className:"w-[12px]",children:(0,l.jsx)(x.NOm,{className:"h-3 w-3 text-brand-900 translate-y-[2.5px]","aria-hidden":"true",strokeWidth:3})}),(0,l.jsx)("p",{className:"ml-3 text-xs text-scale-1100",children:e})]},e)}))})]})]}),!a&&(0,l.jsxs)("div",{className:"space-y-4 !mt-20",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:r.additional}),(0,l.jsx)("p",{className:"text-xs text-scale-1000",children:r.scale})]}),(0,l.jsx)(w,{plan:t,currentPlan:s,onSelectPlan:n})]})]})},P=function(e){var t=e.visible,s=e.tiers,n=e.currentPlan,i=e.onSelectPlan,r=function(e){return e.filter((function(e){return e.id===o.Tx.FREE})).concat(e.filter((function(e){return e.id===o.Tx.PRO}))).concat(e.filter((function(e){return e.id===o.Tx.TEAM}))).concat([{id:"Enterprise",name:"Enterprise",description:"For large-scale applications managing serious workloads",metadata:{features:"Point in time recovery\\nDesignated Support manager & SLAs\\nSSO / SAML + SOC2\\nCustom contracts & invoicing\\n24\xd77\xd7365 premium enterprise support"},prices:[]}]).filter(Boolean)}(s),a=3===r.length?"gap-8 lg:grid-cols-3":"gap-4 lg:grid-cols-3 xl:grid-cols-billingWithTeam";return(0,l.jsx)(N.u,{show:t,enter:"transition ease-out duration-300",enterFrom:"transform opacity-0 -translate-x-10",enterTo:"transform opacity-100 translate-x-0",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-lg mb-8",children:"Change your project's subscription"}),(0,l.jsx)("div",{className:"grid py-8 grid-cols-2 ".concat(a),children:r.map((function(e){return(0,l.jsx)(S,{plan:e,currentPlan:n,onSelectPlan:function(){return i(e)}},e.id)}))}),(0,l.jsx)("div",{className:"flex justify-center items-center mt-4",children:(0,l.jsx)(y.default,{href:"https://supabase.com/pricing",children:(0,l.jsx)("a",{target:"_blank",children:(0,l.jsx)(x.zxk,{type:"link",icon:(0,l.jsx)(x.TqL,{size:14,strokeWidth:1.5}),className:"text-sm text-scale-1000 hover:text-scale-1100 hover:bg-scale-400",children:"See detailed comparisons across plans"})})})})]})})},C=s(55732),T=s(34707),D=s.n(T),z=s(27378),O=s(14919),E=s(92836),R=s(16658),A=s(3651),Z=s(81920),F=s(87750),U=s(7831),M=s(9740),Y=function(e){var t,s,n,i,r,a,c=e.products,d=e.paymentMethods,m=e.currentSubscription,j=e.isLoadingPaymentMethods,v=e.onSelectBack,b=(0,h.oR)(),g=b.app,y=b.ui,w=(0,u.useRouter)(),k=(0,z.useState)(null),_=k[0],S=k[1],P=(0,z.useRef)(null),T=c.addons,Y=(0,Z.H8)(T),I=(0,Z.mp)(T),L=(0,Z.$H)(T),G=(0,A.nl)(m,T),B=null!==(t=null===(s=y.selectedProject)||void 0===s?void 0:s.id)&&void 0!==t?t:-1,$=null===(n=y.selectedProject)||void 0===n?void 0:n.ref,W=null!==(i=null===(r=y.selectedProject)||void 0===r?void 0:r.region)&&void 0!==i?i:"",V=(0,z.useState)(m.tier.prod_id===o.Tx.FREE||m.tier.prod_id===o.Tx.PRO),K=V[0],q=V[1],ee=(0,z.useState)(!1),te=ee[0],se=ee[1],ne=(0,z.useState)(!1),ie=ne[0],ae=ne[1],oe=(0,z.useState)(!1),ce=oe[0],le=oe[1],de=(0,z.useState)(!1),ue=de[0],xe=de[1],pe=(0,z.useState)(!1),me=pe[0],he=pe[1],fe=(0,z.useState)(G.computeSize),je=fe[0],ve=fe[1],be=(0,z.useState)(G.pitrDuration),ge=be[0],ye=be[1],Ne=(0,z.useState)(G.customDomains),we=Ne[0],ke=Ne[1],_e=[G.supportPlan].filter((function(e){return void 0!==e})),Se={computeSize:je,pitrDuration:ge,customDomains:we},Pe=(0,z.useState)(""),Ce=Pe[0],Te=Pe[1],De=(0,z.useState)(),ze=De[0],Oe=De[1],Ee=K?null===c||void 0===c?void 0:c.tiers.find((function(e){return e.id===o.Tx.PRO})):null===c||void 0===c?void 0:c.tiers.find((function(e){return e.id===o.Tx.PAYG})),Re=m.tier.prod_id===o.Tx.PRO||m.tier.prod_id===o.Tx.PAYG,Ae=(null===(a=G.computeSize)||void 0===a?void 0:a.id)!==Se.computeSize.id;(0,z.useEffect)((function(){!j&&d&&d.length>0&&Te(d[0].id)}),[j,d]),(0,z.useEffect)((function(){Ze()}),[je,ge,we,K]);var Ze=function(){var e=(0,C.Z)(D().mark((function e(){var t,s;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ee){e.next=2;break}return e.abrupt("return");case 2:return t=(0,A.TX)(m,Ee,Se,_e,Ce,W),se(!0),e.next=6,(0,O.v_)("".concat(o.T5,"/projects/").concat($,"/subscription/preview"),t);case 6:(s=e.sent).error&&y.setNotification({category:"error",message:"Failed to fetch subscription preview: ".concat(s.error.message)}),Oe(s),se(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e;S(null),null===(e=P.current)||void 0===e||e.resetCaptcha()},Ue=function(){var e=(0,C.Z)(D().mark((function e(){var t,s,n,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae(!0),t=_,e.prev=2,t){e.next=9;break}return e.next=6,null===(s=P.current)||void 0===s?void 0:s.execute({async:!0});case 6:i=e.sent,t=null!==(n=null===i||void 0===i?void 0:i.response)&&void 0!==n?n:null,S(t);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(2),ae(!1),e.abrupt("return",!1);case 15:return ae(!1),e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=(0,C.Z)(D().mark((function e(){var t,s,n;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ae(!0),t=(0,A.TX)(m,Ee,Se,_e,Ce,W),e.next=4,(0,O.r$)("".concat(o.T5,"/projects/").concat($,"/subscription"),t);case 4:s=e.sent,Fe(),null!==s&&void 0!==s&&s.error?y.setNotification({category:"error",message:"Failed to update subscription: ".concat(null===s||void 0===s||null===(n=s.error)||void 0===n?void 0:n.message)}):Ae?(g.onProjectStatusUpdated(B,o.S.RESTORING),y.setNotification({category:"success",message:"Your project has been updated and is currently restarting to update its instance size",duration:8e3}),w.push("/project/".concat($))):le(!0),ae(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return!ie&&ce?(0,l.jsx)(R.Z,{projectRef:$||"",title:"Your project has been updated!",message:"Let us know if you have any feedback at sales@supabase.io."}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(N.u,{show:!0,enter:"transition ease-out duration-300",enterFrom:"transform opacity-0 translate-x-10",enterTo:"transform opacity-100 translate-x-0",className:"flex items-start justify-between w-full",children:[(0,l.jsx)("div",{className:"flex-grow mt-10",children:(0,l.jsxs)("div",{className:"relative space-y-4",children:[(0,l.jsxs)("div",{className:"relative px-32 mx-auto space-y-4 2xl:max-w-5xl",children:[(0,l.jsx)(F.Z,{onClick:function(){return v()}}),(0,l.jsx)("h4",{className:"text-lg text-scale-900 !mb-8",children:"Change your project's subscription"})]}),(0,l.jsxs)("div",{className:"px-32 pb-8 mx-auto space-y-8 overflow-y-auto 2xl:max-w-5xl",style:{height:"calc(100vh - 9rem - 57px)"},children:[(0,l.jsx)("div",{className:"space-y-2",children:Re?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("h3",{className:"text-3xl",children:["Managing your ",(0,l.jsx)("span",{className:"text-brand-900",children:"Pro"})," plan"]})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("h3",{className:"text-xl",children:["Welcome to ",(0,l.jsx)("span",{className:"text-brand-900",children:"Pro"})]}),(0,l.jsx)("p",{className:"text-base text-scale-1100",children:"Your new subscription will begin immediately after payment"})]})}),(0,l.jsxs)("div",{className:"flex items-center justify-between gap-16 px-6 py-4 border rounded border-panel-border-light border-panel-border-dark bg-panel-body-light drop-shadow-sm dark:bg-panel-body-dark",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("p",{children:"Enable spend cap"}),(0,l.jsx)(x.Sus,{size:16,strokeWidth:1.5,className:"transition opacity-50 cursor-pointer hover:opacity-100",onClick:function(){return he(!0)}})]}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"If enabled, additional resources will not be charged on a per-usage basis"})]}),(0,l.jsx)(x.ZDl,{checked:K,onChange:function(){return q(!K)}})]}),"af-south-1"!==W&&(0,l.jsxs)(l.Fragment,{children:[void 0!==G.supportPlan&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(E.Z,{light:!0}),(0,l.jsx)(U.Z,{currentOption:G.supportPlan})]}),(0,l.jsx)(E.Z,{light:!0}),(0,l.jsx)(J,{options:L,currentOption:Re?G.customDomains:void 0,selectedOption:Se.customDomains,onSelectOption:ke}),(0,l.jsx)(E.Z,{light:!0}),(0,l.jsx)(Q,{pitrDurationOptions:I,currentPitrDuration:Re?G.pitrDuration:void 0,selectedPitrDuration:Se.pitrDuration,onSelectOption:ye}),(0,l.jsx)(E.Z,{light:!0}),(0,l.jsx)(X,{computeSizes:Y||[],currentComputeSize:G.computeSize,selectedComputeSize:Se.computeSize,onSelectOption:ve})]})]})]})}),(0,l.jsx)("div",{className:"w-[34rem]",children:(0,l.jsx)(H,{isRefreshingPreview:te,subscriptionPreview:ze,isSpendCapEnabled:K,currentPlan:m.tier,currentAddons:G,currentSubscription:m,selectedPlan:Ee,selectedAddons:Se,paymentMethods:d,isLoadingPaymentMethods:j,selectedPaymentMethod:Ce,onSelectPaymentMethod:Te,onSelectAddNewPaymentMethod:function(){xe(!0)},beforeConfirmPayment:Ue,onConfirmPayment:Me,isSubmitting:ie,captcha:(0,l.jsx)(M.Z,{ref:P,sitekey:"4ca1fdb9-c9c9-4495-ba50-c85fc0e7ec1f",size:"invisible",onVerify:function(e){S(e)},onExpire:function(){S(null)}})})})]}),(0,l.jsx)(re,{visible:ue,returnUrl:"".concat((0,f.Ax)(),"/project/").concat($,"/settings/billing/update/pro"),onCancel:function(){return xe(!1)}}),(0,l.jsx)(x.u_l,{hideFooter:!0,visible:me,size:"large",header:"Enabling spend cap",onCancel:function(){return he(!1)},children:(0,l.jsxs)("div",{className:"py-4 space-y-4",children:[(0,l.jsx)(x.u_l.Content,{children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("p",{className:"text-sm",children:"A spend cap allows you to restrict your project's resource usage within the limits of the Pro tier. Disabling the spend cap will then remove those limits and any additional resources consumed beyond the Pro tier limits will be charged on a per-usage basis"}),(0,l.jsx)("p",{className:"text-sm",children:"The table below shows an overview of which resources are chargeable, and how they are charged:"}),(0,l.jsxs)("div",{className:"border rounded border-scale-600 bg-scale-500",children:[(0,l.jsxs)("div",{className:"flex items-center px-4 pt-2 pb-1",children:[(0,l.jsx)("p",{className:"w-[50%] text-sm text-scale-1100",children:"Item"}),(0,l.jsx)("p",{className:"w-[25%] text-sm text-scale-1100",children:"Limit"}),(0,l.jsx)("p",{className:"w-[25%] text-sm text-scale-1100",children:"Rate"})]}),(0,l.jsxs)("div",{className:"py-1",children:[(0,l.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,l.jsx)("p",{className:"w-[50%] text-sm",children:"Database size"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"8GB"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"$0.125/GB"})]}),(0,l.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,l.jsx)("p",{className:"w-[50%] text-sm",children:"Data transfer"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"50GB"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"$0.09/GB"})]})]}),(0,l.jsx)("div",{className:"py-1",children:(0,l.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,l.jsxs)("div",{className:"flex w-[50%] items-center space-x-2",children:[(0,l.jsx)("p",{className:"text-sm",children:"Auth MAUs"}),(0,l.jsxs)(p.fC,{delayDuration:0,children:[(0,l.jsx)(p.xz,{children:(0,l.jsx)(x.Sus,{size:16,strokeWidth:1.5,className:"transition opacity-50 cursor-pointer hover:opacity-100"})}),(0,l.jsxs)(p.VY,{side:"bottom",children:[(0,l.jsx)(p.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200 "].join(" "),children:(0,l.jsx)("span",{className:"text-xs text-scale-1200",children:"Monthly Active Users: A user that has made an API request in the last month"})})]})]})]}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"100,000"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"$0.00325/user"})]})}),(0,l.jsxs)("div",{className:"py-1",children:[(0,l.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,l.jsx)("p",{className:"w-[50%] text-sm",children:"Storage size"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"100GB"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"$0.021/GB"})]}),(0,l.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,l.jsx)("p",{className:"w-[50%] text-sm",children:"Data Transfer"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"50GB"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"$0.09/GB"})]})]})]})]})}),(0,l.jsx)(x.u_l.Separator,{}),(0,l.jsx)(x.u_l.Content,{children:(0,l.jsx)("div",{className:"flex items-center gap-2",children:(0,l.jsx)(x.zxk,{block:!0,type:"primary",onClick:function(){return he(!1)},children:"Understood"})})})]})})]})},I=s(44285),L=s(98784),G=function(e){var t,s,n,i,r,a,d=e.freeTier,p=e.subscription,m=e.onSelectBack,f=(0,u.useRouter)(),j=(0,h.oR)(),v=j.app,b=j.ui,g=null!==(t=null===(s=b.selectedProject)||void 0===s?void 0:s.id)&&void 0!==t?t:-1,y=null===(n=b.selectedProject)||void 0===n?void 0:n.ref,w=(0,z.useRef)(null),k=(0,z.useState)(null),_=k[0],S=k[1],P=(0,z.useRef)(),T=(0,z.useState)(""),E=T[0],A=T[1],Z=(0,z.useReducer)((function(e,t){return(0,L.includes)(e,t.target.value)?(0,L.without)(e,t.target.value):[].concat((0,I.Z)(e),[t.target.value])}),[]),F=Z[0],U=Z[1],Y=(0,z.useState)(!1),G=Y[0],B=Y[1],$=(0,z.useState)(!1),W=$[0],V=$[1],K=(0,z.useState)(!1),H=K[0],q=K[1],X=(0,z.useState)(!1),Q=X[0],J=X[1],ee=(0,z.useState)(),te=ee[0],se=ee[1],ne=null===p||void 0===p?void 0:p.addons.find((function(e){return e.supabase_prod_id.includes("addon_instance")})),ie=(null!==(i=null===te||void 0===te?void 0:te.returned_credits_for_unused_time)&&void 0!==i?i:0)/100,re=new Date(1e3*(null!==(r=null===te||void 0===te?void 0:te.bill_on)&&void 0!==r?r:0));(0,z.useEffect)((function(){d&&oe()}),[d]);var ae=function(){return"A total of $".concat(ie," will be refunded as credits on ").concat(re.toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"})," to your balance for unused time on your resources. Do let us know if you have any other feedback at sales@supabase.io.")},oe=function(){var e=(0,C.Z)(D().mark((function e(){var t,s;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.floor(Date.now()/1e3),e.next=3,(0,O.v_)("".concat(o.T5,"/projects/").concat(y,"/subscription/preview"),{tier:d.prices[0].id,addons:[],proration_date:t});case 3:s=e.sent,se(s);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=(0,C.Z)(D().mark((function e(t){var s,n,i,r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==F.length){e.next=2;break}return e.abrupt("return",b.setNotification({category:"error",message:"Please select at least one reason for cancelling your subscription"}));case 2:if(B(!0),s=_,e.prev=4,s){e.next=10;break}return e.next=8,null===(n=w.current)||void 0===n?void 0:n.execute({async:!0});case 8:r=e.sent,s=null!==(i=null===r||void 0===r?void 0:r.response)&&void 0!==i?i:null;case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(4),B(!1),e.abrupt("return");case 16:if(void 0===ne){e.next=21;break}return A(t.message),e.abrupt("return",J(!0));case 21:de(t);case 22:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e;S(null),null===(e=w.current)||void 0===e||e.resetCaptcha()},de=function(){var e=(0,C.Z)(D().mark((function e(t){var s,n,i,r,a,c,l,u;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null!==(s=null===t||void 0===t?void 0:t.message)&&void 0!==s?s:E,e.prev=1,B(!0),V(!0),i=d.prices[0].id,r=[],a=Math.floor(Date.now()/1e3),e.next=9,(0,O.r$)("".concat(o.T5,"/projects/").concat(y,"/subscription"),{tier:i,addons:r,proration_date:a});case 9:if(c=e.sent,le(),null===c||void 0===c||!c.error){e.next=15;break}return e.abrupt("return",b.setNotification({category:"error",message:"Failed to cancel subscription: ".concat(null===c||void 0===c||null===(l=c.error)||void 0===l?void 0:l.message),error:c.error}));case 15:void 0!==ne?(v.onProjectStatusUpdated(g,o.S.RESTORING),b.setNotification({category:"info",message:ae(),duration:8e3}),b.setNotification({category:"success",message:"Your project has been updated and is currently restarting to update its instance size",duration:8e3}),f.push("/project/".concat(y))):q(!0);case 16:return e.next=18,(0,O.v_)("".concat(o.T5,"/feedback/downgrade"),{projectRef:y,reasons:F.reduce((function(e,t){return"".concat(e,"- ").concat(t,"\n")}),""),additionalFeedback:n,exitAction:"downgrade"});case 18:if(!(u=e.sent).error){e.next=21;break}throw u.error;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(1),b.setNotification({category:"error",message:"Failed to cancel subscription: ".concat(e.t0.message)});case 26:return e.prev=26,B(!1),V(!1),e.finish(26);case 30:case"end":return e.stop()}}),e,null,[[1,23,26,30]])})));return function(t){return e.apply(this,arguments)}}();return H?(0,l.jsx)(R.Z,{projectRef:y||"",title:"Your project has been updated",message:ae()}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(N.u,{show:!0,appear:!0,enter:"transition ease-out duration-300",enterFrom:"transform opacity-0 translate-x-10",enterTo:"transform opacity-100 translate-x-0",children:(0,l.jsx)("div",{className:"w-full xl:w-4/5 space-y-8",children:(0,l.jsxs)("div",{ref:P,className:"relative",children:[(0,l.jsx)("div",{className:"absolute top-[2px] -left-24",children:(0,l.jsx)(x.zxk,{type:"text",icon:(0,l.jsx)(x.D6v,{}),onClick:m,children:"Back"})}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("h4",{className:"text-lg",children:"We're sad that you're leaving."}),(0,l.jsx)("p",{className:"text-scale-1100",children:"We always strive to improve Supabase as much as we can. Please let us know the reasons you are cancelling your subscription so that we can improve in the future."})]}),(0,l.jsx)(x.l09,{validateOnBlur:!0,initialValues:{message:""},onSubmit:ce,children:function(){return(0,l.jsxs)("div",{className:"space-y-8 py-8",children:[(0,l.jsx)("div",{className:"flex flex-wrap gap-2","data-toggle":"buttons",children:c.Y.map((function(e){var t=F.find((function(t){return t===e}));return(0,l.jsxs)("label",{className:"\n                              flex cursor-pointer items-center space-x-2 rounded-md py-1 \n                              pl-2 pr-3 text-center text-sm\n                              shadow-sm transition-all duration-100\n                              ".concat(t?" bg-scale-1200 text-scale-100 opacity-100 hover:bg-opacity-75":" bg-scale-700 text-scale-1200 opacity-25 hover:opacity-50","\n                          "),children:[(0,l.jsx)("input",{type:"checkbox",name:"options",value:e,className:"hidden",onClick:U}),(0,l.jsx)("div",{children:e})]},e)}))}),(0,l.jsx)(x.IIB.TextArea,{id:"message",name:"message",label:"Anything else that we can improve on?"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(x.zxk,{htmlType:"button",type:"default",onClick:function(){return f.push("/project/".concat(y,"/settings/billing/update"))},children:"Cancel"}),(0,l.jsx)(x.zxk,{type:"danger",htmlType:"submit",loading:G,disabled:G,children:"Confirm downgrade"}),(0,l.jsx)("p",{className:"text-xs text-scale-900",children:"The unused amount for the remaining of your billing cycle will be refunded as credits"})]}),(0,l.jsx)("div",{className:"self-center",children:(0,l.jsx)(M.Z,{ref:w,sitekey:"4ca1fdb9-c9c9-4495-ba50-c85fc0e7ec1f",size:"invisible",onVerify:function(e){S(e)},onExpire:function(){S(null)}})})]})}})]})})}),(0,l.jsx)(x.u_l,{hideFooter:!0,visible:Q,size:"large",header:"Downgrading project to free",onCancel:function(){J(!1),B(!1)},children:(0,l.jsxs)("div",{className:"space-y-4 py-4",children:[(0,l.jsx)(x.u_l.Content,{children:(0,l.jsxs)(x.bZj,{withIcon:!0,variant:"warning",title:"Your project will need to be restarted for changes to take place",children:["Your project is currently using a"," ",(null!==(a=null===ne||void 0===ne?void 0:ne.name)&&void 0!==a?a:"").toLocaleLowerCase()," and will be downgraded to a micro add-on. Upon confirmation, your project will be restarted for changes to take place. This will take up to 2 minutes during which your project will be unavailable."]})}),(0,l.jsx)(x.u_l.Content,{children:(0,l.jsx)("p",{className:"text-sm text-scale-1200",children:"Would you like to update your project now?"})}),(0,l.jsx)(x.u_l.Separator,{}),(0,l.jsx)(x.u_l.Content,{children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(x.zxk,{block:!0,type:"default",onClick:function(){J(!1),B(!1)},children:"Cancel"}),(0,l.jsx)(x.zxk,{block:!0,htmlType:"submit",loading:W,disabled:W,onClick:function(){return de()},children:"Confirm"})]})})]})})]})},B=function(e){var t=e.visible,s=e.totalDue,n=e.billingDate,i=e.costBreakdown,r=e.onCancel,a=(0,L.groupBy)(i,"period.start");return(0,l.jsx)(x.u_l,{hideFooter:!0,visible:t,size:"xlarge",header:"Cost breakdown details",onCancel:r,children:(0,l.jsxs)("div",{className:"space-y-2 py-4",children:[(0,l.jsx)(x.u_l.Content,{children:(0,l.jsxs)("p",{className:"text-sm",children:["The following shows the cost breakdown of the invoice that will be billed on"," ",n.toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"}),"."]})}),(0,l.jsx)(x.u_l.Content,{children:(0,l.jsxs)("div",{className:"rounded border border-scale-600 bg-scale-500",children:[(0,l.jsxs)("div",{className:"flex items-center border-b border-scale-600 py-2 px-4",children:[(0,l.jsx)("div",{className:"w-[75%] text-xs",children:"Description"}),(0,l.jsx)("div",{className:"w-[10%] text-right text-xs",children:"Qty"}),(0,l.jsx)("div",{className:"w-[15%] text-right text-xs",children:"Amount"})]}),Object.keys(a).map((function(e,t){var s=new Date(1e3*Number(e)).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"}),n=new Date(1e3*a[e][0].period.end).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"});return(0,l.jsxs)("div",{className:"border-b border-scale-600",children:[(0,l.jsx)("div",{className:"flex items-center py-2 px-4 ",children:(0,l.jsxs)("div",{className:"w-full text-xs text-scale-1100",children:[s," - ",n]})}),a[e].map((function(e,t){return(0,l.jsxs)("div",{className:"flex items-center py-2 px-4",children:[(0,l.jsx)("div",{className:"w-[75%] text-sm",children:e.description}),(0,l.jsx)("div",{className:"w-[10%] text-right text-sm",children:e.quantity}),(0,l.jsxs)("div",{className:"w-[15%] text-right text-sm",children:["$",(e.amount/100).toFixed(2)]})]},"breakdown-row-".concat(t))}))]},"breakdown-".concat(t))})),(0,l.jsxs)("div",{className:"flex flex-col space-y-1 py-2 px-4",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-[75%] text-sm",children:"Total amount"}),(0,l.jsx)("div",{className:"w-[10%] text-right text-sm"}),(0,l.jsxs)("div",{className:"w-[15%] text-right text-xl",children:["$",s<0?0:s.toFixed(2)]})]}),s<0&&(0,l.jsxs)("div",{className:"flex items-center text-scale-1100",children:[(0,l.jsx)("div",{className:"w-[75%] text-sm",children:"Amount returned as credits for unused resources"}),(0,l.jsx)("div",{className:"w-[10%] text-right text-sm"}),(0,l.jsxs)("div",{className:"w-[15%] text-right text-sm",children:["$",Math.abs(s).toFixed(2)]})]})]})]})})]})})},$=function(e){var t,s,n,i,r=e.subscriptionPreview,a=e.isRefreshingPreview,o=e.isSpendCapEnabled,c=null!==(t=null===r||void 0===r?void 0:r.has_changes)&&void 0!==t&&t,d=(null!==(s=null===r||void 0===r?void 0:r.base_amount_due_next_billing_cycle)&&void 0!==s?s:0)/100,u=(null!==(n=null===r||void 0===r?void 0:r.amount_due_immediately)&&void 0!==n?n:0)/100,m=new Date(1e3*(null!==(i=null===r||void 0===r?void 0:r.bill_on)&&void 0!==i?i:0)),h=(new Date).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"})===m.toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"}),f=(0,z.useState)(!1),j=f[0],v=f[1];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.gbz,{active:a,children:(0,l.jsx)("div",{className:"mb-2 space-y-4",children:(0,l.jsxs)("div",{className:"flex items-start justify-between space-x-12",children:[(0,l.jsxs)("div",{className:"",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("p",{children:"Total amount due"}),c&&(0,l.jsxs)(p.fC,{delayDuration:0,children:[(0,l.jsx)(p.xz,{children:(0,l.jsx)(x.Sus,{size:16,strokeWidth:1.5,className:"cursor-pointer opacity-50 transition hover:opacity-100",onClick:function(){return v(!0)}})}),(0,l.jsxs)(p.VY,{side:"bottom",children:[(0,l.jsx)(p.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200 "].join(" "),children:(0,l.jsx)("span",{className:"text-xs text-scale-1200",children:"How is this calculated?"})})]})]})]}),c?(0,l.jsxs)("div",{className:"space-y-2",children:[u<0?(0,l.jsxs)("p",{className:"text-sm text-scale-1100",children:["A total of $",Math.abs(u).toFixed(2)," will be returned on"," ",(0,l.jsx)("span",{className:"text-brand-900",children:m.toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"})})," ","for unused resources."]}):(0,l.jsxs)("p",{className:"text-sm text-scale-1100",children:["This amount ",!o&&!h&&"+ usage fees ","will be charged on"," ",(0,l.jsx)("span",{className:"text-brand-900",children:m.toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"})}),"."]}),(0,l.jsxs)("p",{className:"text-sm text-scale-1100",children:["You'll pay a monthly total of"," ",(0,l.jsxs)("span",{className:"text-scale-1200",children:["$",d," ",!o&&"+ usage fees "]})," ","for each subsequent billing cycle."]})]}):(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"No changes to current subscription"})]}),(0,l.jsxs)("div",{className:"relative -top-[8px] flex items-end justify-end",children:[(0,l.jsx)("p",{className:"relative -top-[1px] text-scale-1100",children:"$"}),(0,l.jsx)("p",{className:"text-2xl",children:c?(u<0?0:u).toFixed(2):"0.00"})]})]})})}),(0,l.jsx)(B,{visible:j,totalDue:u,billingDate:m,costBreakdown:(null===r||void 0===r?void 0:r.cost_breakdown)||[],onCancel:function(){return v(!1)}})]})},W=s(33114),V=function(e){var t=e.metadata.supabase_prod_id.split("_")[2];return Number(t.split("days")[0])},K=function(e){var t=e.visible,s=e.isSubmitting,n=e.isChangingInstanceSize,i=e.isDisablingPITR,r=e.onCancel,a=e.onConfirm;return(0,l.jsx)(x.u_l,{hideFooter:!0,visible:t,size:"large",header:"Confirm changes to your project's subscription",onCancel:r,children:(0,l.jsxs)("div",{className:"space-y-4 py-4",children:[(0,l.jsx)(x.u_l.Content,{children:(0,l.jsxs)("div",{className:"space-y-2",children:[n&&(0,l.jsx)(x.bZj,{withIcon:!0,variant:"warning",title:"Your project will need to be restarted for size changes to take place",children:"Upon confirmation, your project will be restarted to change your instance size. This will take up to 2 minutes in which your project will be unavailable during the time."}),i&&(0,l.jsx)(x.bZj,{withIcon:!0,variant:"warning",title:"All available PITR back ups for your project will be removed and are non-recoverable",children:"As such, your project will not have past PITR backups if you were to re-enable PITR for your project."})]})}),(0,l.jsx)(x.u_l.Content,{children:(0,l.jsx)("p",{className:"text-sm text-scale-1200",children:"Confirm the changes to your project's subscription?"})}),(0,l.jsx)(x.u_l.Separator,{}),(0,l.jsx)(x.u_l.Content,{children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(x.zxk,{block:!0,type:"default",onClick:r,children:"Cancel"}),(0,l.jsx)(x.zxk,{block:!0,type:"primary",loading:s,disabled:s,onClick:a,children:"Confirm"})]})})]})})},H=function(e){var t,s,n,i,r,a,c,d,u,f,j,v,b,g,y,N=e.isRefreshingPreview,w=e.isSpendCapEnabled,k=e.currentSubscription,_=e.subscriptionPreview,S=e.currentPlan,P=e.currentAddons,T=e.selectedPlan,O=e.selectedAddons,E=e.paymentMethods,R=e.selectedPaymentMethod,Z=e.isLoadingPaymentMethods,F=e.onSelectPaymentMethod,U=e.onSelectAddNewPaymentMethod,M=e.beforeConfirmPayment,Y=e.onConfirmPayment,I=e.isSubmitting,L=e.captcha,G=(0,h.oR)().ui,B=null===(t=G.selectedProject)||void 0===t?void 0:t.region,H=(0,h.FH)(m.KA.BILLING_WRITE,"stripe.payment_methods"),q=(0,z.useState)(!1),X=q[0],Q=q[1],J=void 0!==P.pitrDuration?V(P.pitrDuration):0,ee=void 0!==O.pitrDuration?V(O.pitrDuration):0,te=S.supabase_prod_id===o.ev.ENTERPRISE,se=S.prod_id!==o.Tx.PAYG&&T&&S.prod_id!==T.id||S.prod_id!==o.Tx.PAYG&&!w||S.prod_id===o.Tx.PAYG&&w,ne=P.computeSize.id!==O.computeSize.id,ie=(null===(s=P.pitrDuration)||void 0===s?void 0:s.id)!==(null===(n=O.pitrDuration)||void 0===n?void 0:n.id),re=(null===(i=P.customDomains)||void 0===i?void 0:i.id)!==(null===(r=O.customDomains)||void 0===r?void 0:r.id),ae=te?ne||ie:null!==(a=null===_||void 0===_?void 0:_.has_changes)&&void 0!==a&&a,oe=function(e){return e.prod_id===o.Tx.PAYG||e.id===o.Tx.PAYG?"Pro tier (No spend caps)":e.name},ce=function(e){var t,s,n;return((null!==(t=null===(s=(null!==(n=null===k||void 0===k?void 0:k.addons)&&void 0!==n?n:[]).find((function(t){var s;return t.prod_id===(null===(s=P[e])||void 0===s?void 0:s.id)})))||void 0===s?void 0:s.unit_amount)&&void 0!==t?t:0)/100).toFixed(2)},le=function(){var e=(0,C.Z)(D().mark((function e(){var t;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=(0,A.G8)(O))){e.next=5;break}return e.abrupt("return",G.setNotification({duration:4e3,category:"error",message:t}));case 5:return e.next=7,M();case 7:e.sent&&(ne||ie&&0===ee?Q(!0):Y());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"w-full px-6 py-10 space-y-8 overflow-y-auto border-l bg-panel-body-light dark:bg-panel-body-dark lg:px-12",style:{height:"calc(100vh - 57px)"},children:[(0,l.jsx)("p",{children:"Payment Summary"}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"Selected subscription"}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"".concat(se?"text-scale-1100 line-through":""," text-sm"),children:oe(S)}),(0,l.jsxs)("p",{className:"".concat(se?"text-scale-1100 line-through":""," text-sm"),children:["$",(S.unit_amount/100).toFixed(2)]})]}),se&&(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-sm",children:oe(T)}),(0,l.jsxs)("p",{className:"text-sm",children:["$",((0,A.mt)(T).unit_amount/100).toFixed(2)]})]})]}),"af-south-1"!==B&&(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"Selected add-ons"}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"".concat(ne?"text-scale-1100 line-through":""," text-sm"),children:P.computeSize.name}),(0,l.jsxs)("p",{className:"".concat(ne?"text-scale-1100 line-through":""," text-sm"),children:["$",ce("computeSize")]})]}),ne&&(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-sm",children:O.computeSize.name}),(0,l.jsxs)("p",{className:"text-sm",children:["$",((0,A.mt)(O.computeSize).unit_amount/100).toFixed(2)]})]}),void 0!==(null===(c=P.pitrDuration)||void 0===c?void 0:c.id)&&(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"".concat(ie?"text-scale-1100 line-through":""," text-sm"),children:null===(d=P.pitrDuration)||void 0===d?void 0:d.name}),(0,l.jsxs)("p",{className:"".concat(ie?"text-scale-1100 line-through":""," text-sm"),children:["$",ce("pitrDuration")]})]}),ie&&(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-sm",children:null===(u=O.pitrDuration)||void 0===u?void 0:u.name}),(0,l.jsxs)("p",{className:"text-sm",children:["$",((0,A.mt)(O.pitrDuration).unit_amount/100).toFixed(2)]})]}),void 0!==(null===(f=P.customDomains)||void 0===f?void 0:f.id)&&(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"".concat(re?"text-scale-1100 line-through":""," text-sm"),children:null===(j=P.customDomains)||void 0===j?void 0:j.name}),(0,l.jsxs)("p",{className:"".concat(re?"text-scale-1100 line-through":""," text-sm"),children:["$",ce("customDomains")]})]}),re&&(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-sm",children:null===(v=O.customDomains)||void 0===v?void 0:v.name}),(0,l.jsxs)("p",{className:"text-sm",children:["$",((0,A.mt)(O.customDomains).unit_amount/100).toFixed(2)]})]}),void 0!==P.supportPlan&&(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-sm",children:null===(b=P.supportPlan)||void 0===b?void 0:b.name}),(0,l.jsxs)("p",{className:"text-sm",children:["$",ce("supportPlan")]})]}),(0,l.jsxs)("div",{className:"!mt-4 space-y-4",children:[ie&&(0,l.jsx)(W.Z,{hideCollapse:!0,defaultVisibility:!0,icon:(0,l.jsx)(x.Ldj,{strokeWidth:2}),title:void 0===(null===(g=P.pitrDuration)||void 0===g?void 0:g.id)?"Enabling PITR":void 0===(null===(y=O.pitrDuration)||void 0===y?void 0:y.id)?"Disabling PITR":"Updating PITR duration",description:ee>=J?"The days for which PITR is available for will only start at the time of enabling the add-on (e.g You will have access to the full ".concat(ee," days of PITR after ").concat(ee-J," days from today)"):0===ee?"All available PITR back ups for your project will be removed and are non-recoverable":"Only the latest ".concat(ee," days of PITR from today will be retained (all backups that are later than ").concat(ee," days will be removed and are non-recoverable)")}),ne&&(0,l.jsx)(W.Z,{hideCollapse:!0,defaultVisibility:!0,icon:(0,l.jsx)(x.Ldj,{strokeWidth:2}),title:"Changing your compute size",description:"It will take up to 2 minutes for changes to take place, and your project will be unavailable during that time"})]})]}),(0,l.jsx)("div",{className:"w-full h-px bg-scale-600"}),(0,l.jsx)($,{subscriptionPreview:_,isRefreshingPreview:N,isSpendCapEnabled:w}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("p",{className:"text-sm",children:"Select payment method"}),Z?(0,l.jsxs)("div",{className:"flex items-center px-4 py-2 space-x-4 border rounded-md border-scale-700 bg-scale-400",children:[(0,l.jsx)(x.pAw,{className:"animate-spin",size:14}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"Retrieving payment methods"})]}):0===E.length?(0,l.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border border-dashed rounded-md bg-scale-100",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4 text-scale-1100",children:[(0,l.jsx)(x.Ldj,{size:16,strokeWidth:1.5}),(0,l.jsx)("p",{className:"text-sm",children:"No saved payment methods"})]}),(0,l.jsxs)(p.fC,{delayDuration:0,children:[(0,l.jsx)(p.xz,{children:(0,l.jsx)(x.zxk,{type:"default",disabled:!H,icon:(0,l.jsx)(x.bln,{}),onClick:U,children:"Add new"})}),!H&&(0,l.jsxs)(p.VY,{side:"bottom",children:[(0,l.jsx)(p.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","w-48 border border-scale-200 text-center"].join(" "),children:(0,l.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to add new payment methods to this organization"})})]})]})]}):(0,l.jsxs)(x.RiT,{value:null===R||void 0===R?void 0:R.id,onChange:F,children:[E.map((function(e){var t="\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ".concat(e.card.last4);return(0,l.jsx)(x.RiT.Option,{label:t,value:e.id,addOnBefore:function(){return(0,l.jsx)("img",{src:"/img/payment-methods/".concat(e.card.brand.replace(" ","-").toLowerCase(),".png"),width:"32"})},children:(0,l.jsx)("div",{children:t})},e.id)})),(0,l.jsxs)("div",{className:"flex items-center px-3 py-2 space-x-2 transition cursor-pointer group hover:bg-scale-500",onClick:U,children:[(0,l.jsx)(x.SC9,{size:16}),(0,l.jsx)("p",{className:"transition text-scale-1000 group-hover:text-scale-1200",children:"Add new payment method"})]})]})]}),(0,l.jsx)("div",{className:"self-center",children:L}),(0,l.jsx)("div",{className:"flex items-center justify-end",children:(0,l.jsxs)(p.fC,{delayDuration:0,children:[(0,l.jsx)(p.xz,{className:"w-full",children:(0,l.jsx)(x.zxk,{block:!0,type:"primary",size:"medium",loading:I,disabled:I||Z||!ae||!R,onClick:function(){return le()},children:"Confirm payment"})}),ae?R?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)(p.VY,{side:"bottom",children:[(0,l.jsx)(p.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,l.jsx)("span",{className:"text-xs text-scale-1200",children:"Please select a payment method"})})]}):(0,l.jsxs)(p.VY,{side:"bottom",children:[(0,l.jsx)(p.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,l.jsx)("span",{className:"text-xs text-scale-1200",children:"No changes made to your subscription"})})]})]})})]}),(0,l.jsx)(K,{visible:X,isChangingInstanceSize:ne,isDisablingPITR:ie&&0===ee,isSubmitting:I,onCancel:function(){return Q(!1)},onConfirm:function(){return Y()}})]})},q=s(32672),X=function(e){var t=e.computeSizes,s=e.currentComputeSize,n=e.selectedComputeSize,i=e.onSelectOption,r=(0,h.UO)().ref,a=(0,h.P5)("disableProjectCreationAndUpdate");return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("h4",{className:"text-lg",children:"Compute add-ons"}),(0,l.jsx)(x.Cts,{color:"green",children:"Optional"})]}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"Choose the database instance size that best fits your needs"})]}),(0,l.jsx)(y.default,{href:"https://supabase.com/docs/guides/platform/compute-add-ons",children:(0,l.jsx)("a",{target:"_blank",children:(0,l.jsx)(x.zxk,{type:"default",icon:(0,l.jsx)(x.TqL,{strokeWidth:1.5}),children:"About compute add-ons"})})})]}),a?(0,l.jsx)(q.Z,{title:"Updating database add-ons is currently disabled"}):null!==s&&void 0!==s&&s.isLocked?(0,l.jsxs)("div",{className:["flex items-center justify-between block w-full rounded px-4 py-3","border border-scale-600 bg-scale-100 dark:border-scale-500 dark:bg-scale-400"].join(" "),children:[(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("h5",{className:"text-sm text-scale-1200",children:["Your project currently has the ",s.name," included"]}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"If you would like to change your compute size, do reach out to us"})]}),(0,l.jsx)("div",{className:"",children:(0,l.jsx)(y.default,{href:"/support/new?ref=".concat(r,"&category=sales&subject=Disable%20custom%20domains%20"),children:(0,l.jsx)("a",{children:(0,l.jsx)(x.zxk,{children:"Contact us"})})})})]}):(0,l.jsxs)(x.Y8K.Group,{type:"cards",className:"billing-compute-radio",children:[t.map((function(e){var t=(0,A.mt)(e);return(0,l.jsx)(x.Y8K,{hidden:!0,align:"vertical",label:(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("p",{children:e.name}),(null===s||void 0===s?void 0:s.id)===e.id&&(0,l.jsx)(x.Cts,{color:"brand",children:"Current selection"})]}),description:e.metadata.features,value:e.id,optionalLabel:(0,l.jsxs)("div",{className:"w-[6rem] flex items-center justify-end",children:["$",t.unit_amount/100," / month"]}),checked:(null===n||void 0===n?void 0:n.id)===e.id,onChange:function(){return i(e)}},e.id||"micro-add-on")})),(0,l.jsx)(x.Y8K,{hidden:!0,disabled:!0,align:"vertical",label:"Need a larger add on?",description:"Reach out to us - we've got you covered!",optionalLabel:(0,l.jsx)(y.default,{href:"/support/new?ref=".concat(r,"&category=sales&subject=Enquiry%20for%20larger%20compute%20size"),children:(0,l.jsx)("a",{children:(0,l.jsx)(x.zxk,{children:"Contact us"})})})},"compute-size-cta")]})]})},Q=function(e){var t,s,n,i,r=e.pitrDurationOptions,a=e.currentPitrDuration,o=e.selectedPitrDuration,c=e.onSelectOption,d=(0,h.oR)().ui,u=(0,h.UO)().ref,p=(0,h.P5)("disableProjectCreationAndUpdate"),m=null!==(t=null===(s=d.selectedProject)||void 0===s?void 0:s.region)&&void 0!==t?t:"",f=(0,Z.Gb)(null!==(n=null===(i=d.selectedProject)||void 0===i?void 0:i.dbVersion)&&void 0!==n?n:"")>=141044,j=["ap-northeast-2"].includes(m);return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("h4",{className:"text-lg",children:"Point in time recovery (PITR)"}),(0,l.jsx)(x.Cts,{color:"green",children:"Optional"})]}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"Restore your database from a specific point in time"}),f&&!j&&!(null!==a&&void 0!==a&&a.isLocked)&&(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)(W.Z,{icon:(0,l.jsx)(x.Ldj,{strokeWidth:2}),title:"Your project is required to minimally be on a Small Add-on to enable PITR",description:"This is to ensure that your project has enough resources to execute PITR successfully"})})]}),p?(0,l.jsx)(q.Z,{title:"Updating database add-ons is currently disabled"}):f?null!==a&&void 0!==a&&a.isLocked?(0,l.jsxs)("div",{className:["flex items-center justify-between block w-full rounded px-4 py-3","border border-scale-600 bg-scale-100 dark:border-scale-500 dark:bg-scale-400"].join(" "),children:[(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("h5",{className:"text-sm text-scale-1200",children:["Your project currently has ",a.name," included"]}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"If you would like to change your PITR duration, do reach out to us"})]}),(0,l.jsx)("div",{className:"",children:(0,l.jsx)(y.default,{href:"/support/new?ref=".concat(u,"&category=sales&subject=Change%20PITR%20duration"),children:(0,l.jsx)("a",{children:(0,l.jsx)(x.zxk,{children:"Contact us"})})})})]}):j?(0,l.jsx)(W.Z,{hideCollapse:!0,defaultVisibility:!0,title:"PITR is not available for your project's region (".concat(m,")"),description:(0,l.jsxs)("div",{className:"flex items-center justify-between m-1",children:[(0,l.jsx)("p",{className:"text-sm leading-normal",children:"Reach out to us if you're interested! We'll see what we can do for you."}),(0,l.jsx)(y.default,{href:"/support/new?ref=".concat(u,"&category=sales&subject=Enquiry%20on%20PITR%20for%20project%20in%20").concat(m),children:(0,l.jsx)("a",{children:(0,l.jsx)(x.zxk,{type:"default",children:"Contact support"})})})]}),icon:(0,l.jsx)(x.Ldj,{strokeWidth:2})}):(0,l.jsx)(x.Y8K.Group,{type:"cards",className:"billing-compute-radio",children:r.map((function(e){var t=(0,A.mt)(e);return(0,l.jsx)(x.Y8K,{hidden:!0,align:"vertical",label:(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("p",{children:e.name}),(null===a||void 0===a?void 0:a.id)===e.id&&(0,l.jsx)(x.Cts,{color:"brand",children:"Current selection"})]}),description:(0,l.jsx)("div",{children:(0,l.jsx)("p",{children:e.metadata.features})}),value:e.id,optionalLabel:(0,l.jsxs)("div",{children:["$",t.unit_amount/100," / month"]}),checked:(null===o||void 0===o?void 0:o.id)===e.id,onChange:function(){return c(e)}},e.id||"pitr-disabled")}))}):(0,l.jsx)(W.Z,{hideCollapse:!0,defaultVisibility:!0,title:"Your project is too old to be able to enable PITR for",description:(0,l.jsxs)("div",{className:"flex items-center justify-between m-1",children:[(0,l.jsx)("p",{className:"text-sm leading-normal",children:"Reach out to us if you're interested!"}),(0,l.jsx)(y.default,{href:"/support/new?ref=".concat(u,"&category=sales&subject=Project%20too%20old%20old%20for%20PITR"),children:(0,l.jsx)("a",{children:(0,l.jsx)(x.zxk,{type:"default",children:"Contact support"})})})]}),icon:(0,l.jsx)(x.Ldj,{strokeWidth:2})})]})},J=function(e){var t=e.options,s=e.currentOption,n=e.selectedOption,i=e.onSelectOption,r=(0,h.UO)().ref,a=(0,h.P5)("disableProjectCreationAndUpdate");return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("h4",{className:"text-lg",children:"Custom Domains"}),(0,l.jsx)(x.Cts,{color:"green",children:"Optional"})]}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"Present a branded experience to your users"})]}),a?(0,l.jsx)(q.Z,{title:"Updating database add-ons is currently disabled"}):null!==s&&void 0!==s&&s.isLocked?(0,l.jsxs)("div",{className:["flex items-center justify-between block w-full rounded px-4 py-3","border border-scale-600 bg-scale-100 dark:border-scale-500 dark:bg-scale-400"].join(" "),children:[(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("h5",{className:"text-sm text-scale-1200",children:"Your project currently has custom domains included"}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"If you would like to disable custom domains, do reach out to us"})]}),(0,l.jsx)("div",{className:"",children:(0,l.jsx)(y.default,{href:"/support/new?ref=".concat(r,"&category=sales&subject=Disable%20custom%20domains%20"),children:(0,l.jsx)("a",{children:(0,l.jsx)(x.zxk,{children:"Contact us"})})})})]}):(0,l.jsx)(x.Y8K.Group,{type:"cards",className:"billing-compute-radio",children:t.map((function(e){var t=(0,A.mt)(e);return(0,l.jsx)(x.Y8K,{hidden:!0,align:"vertical",label:(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("p",{children:e.name}),(null===s||void 0===s?void 0:s.id)===e.id&&(0,l.jsx)(x.Cts,{color:"brand",children:"Current selection"})]}),description:(0,l.jsx)("div",{children:(0,l.jsx)("p",{children:e.metadata.features})}),value:e.id,optionalLabel:(0,l.jsxs)("div",{children:["$",t.unit_amount/100," / month"]}),checked:(null===n||void 0===n?void 0:n.id)===e.id,onChange:function(){return i(e)}},e.id||"micro-add-on")}))})]})},ee=s(41373),te=s(44264),se=s(69282),ne=function(e){var t=e.returnUrl,s=e.onCancel,n=(0,h.oR)().ui,i=(0,te.useStripe)(),r=(0,te.useElements)(),a=(0,z.useState)(!1),o=a[0],c=a[1],d=function(){var e=(0,C.Z)(D().mark((function e(s){var a,o,l;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),i&&r){e.next=4;break}return console.error("Stripe.js has not loaded"),e.abrupt("return");case 4:return c(!0),void 0!==document&&document.body.classList.add("!pointer-events-auto"),e.next=8,i.confirmSetup({elements:r,confirmParams:{return_url:t}});case 8:a=e.sent,(o=a.error)&&(c(!1),n.setNotification({category:"error",message:null!==(l=null===o||void 0===o?void 0:o.message)&&void 0!==l?l:" Failed to save card details"})),void 0!==document&&document.body.classList.remove("!pointer-events-auto");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,l.jsxs)("form",{onSubmit:d,children:[(0,l.jsx)(x.u_l.Content,{children:(0,l.jsx)("div",{className:"transition ".concat(o?"pointer-events-none opacity-75":"opacity-100"),children:(0,l.jsx)(te.PaymentElement,{})})}),(0,l.jsx)(x.u_l.Separator,{}),(0,l.jsx)(x.u_l.Content,{children:(0,l.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[(0,l.jsx)(x.zxk,{block:!0,htmlType:"submit",type:"primary",loading:o,disabled:o,children:"Save"}),(0,l.jsx)(x.zxk,{htmlType:"button",type:"default",onClick:s,block:!0,disabled:o,children:"Cancel"})]})})]})},ie=(0,ee.J)(o.Yw),re=function(e){var t=e.visible,s=e.returnUrl,n=e.onCancel,i=(0,h.oR)().ui,r=(0,z.useState)(),a=r[0],c=r[1],d=(0,se.Y)(),u=(0,z.useState)(null),p=u[0],m=u[1],f=(0,z.useState)(null),j=f[0],v=f[1],b=(0,z.useCallback)((function(e){v(e)}),[]);(0,z.useEffect)((function(){var e=function(){var e=(0,C.Z)(D().mark((function e(){var s,n,i,r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&j&&d)){e.next=16;break}if(n=p,e.prev=2,n){e.next=8;break}return e.next=6,j.execute({async:!0});case 6:r=e.sent,n=null!==(i=null===r||void 0===r?void 0:r.response)&&void 0!==i?i:null;case 8:e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return");case 13:return e.next=15,y(null!==(s=n)&&void 0!==s?s:void 0);case 15:g();case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[t,j,d]);var g=function(){m(null),null===j||void 0===j||j.resetCaptcha()},y=function(){var e=(0,C.Z)(D().mark((function e(t){var s,n,r,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(void 0),r=null!==(s=null===(n=i.selectedOrganization)||void 0===n?void 0:n.slug)&&void 0!==s?s:"",e.next=4,(0,O.v_)("".concat(o.T5,"/organizations/").concat(r,"/payments/setup-intent"),{hcaptchaToken:t});case 4:if(!(a=e.sent).error){e.next=9;break}return e.abrupt("return",i.setNotification({category:"error",message:a.error.message,error:a.error}));case 9:c(a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N={clientSecret:a?a.client_secret:"",appearance:{theme:"night",labels:"floating"}},w=function(){return c(void 0),n()};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(M.Z,{ref:b,sitekey:"4ca1fdb9-c9c9-4495-ba50-c85fc0e7ec1f",size:"invisible",onVerify:function(e){m(e)},onClose:w,onExpire:function(){m(null)}}),(0,l.jsx)(x.u_l,{hideFooter:!0,size:"medium",visible:t&&void 0!==a,header:"Add new payment method",onCancel:w,className:"PAYMENT",children:(0,l.jsx)("div",{className:"py-4 space-y-4",children:(0,l.jsx)(te.Elements,{stripe:ie,options:N,children:(0,l.jsx)(ne,{returnUrl:s,onCancel:w})})})})]})},ae=s(55671),oe=function(e){var t=e.projectRef,s=(0,h.oR)().ui,n=(0,z.useState)(!1),i=n[0],r=n[1],a=(0,z.useState)(1),c=a[0],d=a[1],u=(0,z.useState)(0),p=u[0],m=u[1],f=(0,z.useState)([]),j=f[0],v=f[1],b=10*(c-1);(0,z.useEffect)((function(){var e=!1,n=function(){var n=(0,C.Z)(D().mark((function n(){var i;return D().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,O.YM)("".concat(o.T5,"/projects/").concat(t,"/invoices"),["X-Total-Count"]);case 2:i=n.sent,e||(i.error?s.setNotification({category:"error",message:i.error.message}):m(i["X-Total-Count"]));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return d(1),g(1),n(),function(){e=!0}}),[]);var g=function(){var e=(0,C.Z)(D().mark((function e(n){var i,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),d(n),i=10*(n-1),e.next=5,(0,O.U2)("".concat(o.T5,"/projects/").concat(t,"/invoices?offset=").concat(i,"&limit=").concat(10));case 5:(a=e.sent).error?s.setNotification({category:"error",message:a.error.message}):v(a),r(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,C.Z)(D().mark((function e(t){var n;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.U2)("".concat(o.T5,"/stripe/invoices/").concat(t));case 2:null!==(n=e.sent)&&void 0!==n&&n.invoice_pdf?window.open(n.invoice_pdf,"_blank"):s.setNotification({category:"info",message:"Unable to fetch the selected invoice"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,l.jsx)("div",{className:"container my-4 max-w-4xl space-y-1",children:(0,l.jsx)(x.gbz,{active:i,children:(0,l.jsx)(ae.Z,{head:[(0,l.jsx)(ae.Z.th,{},"header-icon"),(0,l.jsx)(ae.Z.th,{children:"Date"},"header-date"),(0,l.jsx)(ae.Z.th,{children:"Amount due"},"header-amount"),(0,l.jsx)(ae.Z.th,{children:"Invoice number"},"header-invoice"),(0,l.jsx)(ae.Z.th,{className:"text-right"},"header-download")],body:0===j.length?(0,l.jsx)(ae.Z.tr,{children:(0,l.jsx)(ae.Z.td,{colSpan:5,className:"p-3 py-12 text-center",children:(0,l.jsx)("p",{className:"text-scale-1000",children:i?"Checking for invoices":"No invoices for this project yet"})})}):(0,l.jsxs)(l.Fragment,{children:[j.map((function(e){return(0,l.jsxs)(ae.Z.tr,{children:[(0,l.jsx)(ae.Z.td,{children:(0,l.jsx)(x.k_6,{size:"xxl"})}),(0,l.jsx)(ae.Z.td,{children:(0,l.jsx)("p",{children:new Date(1e3*e.period_end).toLocaleString()})}),(0,l.jsx)(ae.Z.td,{children:(0,l.jsx)("p",{children:e.subtotal>=0?"$".concat(e.subtotal/100):"-$".concat(Math.abs(e.subtotal/100))})}),(0,l.jsx)(ae.Z.td,{children:(0,l.jsx)("p",{children:e.number})}),(0,l.jsx)(ae.Z.td,{className:"align-right",children:(0,l.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,l.jsx)(x.zxk,{type:"outline",icon:(0,l.jsx)(x.DjJ,{}),onClick:function(){return y(e.id)}})})})]},e.id)})),(0,l.jsx)(ae.Z.tr,{children:(0,l.jsx)(ae.Z.td,{colSpan:5,children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("p",{className:"text-sm opacity-50",children:["Showing ",b+1," to ",b+j.length," out of ",p," invoices"]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(x.zxk,{icon:(0,l.jsx)(x.ed9,{}),type:"default",size:"tiny",disabled:1===c,onClick:(0,C.Z)(D().mark((function e(){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(c-1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}),(0,l.jsx)(x.zxk,{icon:(0,l.jsx)(x.VG8,{}),type:"default",size:"tiny",disabled:10*c>=p,onClick:(0,C.Z)(D().mark((function e(){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(c+1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))})]})]})})},"navigation")]})})})})}},51465:function(e,t,s){s.d(t,{Z:function(){return E}});var n=s(90849),i=s(90089),r=s(55732),a=s(34707),o=s.n(a),c=s(27378),l=s(86677),d=s(98784),u=s(88983),x=s(20796),p=s(14919),m=s(55621),h=s(29009),f=s(46888),j=s(3023),v=s(14888),b=s(86108),g=s(27693),y=s.n(g),N=s(54511),w=s(40834),k=s(96600),_=s.n(k),S=s(53661),P=s(16915),C=s(24246);y().extend(_());var T=function(e){var t,s,n=e.data,i=e.yAxisKey,r=e.xAxisKey,a=e.format,o=e.customDateFormat,l=void 0===o?N.EE.FULL:o,d=e.title,u=e.highlightedValue,x=e.highlightedLabel,p=e.displayDateInUtc,m=e.minimalHeader,g=e.className,k=void 0===g?"":g,_=(0,c.useState)(null),T=_[0],D=_[1];if(0===n.length)return(0,C.jsx)(S.Z,{});var z,O=null!==T&&n&&n[T]&&(z=n[T][r],p?y()(z).utc():y()(z)).format(l)||x,E=(null!==T?null===(t=n[T])||void 0===t?void 0:t[i]:null)||u;return(0,C.jsxs)("div",{className:["flex flex-col gap-3",k].join(" "),children:[(0,C.jsx)(w.Z,{title:d,format:a,customDateFormat:l,highlightedValue:"number"===typeof E?(0,P.V2)(E):E,highlightedLabel:O,minimalHeader:m}),(0,C.jsx)(h.h,{width:"100%",height:160,children:(0,C.jsxs)(f.T,{data:n,margin:{top:0,right:0,left:0,bottom:0},className:"overflow-visible",onMouseMove:function(e){e.activeTooltipIndex!==T&&D(e.activeTooltipIndex)},onMouseLeave:function(){return D(null)},children:[(0,C.jsx)("defs",{children:(0,C.jsxs)("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,C.jsx)("stop",{offset:"5%",stopColor:N.ZE.GREEN_1,stopOpacity:.8}),(0,C.jsx)("stop",{offset:"95%",stopColor:N.ZE.GREEN_1,stopOpacity:0})]})}),(0,C.jsx)(j.K,{dataKey:r,interval:n.length-2,angle:0,tick:{fontSize:"0px"},axisLine:{stroke:N.ZE.AXIS},tickLine:{stroke:N.ZE.AXIS}}),(0,C.jsx)(v.u,{content:function(){return null}}),(0,C.jsx)(b.u,{type:"monotone",dataKey:i,stroke:N.ZE.GREEN_1,fillOpacity:1,fill:"url(#colorUv)"})]})}),n&&(0,C.jsxs)("div",{className:"text-scale-900 -mt-5 flex items-center justify-between text-xs",children:[(0,C.jsx)("span",{children:y()(n[0][r]).format(l)}),(0,C.jsx)("span",{children:y()(null===(s=n[(null===n||void 0===n?void 0:n.length)-1])||void 0===s?void 0:s[r]).format(l)})]})]})},D=["error"];function z(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?z(Object(s),!0).forEach((function(t){(0,n.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):z(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var E=function(e){var t,s,a,h,f=e.label,j=e.attribute,v=e.provider,b=e.startDate,g=e.endDate,y=e.interval,N=e.customDateFormat,w=e.children,k=void 0===w?null:w,_=e.defaultChartStyle,S=void 0===_?"bar":_,P=e.hideChartType,z=void 0!==P&&P,E=e.data,R=e.isLoading,A=e.format,Z=e.highlightedValue,F=e.onBarClick,U=(0,l.useRouter)().query.ref,M=(0,c.useState)(!1),Y=M[0],I=M[1],L=(0,c.useState)(void 0),G=L[0],B=L[1],$=(0,c.useState)(S),W=$[0],V=$[1],K=E||G,H=R||Y;return(0,c.useEffect)((function(){var e=!1,t=function(){var t=(0,r.Z)(o().mark((function t(){var s,r,a,c,l,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I(!0),r="".concat(x.T5,"/projects/").concat(U,"/").concat(v,"?attribute=").concat(j,"&startDate=").concat(encodeURIComponent(b),"&endDate=").concat(encodeURIComponent(g),"&interval=").concat(y||"1d"),t.next=4,(0,p.U2)(r);case 4:if(a=t.sent,c=a.error,l=(0,i.Z)(a,D),!c&&!(0,d.isUndefined)(l)||e){t.next=11;break}return I(!1),B(void 0),t.abrupt("return",console.error("Chart error:",c));case 11:u=(null!==(s=null===l||void 0===l?void 0:l.data)&&void 0!==s?s:[]).map((function(e,t){return O(O({},e),{},(0,n.Z)({},j,e[j]?Number(e[j]):0))})),e||(B(O(O({},l),{},{data:u})),I(!1));case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return void 0!==E||R||t(),function(){e=!0}}),[b]),Z=Z||("daily-stats"!==v||j.includes("ingress")||j.includes("egress")?"daily-stats"===v?null===K||void 0===K?void 0:K.total:"log-stats"===v?null===K||void 0===K||null===(t=K.totalGrouped)||void 0===t?void 0:t[j]:null===K||void 0===K||null===(s=K.data[(null===K||void 0===K?void 0:K.data.length)-1])||void 0===s?void 0:s[j]:null===K||void 0===K?void 0:K.maximum),H?(0,C.jsxs)("div",{className:"flex h-52 w-full flex-col items-center justify-center space-y-4",children:[(0,C.jsx)(u.pAw,{className:"animate-spin text-scale-700"}),(0,C.jsxs)("p",{className:"text-xs text-scale-900",children:["Loading data for ",f]})]}):(0,d.isUndefined)(K)?(0,C.jsxs)("div",{className:"flex h-52 w-full flex-col items-center justify-center space-y-4",children:[(0,C.jsx)(u.Ldj,{className:"text-scale-700"}),(0,C.jsxs)("p",{className:"text-xs text-scale-900",children:["Unable to load data for ",f]})]}):(0,C.jsxs)("div",{className:"h-full w-full",children:[(0,C.jsxs)("div",{className:"absolute right-6 z-50 flex justify-between",children:[(0,C.jsx)("div",{className:"space-y-3",children:k}),!z&&(0,C.jsx)("div",{children:(0,C.jsx)("div",{className:"flex w-full space-x-3",children:(0,C.jsx)(u.zxk,{type:"default",icon:"bar"===W?(0,C.jsx)(u.zGS,{}):(0,C.jsx)(u.NZQ,{}),onClick:function(){return V("bar"===W?"line":"bar")}})})})]}),"bar"===W?(0,C.jsx)(m.v,{data:null!==(a=null===K||void 0===K?void 0:K.data)&&void 0!==a?a:[],attribute:j,yAxisLimit:null===K||void 0===K?void 0:K.yAxisLimit,format:A||(null===K||void 0===K?void 0:K.format),highlightedValue:Z,label:f,customDateFormat:N,onBarClick:F}):(0,C.jsx)(T,{data:null!==(h=null===K||void 0===K?void 0:K.data)&&void 0!==h?h:[],format:A||(null===K||void 0===K?void 0:K.format),xAxisKey:"period_start",yAxisKey:j,highlightedValue:Z,title:f,customDateFormat:N})]})}},55671:function(e,t,s){var n=s(90849),i=s(90089),r=(s(27378),s(24246)),a=["children","colSpan","className","style"];function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){(0,n.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e){var t=e.body,s=e.head,n=e.className,i=e.containerClassName,a=e.borderless,o=e.headTrClasses,c=e.bodyClassName,l=e.style,d=["table-container"];i&&d.push(i),a&&d.push("table-container--borderless");var u=["table"];return n&&u.push(n),(0,r.jsx)("div",{className:d.join(" "),children:(0,r.jsxs)("table",{className:u.join(" "),style:l,children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{className:o,children:s})}),(0,r.jsx)("tbody",{className:c,children:t})]})})}l.th=function(e){var t=e.children,s=e.className,n=e.style,i=["p-3 px-4 text-left"];return s&&i.push(s),(0,r.jsx)("th",{className:i.join(" "),style:n,children:t})},l.td=function(e){var t=e.children,s=e.colSpan,n=e.className,o=e.style,l=(0,i.Z)(e,a);return(0,r.jsx)("td",c(c({className:n,colSpan:s,style:o},l),{},{children:t}))},l.tr=function(e){var t=e.children,s=e.className,n=e.onClick,i=e.style,a=e.hoverable,o=[s];return(n||a)&&o.push("tr--link"),(0,r.jsx)("tr",{className:o.join(" "),onClick:n,style:i,children:t})},t.Z=l},87750:function(e,t,s){var n=s(88983),i=s(24246);t.Z=function(e){var t=e.onClick;return(0,i.jsx)("div",{className:"-ml-2 2xl:absolute 2xl:top-[2px] 2xl:left-0",children:(0,i.jsx)(n.zxk,{type:"text",icon:(0,i.jsx)(n.D6v,{}),onClick:t,children:"Back"})})}},32672:function(e,t,s){var n=s(88983),i=s(33114),r=s(24246);t.Z=function(e){var t=e.title;return(0,r.jsx)(i.Z,{icon:(0,r.jsx)(n.Ldj,{size:20,strokeWidth:1.5}),defaultVisibility:!0,hideCollapse:!0,title:t,description:(0,r.jsx)("div",{className:"space-y-3",children:(0,r.jsxs)("p",{className:"text-sm leading-normal",children:["Our engineers are currently working on a fix. You can follow updates on"," ",(0,r.jsx)("a",{className:"text-brand-900",href:"https://status.supabase.com/",children:"https://status.supabase.com/"})]})})})}},33114:function(e,t,s){var n=s(79894),i=s(27378),r=s(88983),a=s(24246);t.Z=function(e){var t=e.icon,s=e.title,o=e.description,c=e.url,l=e.urlLabel,d=void 0===l?"Read more":l,u=e.defaultVisibility,x=void 0!==u&&u,p=e.hideCollapse,m=void 0!==p&&p,h=e.button,f=e.className,j=void 0===f?"":f,v=e.block,b=void 0!==v&&v,g=(0,i.useState)(x),y=g[0],N=g[1];return(0,a.jsx)("div",{className:"".concat(b?"block w-full":"","\n      block w-full rounded border border-scale-600 bg-scale-100 py-3 dark:border-scale-500 dark:bg-scale-400 ").concat(j),children:(0,a.jsxs)("div",{className:"flex flex-col px-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex w-full space-x-3 lg:items-start",children:[t&&(0,a.jsx)("span",{className:"text-scale-900",children:t}),(0,a.jsx)("div",{className:"flex-grow",children:(0,a.jsx)("h5",{className:"text-sm text-scale-1200",children:s})})]}),o&&!m?(0,a.jsx)("div",{className:"cursor-pointer text-scale-900",onClick:function(){return N(!y)},children:y?(0,a.jsx)(r.hJz,{size:14,strokeWidth:1.5}):(0,a.jsx)(r.FgK,{size:14,strokeWidth:1.5})}):null]}),(o||c||h)&&(0,a.jsxs)("div",{className:"flex flex-col space-y-3 overflow-hidden transition-all ".concat(y?"mt-3":""),style:{maxHeight:y?500:0},children:[(0,a.jsx)("div",{className:"text-scale-1100 text-sm",children:o}),c&&(0,a.jsx)(n.default,{href:c,children:(0,a.jsx)("a",{target:"_blank",className:"pt-2",children:(0,a.jsx)(r.zxk,{type:"default",icon:(0,a.jsx)(r.TqL,{}),children:d})})}),h&&(0,a.jsx)("div",{children:h})]})]})})}}}]);
//# sourceMappingURL=7533-ce26a2bb914ae6ab.js.map