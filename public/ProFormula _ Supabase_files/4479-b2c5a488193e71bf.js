"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4479],{54670:function(e,t,s){s.d(t,{Hk:function(){return z},vI:function(){return D},Zv:function(){return L},ds:function(){return _}});var n=s(55732),r=s(44285),i=s(34707),a=s.n(i),c=s(27693),l=s.n(c),o=s(86677),d=s(27378),u=s(24532),x=s(68043),h=s(88983),m=s(42791),p=s(96423),f=s(24246),j=function(e){var t=e.commands;return(0,f.jsx)("div",{className:"space-y-4",children:t.map((function(e,t){var s=(0,d.useState)(!1),n=s[0],r=s[1];return(0,f.jsxs)("div",{className:"space-y-1",children:[(0,f.jsx)("span",{className:"font-mono text-sm text-scale-900",children:"> ".concat(e.comment)}),(0,f.jsx)("div",{className:"flex items-center gap-2",children:(0,f.jsxs)("div",{className:"flex gap-2 font-mono text-sm font-normal text-scale-1200",children:[(0,f.jsx)("span",{className:"text-scale-900",children:"$"}),(0,f.jsxs)("span",{children:[(0,f.jsxs)("span",{className:"",children:[e.jsx?e.jsx():null," "]}),(0,f.jsx)("button",{type:"button",className:"text-scale-900 hover:text-scale-1200",onClick:function(){var t;t=e.command,r(!0),navigator.clipboard.writeText(t).then(),setTimeout((function(){r(!1)}),3e3)},children:n?(0,f.jsx)("div",{className:"text-brand-900",children:(0,f.jsx)(h.NOm,{size:14,strokeWidth:3})}):(0,f.jsx)("div",{className:"relative",children:(0,f.jsx)("div",{className:"block",children:(0,f.jsx)(h.Rx8,{size:14})})})})]})]})})]},"command-".concat(t))}))})},v=s(2288),b=s(90849),g=s(90089),N=s(85945),y=s(48228),w=s(14919),k=s(20796),R=s(36230),O=["onSuccess"];function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function M(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){(0,b.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function C(e){return A.apply(this,arguments)}function A(){return(A=(0,n.Z)(a().mark((function e(t){var s,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.projectRef,n=t.slug,s){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,w.$v)("".concat(k.Q2,"/projects/").concat(s,"/functions/").concat(n),{});case 5:if(!(r=e.sent).error){e.next=8;break}throw r.error;case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,s=(0,g.Z)(e,O),r=(0,N.NL)();return(0,y.D)((function(e){return C(e)}),M({onSuccess:function(e,s,i){return(0,n.Z)(a().mark((function n(){var c;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=s.projectRef,n.next=3,r.invalidateQueries(R.f.list(c),{refetchType:"all"});case 3:return n.next=5,null===t||void 0===t?void 0:t(e,s,i);case 5:case"end":return n.stop()}}),n)})))()}},s))},z=function(){var e,t=(0,o.useRouter)(),s=(0,m.oR)(),i=s.functions,c=s.ui,b=(0,m.UO)(),g=b.ref,N=b.id,y=(0,d.useState)(!1),w=y[0],k=y[1],R=(0,d.useState)(!1),O=R[0],E=R[1],M=(0,d.useState)(!1),C=M[0],A=M[1],z=(0,d.useState)(null),F=z[0],P=z[1],D=(0,m.FH)(x.KA.FUNCTIONS_WRITE,"*"),Y=S(),T=Y.mutateAsync,_=Y.isLoading;(0,d.useEffect)((function(){P(i.byId(N))}),[i.isLoaded,c.selectedProject]);var L=(0,v.qP)({projectRef:g}).data,Z=null===L||void 0===L?void 0:L.autoApiService,U=null!==Z&&void 0!==Z&&Z.service_api_keys.find((function(e){return"anon key"===e.name}))?Z.defaultApiKey:void 0,H=(null!==(e=null===Z||void 0===Z?void 0:Z.app_config.endpoint)&&void 0!==e?e:"").split("."),I=[].concat((0,r.Z)(H.slice(0,1)),["functions"],(0,r.Z)(H.slice(1))).join("."),W="".concat(null===Z||void 0===Z?void 0:Z.protocol,"://").concat(I,"/").concat(null===F||void 0===F?void 0:F.slug),V=function(){var e=(0,n.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return",console.error("Project ref is required"));case 2:if(void 0!==F){e.next=4;break}return e.abrupt("return",console.error("No edge function selected"));case 4:return e.prev=4,e.next=7,T({projectRef:g,slug:F.slug});case 7:c.setNotification({category:"success",message:'Successfully deleted "'.concat(F.name,'"')}),t.push("/project/".concat(g,"/functions")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),c.setNotification({category:"error",message:"Failed to delete function: ".concat(e.t0.message)});case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),B=[{command:"supabase functions deploy ".concat(null===F||void 0===F?void 0:F.slug),description:"This will overwrite the deployed function with your new function",jsx:function(){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text-brand-1100",children:"supabase"})," functions deploy"," ",null===F||void 0===F?void 0:F.slug]})},comment:"Deploy a new version"},{command:"supabase functions delete ".concat(null===F||void 0===F?void 0:F.slug),description:"This will remove the function and all the logs associated with it",jsx:function(){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text-brand-1100",children:"supabase"})," functions delete"," ",null===F||void 0===F?void 0:F.slug]})},comment:"Delete the function"}],K=[{command:"supabase secrets list",description:"This will list all the secrets for your project",jsx:function(){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text-brand-1100",children:"supabase"})," secrets list"]})},comment:"View all secrets"},{command:"supabase secrets set NAME1=VALUE1 NAME2=VALUE2",description:"This will set secrets for your project",jsx:function(){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text-brand-1100",children:"supabase"})," secrets set NAME1=VALUE1 NAME2=VALUE2"]})},comment:"Set secrets for your project"},{command:"supabase secrets unset NAME1 NAME2 ",description:"This will delete secrets for your project",jsx:function(){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text-brand-1100",children:"supabase"})," secrets unset NAME1 NAME2"]})},comment:"Unset secrets for your project"}],Q=[{command:"curl -L -X POST '".concat(W,"' -H 'Authorization: Bearer ").concat(null!==U&&void 0!==U?U:"[YOUR ANON KEY]",'\' --data \'{"name":"Functions"}\''),description:"Invokes the hello function",jsx:function(){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text-brand-1100",children:"curl"})," -L -X POST 'https://",I,"/",null===F||void 0===F?void 0:F.slug,"' -H 'Authorization: Bearer [YOUR ANON KEY]'"," ",'--data \'{"name":"Functions"}\'']})},comment:"Invoke your function"}];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"space-y-8 pb-16",children:[(0,f.jsxs)("div",{className:"space-y-6 rounded border bg-scale-100 px-10 py-8 drop-shadow-sm dark:bg-scale-300",children:[(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)("p",{className:"text-sm text-scale-1000 w-[130px]",children:"Function Name"}),(0,f.jsx)("p",{className:"text-sm text-scale-1200",children:null===F||void 0===F?void 0:F.name})]}),(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)("p",{className:"text-sm text-scale-1000 w-[130px]",children:"Endpoint URL"}),(0,f.jsx)("p",{className:"text-sm text-scale-1200",children:W}),(0,f.jsx)("button",{type:"button",className:"text-scale-900 hover:text-scale-1200 transition ml-2",onClick:function(e){var t;e.stopPropagation(),t=W,k(!0),navigator.clipboard.writeText(t).then(),setTimeout((function(){k(!1)}),3e3)},children:w?(0,f.jsx)("div",{className:"text-brand-900",children:(0,f.jsx)(h.NOm,{size:14,strokeWidth:3})}):(0,f.jsx)("div",{className:"relative",children:(0,f.jsx)("div",{className:"block",children:(0,f.jsx)(h.Rx8,{size:14,strokeWidth:1.5})})})})]}),(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)("p",{className:"text-sm text-scale-1000 w-[130px]",children:"Created At"}),(0,f.jsx)("p",{className:"text-sm text-scale-1200",children:(null===F||void 0===F?void 0:F.created_at)&&l()(F.created_at).format("dddd, MMMM D, YYYY h:mm A")})]}),(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)("p",{className:"text-sm text-scale-1000 w-[130px]",children:"Last Updated At"}),(0,f.jsx)("p",{className:"text-sm text-scale-1200",children:(null===F||void 0===F?void 0:F.updated_at)&&l()(F.updated_at).format("dddd, MMMM D, YYYY h:mm A")})]}),(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)("span",{className:"text-sm text-scale-1000 w-[130px]",children:"Deployments"}),(0,f.jsx)("div",{className:"text-sm text-scale-1200",children:null===F||void 0===F?void 0:F.version})]}),(0,f.jsxs)("div",{className:"flex items-start",children:[(0,f.jsx)("span",{className:"text-sm text-scale-1000 w-[130px]",children:"Regions"}),(0,f.jsxs)("div",{className:"col-span-2 flex flex-col gap-1",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 text-sm text-scale-1200",children:[(0,f.jsx)(h.vcr,{size:16,strokeWidth:1.5}),(0,f.jsx)("span",{children:"Earth"})]}),(0,f.jsx)("span",{className:"text-sm text-scale-1000",children:"All functions are deployed globally"})]})]})]}),(0,f.jsxs)("div",{className:"space-y-6 rounded border bg-scale-100 px-8 py-6 drop-shadow-sm dark:bg-scale-300 transition-all overflow-hidden",style:{maxHeight:C?800:80},children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,f.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded border bg-scale-1200 p-2 text-scale-100 dark:bg-scale-100 dark:text-scale-1200",children:(0,f.jsx)(h.Chd,{strokeWidth:2})}),(0,f.jsx)("h4",{children:"Command line access"})]}),(0,f.jsx)("div",{className:"cursor-pointer",onClick:function(){return A(!C)},children:C?(0,f.jsx)(h.hJz,{size:14,strokeWidth:1.5}):(0,f.jsx)(h.FgK,{size:14,strokeWidth:1.5})})]}),(0,f.jsx)("h5",{className:"text-base",children:"Deployment management"}),(0,f.jsx)(j,{commands:B}),(0,f.jsx)("h5",{className:"text-base",children:"Invoke "}),(0,f.jsx)(j,{commands:Q}),(0,f.jsx)("h5",{className:"text-base",children:"Secrets management"}),(0,f.jsx)(j,{commands:K})]}),(0,f.jsx)(p.Z,{title:(0,f.jsx)("p",{children:"Delete Edge Function"}),children:(0,f.jsx)(p.Z.Content,{children:(0,f.jsxs)(h.bZj,{withIcon:!0,variant:"danger",title:"Once your function is deleted, it can no longer be restored",children:[(0,f.jsx)("p",{className:"mb-3",children:"Make sure you have made a backup if you want to restore your edge function"}),(0,f.jsxs)(u.fC,{delayDuration:0,children:[(0,f.jsx)(u.xz,{children:(0,f.jsx)(h.zxk,{type:"danger",disabled:!D,loading:void 0===(null===F||void 0===F?void 0:F.id),onClick:function(){return E(!0)},children:"Delete edge function"})}),!D&&(0,f.jsxs)(u.VY,{side:"bottom",children:[(0,f.jsx)(u.Eh,{className:"radix-tooltip-arrow"}),(0,f.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,f.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to delete an edge function"})})]})]})]})})})]}),(0,f.jsx)(h.u_l,{size:"small",alignFooter:"right",header:(0,f.jsxs)("h3",{children:["Confirm to delete ",null===F||void 0===F?void 0:F.name]}),visible:O,loading:_,onCancel:function(){return E(!1)},onConfirm:V,children:(0,f.jsx)("div",{className:"py-6",children:(0,f.jsx)(h.u_l.Content,{children:(0,f.jsx)(h.bZj,{withIcon:!0,variant:"warning",title:"This action cannot be undone",children:"Ensure that you have made a backup if you want to restore your edge function"})})})})]})},F=s(25229),P=s(55671),D=(0,F.Pi)((function(e){var t,s=e.function,n=(0,o.useRouter)(),r=(0,m.oR)().ui,i=(0,m.UO)().ref,a=(0,d.useState)(!1),c=a[0],x=a[1],p=null===(t=r.selectedProject)||void 0===t?void 0:t.restUrl,j=new URL(p).hostname.split(".").pop(),v="https://".concat(i,".functions.supabase.").concat(j,"/").concat(s.slug);return(0,f.jsxs)(P.Z.tr,{onClick:function(){n.push("/project/".concat(i,"/functions/").concat(s.id,"/details"))},children:[(0,f.jsx)(P.Z.td,{className:"",children:(0,f.jsx)("div",{className:"flex items-center gap-2",children:(0,f.jsx)("p",{className:"text-sm text-scale-1200",children:s.name})})}),(0,f.jsx)(P.Z.td,{className:"",children:(0,f.jsxs)("div",{className:"text-xs text-scale-1100 flex gap-2 items-center truncate",children:[(0,f.jsx)("p",{className:"font-mono truncate hidden md:inline",children:v}),(0,f.jsx)("button",{type:"button",className:"text-scale-900 hover:text-scale-1200 transition",onClick:function(e){var t;e.stopPropagation(),t=v,x(!0),navigator.clipboard.writeText(t).then(),setTimeout((function(){x(!1)}),3e3)},children:c?(0,f.jsx)("div",{className:"text-brand-900",children:(0,f.jsx)(h.NOm,{size:14,strokeWidth:3})}):(0,f.jsx)("div",{className:"relative",children:(0,f.jsx)("div",{className:"block",children:(0,f.jsx)(h.Rx8,{size:14,strokeWidth:1.5})})})})]})}),(0,f.jsx)(P.Z.td,{className:"hidden 2xl:table-cell",children:(0,f.jsx)("p",{className:"text-scale-1100",children:l()(s.created_at).format("DD MMM, YYYY HH:mm")})}),(0,f.jsx)(P.Z.td,{className:"lg:table-cell",children:(0,f.jsxs)(u.fC,{delayDuration:0,children:[(0,f.jsx)(u.xz,{children:(0,f.jsx)("div",{className:"flex items-center space-x-2",children:(0,f.jsx)("p",{className:"text-sm text-scale-1000",children:l()(s.updated_at).fromNow()})})}),(0,f.jsxs)(u.VY,{side:"bottom",children:[(0,f.jsx)(u.Eh,{className:"radix-tooltip-arrow"}),(0,f.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,f.jsxs)("span",{className:"text-xs text-scale-1200",children:["Last updated on ",l()(s.updated_at).format("DD MMM, YYYY HH:mm")]})})]})]})}),(0,f.jsx)(P.Z.td,{className:"lg:table-cell",children:(0,f.jsx)("p",{className:"text-scale-1100",children:s.version})})]},s.id)})),Y=s(79894),T=s(66745),_=function(e){var t,s=e.closable,n=void 0!==s&&s,i=e.removeBorder,a=void 0!==i&&i,c=(0,o.useRouter)(),l=(0,m.UO)().ref,u=(0,d.useState)(!n),x=u[0],p=u[1],b=(0,T.hV)().data,g=(0,v.qP)({projectRef:l}).data,N=null===g||void 0===g?void 0:g.autoApiService,y=null!==N&&void 0!==N&&N.service_api_keys.find((function(e){return"anon key"===e.name}))?N.defaultApiKey:void 0,w=(null!==(t=null===g||void 0===g?void 0:g.autoApiService.app_config.endpoint)&&void 0!==t?t:"").split("."),k=[].concat((0,r.Z)(w.slice(0,1)),["functions"],(0,r.Z)(w.slice(1))).join("."),R=null===g||void 0===g?void 0:g.autoApiService.restUrl,O=R?new URL(R).hostname.split(".").pop():"",E=[{command:"supabase functions new hello-world",description:" creates a function stub at ./functions/hello-world/index.ts",jsx:function(){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text-brand-1100",children:"supabase"})," functions new hello-world"]})},comment:"Create a function"},{command:"supabase functions deploy hello-world --project-ref ".concat(l),description:"Deploys function at ./functions/hello-world/index.ts",jsx:function(){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text-brand-1100",children:"supabase"})," functions deploy hello-world --project-ref ",l]})},comment:"Deploy your function"},{command:"curl -L -X POST 'https://".concat(l,".functions.supabase.").concat(O,"/hello-world' -H 'Authorization: Bearer ").concat(null!==y&&void 0!==y?y:"[YOUR ANON KEY]",'\' --data \'{"name":"Functions"}\''),description:"Invokes the hello-world function",jsx:function(){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text-brand-1100",children:"curl"})," -L -X POST 'https://",k,"/hello-world' -H 'Authorization: Bearer [YOUR ANON KEY]'"," ",'--data \'{"name":"Functions"}\'']})},comment:"Invoke your function"}];return(0,f.jsxs)("div",{className:"col-span-7 overflow-hidden transition-all rounded bg-scale-100 dark:bg-scale-300 ".concat(a?"":"border shadow"),style:{maxHeight:x?500:80},children:[(0,f.jsxs)("div",{className:"px-8 py-6 space-y-6",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center gap-3",children:[(0,f.jsx)("div",{className:"flex items-center justify-center w-8 h-8 p-2 border rounded bg-scale-100",children:(0,f.jsx)(h.Chd,{strokeWidth:2})}),(0,f.jsx)("h4",{children:"Terminal instructions"})]}),n&&(0,f.jsx)("div",{className:"cursor-pointer",onClick:function(){return p(!x)},children:x?(0,f.jsx)(h.hJz,{size:14,strokeWidth:1.5}):(0,f.jsx)(h.FgK,{size:14,strokeWidth:1.5})})]}),(0,f.jsx)("div",{children:(0,f.jsx)(j,{commands:E})})]}),b&&0===b.length?(0,f.jsxs)("div",{className:"px-8 py-6 space-y-3 border-t",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h3",{className:"text-base text-scale-1200",children:"You may need to create an access token"}),(0,f.jsx)("p",{className:"text-sm text-scale-1100",children:"You can create a secure access token in your account section"})]}),(0,f.jsx)(h.zxk,{type:"default",onClick:function(){return c.push("/account/tokens")},children:"Access tokens"})]}):(0,f.jsxs)("div",{className:"px-8 py-6 space-y-3 border-t",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h3",{className:"text-base text-scale-1200",children:"Need help?"}),(0,f.jsx)("p",{className:"text-sm text-scale-1100",children:"Read the documentation, or browse some sample code."})]}),(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsx)(Y.default,{passHref:!0,href:"https://supabase.com/docs/guides/functions",children:(0,f.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,f.jsx)(h.zxk,{type:"default",iconRight:(0,f.jsx)(h.sDS,{}),children:"Documentation"})})}),(0,f.jsx)(Y.default,{passHref:!0,href:"https://github.com/supabase/supabase/tree/master/examples/edge-functions/supabase/functions",children:(0,f.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,f.jsx)(h.zxk,{as:"a",type:"default",iconRight:(0,f.jsx)(h.seM,{}),children:"Examples"})})})]})]})]})},L=function(){return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"grid max-w-7xl gap-y-12 py-12 lg:grid-cols-12 lg:gap-x-16",children:[(0,f.jsxs)("div",{className:"col-span-5 space-y-4",children:[(0,f.jsx)("p",{className:"max-w-lg text-base text-scale-1200",children:"Scalable functions to run your code with no server management."}),(0,f.jsx)("p",{className:"max-w-lg text-sm text-scale-1100",children:"Edge Functions are server-side Typescript functions, distributed globally at the edge - close to your users. They can be used for listening to webhooks or integrating your Supabase project with third-parties."}),(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsx)(Y.default,{passHref:!0,href:"https://supabase.com/docs/guides/functions",children:(0,f.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,f.jsx)(h.zxk,{type:"default",iconRight:(0,f.jsx)(h.sDS,{}),children:"Documentation"})})}),(0,f.jsx)(Y.default,{passHref:!0,href:"https://github.com/supabase/supabase/tree/master/examples/edge-functions/supabase/functions",children:(0,f.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,f.jsx)(h.zxk,{type:"default",iconRight:(0,f.jsx)(h.seM,{}),children:"Examples"})})})]})]}),(0,f.jsx)(_,{})]})})}},84479:function(e,t,s){s.d(t,{Z:function(){return p}});var n=s(79894),r=s(86677),i=s(27378),a=s(25229),c=s(88983),l=s(42791),o=s(24246),d=function(e){var t=e.item,s=(0,r.useRouter)(),n=s.pathname.split("/")[5],i=s.query.ref;return(0,o.jsxs)(c.mQc,{defaultActiveId:"1",type:"underlined",size:"medium",activeId:n||"metrics",onChange:function(e){return s.push("/project/".concat(i,"/functions/").concat(t.id,"/").concat("metrics"===e?"":e))},children:[(0,o.jsx)(c.mQc.Panel,{id:"details",label:"Details"}),(0,o.jsx)(c.mQc.Panel,{id:"metrics",label:"Metrics"}),(0,o.jsx)(c.mQc.Panel,{id:"invocations",label:"Invocations"}),(0,o.jsx)(c.mQc.Panel,{id:"logs",label:"Logs"})]})},u=s(80172),x=s(38230),h=s(68043),m=s(54670),p=(0,l.QO)((0,a.Pi)((function(e){var t=e.title,s=e.children,a=((0,r.useRouter)(),(0,l.UO)()),p=a.id,f=a.ref,j=(0,l.oR)(),v=j.functions,b=j.ui,g=(0,i.useState)(!1),N=g[0],y=g[1];if((0,i.useEffect)((function(){b.selectedProjectRef&&v.load()}),[b.selectedProjectRef]),!(0,l.FH)(h.KA.FUNCTIONS_READ,"*"))return(0,o.jsx)(u.ZP,{title:t||"Edge Functions",product:"Edge Functions",children:(0,o.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:(0,o.jsx)(x.Z,{isFullPage:!0,resourceText:"access your project's edge functions"})})});var w=p?v.byId(p):null,k=(null===w||void 0===w?void 0:w.name)||"",R=!(v.list().length>0);return(0,o.jsxs)(u.ZP,{isLoading:!v.isLoaded,title:t||"Edge Functions",product:"Edge Functions",children:[R?(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"mx-auto max-w-5xl py-24 px-5",children:[(0,o.jsx)("div",{className:"item-center  flex  flex-col justify-between  gap-y-4  xl:flex-row",children:(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("div",{className:["h-6 w-6 rounded border border-brand-600 bg-brand-300","flex items-center justify-center text-brand-900"].join(" "),children:(0,o.jsx)(c.seM,{size:14,strokeWidth:3})}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsx)("h1",{className:"text-2xl text-scale-1200",children:"Edge Functions"}),(0,o.jsx)("p",{className:"mt-1 text-scale-1000",children:"Beta"})]})]})}),s]})}):(0,o.jsxs)("div",{className:"flex h-full flex-grow flex-col py-6",children:[(0,o.jsxs)("div",{className:["mx-auto flex w-full flex-col transition-all","1xl:px-28 gap-4 px-5 lg:px-16 xl:px-24 2xl:px-32"].join(" "),children:[(0,o.jsx)("div",{className:"item-center flex flex-col justify-between gap-y-4 xl:flex-row",children:(0,o.jsxs)("div",{className:"flex items-center gap-3 w-full",children:[(0,o.jsx)("div",{className:["h-6 w-6 rounded border border-brand-600 bg-brand-300","flex items-center justify-center text-brand-900"].join(" "),children:(0,o.jsx)(c.seM,{size:14,strokeWidth:3})}),(0,o.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsx)(n.default,{href:"/project/".concat(f,"/functions"),children:(0,o.jsx)("h1",{className:"cursor-pointer text-2xl text-scale-1200 transition-colors hover:text-scale-1100",children:"Edge Functions"})}),(0,o.jsx)("p",{className:"mt-1 text-scale-1000",children:"Beta"}),k&&(0,o.jsxs)("div",{className:"mt-1.5 flex items-center space-x-4",children:[(0,o.jsx)("span",{className:"text-scale-1000",children:(0,o.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",children:(0,o.jsx)("path",{d:"M16 3.549L7.12 20.600"})})}),(0,o.jsx)("h5",{className:"text-lg text-scale-1200",children:k})]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)(c.zxk,{type:"default",icon:(0,o.jsx)(c.Chd,{size:14,strokeWidth:1.5}),onClick:function(){return y(!0)},children:"Terminal Instructions"}),(0,o.jsx)(n.default,{href:"https://supabase.com/docs/guides/functions",children:(0,o.jsx)("a",{target:"_link",children:(0,o.jsx)(c.zxk,{type:"default",icon:(0,o.jsx)(c.TqL,{size:14,strokeWidth:1.5}),children:"Documentation"})})})]})]})]})}),w&&(0,o.jsx)(d,{item:w})]}),(0,o.jsx)("div",{className:["mx-auto flex h-full w-full flex-grow flex-col transition-all","1xl:px-28 gap-4 px-5 lg:px-16 xl:px-24 2xl:px-32"].join(" "),children:s})]}),(0,o.jsx)(c.u_l,{size:"xlarge",visible:N,onCancel:function(){return y(!1)},header:(0,o.jsx)("h3",{children:"Deploying an edge function to your project"}),customFooter:(0,o.jsx)("div",{className:"w-full flex items-center justify-end",children:(0,o.jsx)(c.zxk,{type:"primary",size:"tiny",onClick:function(){return y(!1)},children:"Confirm"})}),children:(0,o.jsx)("div",{className:"py-4",children:(0,o.jsx)(m.ds,{removeBorder:!0})})})]})})))},66745:function(e,t,s){s.d(t,{hV:function(){return m}});var n=s(90089),r=s(55732),i=s(34707),a=s.n(i),c=s(36492),l=s(14919),o=s(20796),d=(s(27378),s(67527)),u=["enabled"];function x(e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(a().mark((function e(t){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.U2)("".concat(o.T5,"/profile/access-tokens"),{signal:t});case 2:if(!(s=e.sent).error){e.next=5;break}throw s.error;case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.enabled,(0,n.Z)(e,u));return(0,c.a)(d.C.list(),(function(e){return x(e.signal)}),t)}},67527:function(e,t,s){s.d(t,{C:function(){return n}});var n={list:function(){return["access-tokens"]}}},36230:function(e,t,s){s.d(t,{f:function(){return n}});var n={list:function(e){return["projects",e,"edge-functions"]}}},48228:function(e,t,s){s.d(t,{D:function(){return x}});var n=s(27378),r=s(464),i=s(89886),a=s(30081),c=s(33989),l=s(32161);class o extends c.l{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.client.defaultMutationOptions(e),(0,l.VS)(t,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this})}onUnsubscribe(){var e;this.listeners.length||(null==(e=this.currentMutation)||e.removeObserver(this))}onMutationUpdate(e){this.updateResult();const t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:"undefined"!==typeof e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:(0,i.R)(),t={...e,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){a.V.batch((()=>{var t,s,n,r;if(this.mutateOptions)if(e.onSuccess)null==(t=(s=this.mutateOptions).onSuccess)||t.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(n=(r=this.mutateOptions).onSettled)||n.call(r,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(e.onError){var i,a,c,l;null==(i=(a=this.mutateOptions).onError)||i.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(c=(l=this.mutateOptions).onSettled)||c.call(l,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}e.listeners&&this.listeners.forEach((e=>{e(this.currentResult)}))}))}}var d=s(85945),u=s(24798);function x(e,t,s){const i=(0,l.lV)(e,t,s),c=(0,d.NL)({context:i.context}),[x]=n.useState((()=>new o(c,i)));n.useEffect((()=>{x.setOptions(i)}),[x,i]);const m=(0,r.$)(n.useCallback((e=>x.subscribe(a.V.batchCalls(e))),[x]),(()=>x.getCurrentResult()),(()=>x.getCurrentResult())),p=n.useCallback(((e,t)=>{x.mutate(e,t).catch(h)}),[x]);if(m.error&&(0,u.L)(x.options.useErrorBoundary,[m.error]))throw m.error;return{...m,mutate:p,mutateAsync:m.mutate}}function h(){}}}]);
//# sourceMappingURL=4479-b2c5a488193e71bf.js.map